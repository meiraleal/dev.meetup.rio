const FILE_BUNDLE={"/bootstrap.js":{content:'self.sleep=(e=0)=>new Promise(t=>setTimeout(t,e));const j=["test","types","mvc","date"],l=e=>{const t=new Map,s=new Set;e.listeners=t,e.on=(n,o)=>{if(!o)return console.error(`Error adding listener to ${n}: no callback passed`);t.has(n)||t.set(n,new Set),t.get(n).add(o)},e.off=(n,o)=>{const i=t.get(n);i&&(i.delete(o),i.size===0&&t.delete(n))},e.onAny=n=>{if(!n)return console.error("Error adding onAny listener: no callback passed");s.add(n.bind(e))},e.offAny=n=>{s.delete(n)},e.emit=(n,o)=>{const i=[];return t.get(n)?.forEach(r=>{try{const a=r;i.push(a(o))}catch(a){console.error(`Error in listener for key "${n}":`,a)}}),s.forEach(r=>{try{const a=r.bind(e);i.push(a({key:n,data:o}))}catch(a){console.error(`Error in onAny listener for key "${n}":`,a)}}),i}},f={};l(f);const m={add:function(...e){return e.forEach(t=>!this.includes(t)&&this.push(t)),this},remove:function(e){const t=Number.parseInt(e,10);return!Number.isNaN(t)&&t>=0&&t<this.length&&this.splice(t,1),this},list:function(){return[...this]},get:function(e){const t=Number.parseInt(e,10);return!Number.isNaN(t)&&t>=0&&t<this.length?this[t]:void 0}},p={set:function(...e){return e.length===1&&typeof e[0]=="object"&&e[0]!==null?Object.entries(e[0]).forEach(([t,s])=>{this[t]=s}):e.length===2&&typeof e[0]=="string"&&(this[e[0]]=e[1]),this},add:function(e,t){if(typeof t=="object")return this[e]||(this[e]={}),Object.entries(t).forEach(([s,n])=>{this[e][s]=n}),this},get:function(...e){const[t,s]=e;if(e.length!==0)return e.length===2?this[t]?.[s]:this[t]},remove:function(...e){return e.length===2?delete this[e[0]][e[1]]:delete this[e[0]],this},list:function(){return Object.entries(this)},keys:function(){return Object.keys(this)}},b=(e={})=>{const t=Object.create(Object.getPrototypeOf(e)),s=Array.isArray(e)?m:p;return Object.assign(t,s),Object.setPrototypeOf(e,t),e},d={modules:{name:"modules",description:"Global modules store"},storage:{name:"storage",description:"Storage Module",base:{install:b}},error:{name:"error",base:console.error,frontend:!0,backend:!0},log:{name:"log",base:console.log,frontend:!0,backend:!0},icons:{name:"icons",alias:"Icons",base:self.__icons||{}},theme:{name:"theme"},components:{name:"components"},hooks:{name:"hooks",description:"Global Hooks store",functions:({$APP:e})=>({get:function(t){return this[t]||[]},add:function(t,s){this[t]=Array.isArray(this[t])?[...this[t],s]:[s]},set:function(t){Object.entries(t).forEach(([s,n])=>this.add(s,n))},run:async function(t,...s){try{if(Array.isArray(this[t]))for(const n of this[t])await n(...s)}catch(n){e.error(`Error running hook \'${t}\':`,n)}},clear:function(t){this[t]=null}})},settings:{name:"settings",description:"Global settings store",base:{dev:!0,backend:!1,frontend:!0,mv3:!1,mv3Injected:!1,basePath:"",...self.__settings||{}},hooks:({context:e})=>({moduleAdded({module:t}){t.settings&&(e[t.name]=t.settings)}})},events:{name:"events",description:"Global events Store",base:f,functions:{install:l}},data:{name:"data",description:"Data Migration store"},routes:{name:"routes",description:"Routes store"},devFiles:{name:"devFiles",base:[]},fs:{dev:!0,name:"fs",description:"FileSytem Module",functions:({$APP:e,context:t})=>({async import(s,{tag:n,module:o}={}){try{const i=await import(s);return t[s]={tag:n,path:s,module:o,extension:n?"component":"js"},i}catch(i){return console.error(`Failed to import ${s}:`,i),{error:!0}}},async fetchResource(s,n,o){try{const i=await fetch(s);if(t[s]={path:s,extension:o},i.ok)return await n(i)}catch(i){console.warn(`Resource not found at: ${s}`,i)}return null},list(){const s={};return Object.values(t).forEach(n=>{const{extension:o}=n;s[n.extension]||(s[o]=[]),s[o].push(n)}),s},assets(){return Object.values(t).filter(({extension:s})=>!["js","component"].includes(s))},components(){return Object.values(t).filter(({tag:s,extension:n})=>n==="js"&&!!s)},json(s){return t.fetchResource(s,n=>n.json(),"json")},css:async(s,n=!1)=>{const o=await t.fetchResource(s,async r=>await r.text(),"css");if(!n)return o;const i=document.createElement("style");return i.textContent=o,document.head.appendChild(i),o},getFilePath(s){return e.settings.mv3Injected?chrome.runtime.getURL(s):`${e.settings.basePath}${s.startsWith("/")?s:`/${s}`}`},getModulePath(s,n){t.getFilePath(`modules/${s}/${n}`)},getRequestPath(s){const n=new URL(s);return n.pathname+n.search}})}},y={imports:[],async bootstrap({modules:e=[],backend:t=!1,settings:s={},theme:n},o={}){return this.settings.set({...s,...o,backend:t,frontend:!t,modules:e}),this.settings.dev&&(await this.importModules(j),e.length&&await this.importModules(e)),t||(u.fs.css("theme.css",!0),n&&this.theme.set({theme:n})),u.hooks.run("init"),this},getPath({module:e,version:t,file:s="index.js"}){return["/modules",e,t&&t!=="latest"&&t,s].filter(Boolean).join("/")},async importModule(e){const[t,s]=Array.isArray(e)?e:[e];if(!this.imports.includes(t))try{await this.fs.import(this.getPath({module:t,version:s}),{module:t});const n=this.modules[t];if(this.imports.push(t),!n)return;n.modules&&await this.importModules(n.modules),n.frontend&&this.settings.frontend&&await this.fs.import(this.getPath({module:t,version:s,file:"frontend.js"}),{module:t}),n.backend&&this.settings.backend&&await this.fs.import(this.getPath({module:t,version:s,file:"backend.js"}),{module:t})}catch(n){u.error(`Error loading module \'${t}\':`,n)}},async importModules(e){for(const t of e)await this.importModule(t)},installModulePrototype:b,addHooks({hooks:e,base:t}){if(!this.hooks)return t;e&&Object.entries(typeof e=="function"?e({$APP:this,context:t}):e).map(([s,n])=>this.hooks.add(s,n))},updateModule(e,t=!1){const{alias:s,path:n,library:o,functions:i,name:r,hooks:a}=e,c=e.base??this[r];return e.base&&this.setModuleBase({base:c,name:r,alias:s}),o&&this.setLibrary({base:c,name:r,alias:s}),this.modules[r]||this.setModuleMeta({name:r,module:{...e,base:c}}),i&&this.addFunctions({name:r,functions:i}),a&&this.addHooks({hooks:a,name:r,base:c}),n&&!this.modules[n]&&(this.modules[n]=this.modules[r]),t||this.hooks?.get("moduleUpdated").map(g=>g.bind(this[e.name])({module:e})),c},setLibrary({base:e,name:t,alias:s}){this[t]=e,s&&(this[s]=e),this.modules?.[t]&&(this.modules[t].base=e)},setModuleBase({base:e,name:t,alias:s}){this.installModulePrototype(e),this.setLibrary({base:e,name:t,alias:s})},setModuleMeta({name:e,module:t}){this.modules&&this.modules.set(e,t)},addModule(e){if(e.dev&&this.settings.dev!==!0||this?.modules?.[e.name])return;e.base||(e.base={});const t=this.updateModule(e,!0);return this.hooks?.get("moduleAdded").map(s=>s.bind(this[e.name])({module:e})),this.log&&this.log(`Module \'${e.name}\' added successfully`),t},addFunctions({name:e,functions:t}){if(!this[e])throw new Error(`Module \'${e}\' not found`);const s=Object.getPrototypeOf(this[e]);return Object.assign(s,typeof t=="function"?t({$APP:this,context:this[e]}):t),this[e]}},h=(e=y)=>{const t=Object.create(e);for(const s in d)t.addModule(d[s]);return t},u=h();self.initApp=h,self.$aux={initApp:h,ArrayStorageFunctions:m,ObjectStorageFunctions:p,prototypeAPP:y,coreModules:d};export default u;\n',metaType:"application/javascript"},"/app.js":{content:`import a from"/bootstrap.js";a.bootstrap({name:"Habits Tracker",modules:["apps/habits","icon-lucide","font/manrope","uix","apps/bundler","p2p"],theme:{font:{family:"'Manrope'"}}});
`,metaType:"application/javascript"},"/modules/test/index.js":{content:"export default {}"},"/modules/test/assert/index.js":{content:"export default {}"},"/modules/test/mock/index.js":{content:"export default {}"},"/modules/types/index.js":{content:'const g={email:/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/},x=n=>{try{return n in c?n:JSON.parse(n)}catch{return}},c={undefined:void 0,null:null,"":null,[void 0]:void 0},y={any:n=>n,function:n=>n,extension:()=>{},boolean:(n,{attribute:e=!0}={})=>e&&n===""||["true",1,"1",!0].includes(n),string:n=>n in c?c[n]:String(n),array:(n,e={})=>{if(Array.isArray(n))return n;const{itemType:t}=e;try{if(!n)throw n;const r=x(n);if(!Array.isArray(r))throw r;return t?r.map(s=>typeof s!="object"?s:Object.entries(s).reduce((i,[f,d])=>(i[f]=y[t[f]?.type]?y[t[f].type](d,e):d,i),{})):r}catch{return[]}},number:n=>n&&Number(n),date:n=>new Date(n),object:(n,e={})=>{const t=typeof n=="string"?x(n):n;return e.properties&&Object.entries(e.properties).map(([r,s])=>{s.defaultValue!==void 0&&(t[r]=s.defaultValue)}),t}},w=(n,e={})=>{const{type:t}=e;return(y[t]||(r=>r))(n,e)},O={number:(n,e={})=>{if("min"in e&&n<e.min)return["minimum",null];if("max"in e&&n>e.max)return["maximum",null];if(Number.isNaN(Number(n)))return["NaN",null]}},A=(n,e)=>{if(e.required===!0&&(n==null||n===""))return["required",null];const t=y[e.type];if(e.relationship)return e.many?[null,Array.isArray(n)?n.map(i=>e.mixed?i:i?.id??i):[]]:[null,n?.id??n];const r=t?t(n,e):[void 0,null,""].includes(n)?e.defaultValue??null:n,s=O[e.type];if(s){const i=s(n,e);if(i)return i}if("format"in e||g[e.key]){const i="format"in e?e.format:g[e.key];if(!(typeof i=="function"?e.format:a=>i.test(a))(r))return["invalid",null]}return[null,r]};function T(n,e){return n.replace(/\\${(.*?)}/g,(t,r)=>e[r.trim()])}const _=(n,{schema:e,row:t={},undefinedProps:r=!0,validateVirtual:s=!1})=>{if(!e)return[null,n];const i={};let f=!1;const d=r?e:n;for(const u in d){const l={...e[u],key:u};if("virtual"in l||l.persist===!1)continue;const[o,b]=[void 0,null,""].includes(n[u])&&!l.required?[null,l.defaultValue]:A(n[u],l);o?(f=!0,i[u]=o):b!==void 0&&(n[u]=b)}const a=Object.fromEntries(Object.entries(e).filter(([u,l])=>"virtual"in l));for(const u in a)if(s){const[l,o]=A(T(a[u].virtual,{...t,...n}),a[u]);l?(f=!0,i[u]=l):o!==void 0&&(n[u]=o)}else n[u]=T(a[u].virtual,{...t,...n});return f?[i,null]:[null,n]},N=(n={})=>new Proxy(n,{get(e,t,r){return t==="$"?{...e}:t in e?Reflect.get(e,t,r):s=>(e[t]=s===void 0||s,r)}}),m=(n,e)=>{const t=typeof e=="object"&&!Array.isArray(e)&&e!==null?e:{defaultValue:e};return N({type:n,persist:!0,attribute:!0,...t})},H=n=>(...e)=>{const t=e[0];let r,s=e[2];typeof e[1]=="string"?r=e[1]:s=e[1];const i=V.includes(n);return N({type:i?n==="belongs_many"?"array":"string":n==="one"?"object":"array",many:C.includes(n),belongs:i,persist:i,relationship:n,defaultValue:n==="belongs_many"?[]:null,polymorphic:t==="*"||Array.isArray(t),targetModel:t,targetForeignKey:r,index:V.includes(n),...s})},$={createType:m,stringToType:w,validateType:_},q=["one","many","belongs","belongs_many"],C=["many","belongs_many"],V=["belongs","belongs_many"],E={get(n,e){if(n[e])return n[e];const t=e.toLowerCase();return q.includes(e)?H(e):t==="extension"?(r={})=>m("extension",{...r,persist:!1,extension:!0}):(r={})=>{if(!y[t])throw new Error(`Unknown type: ${t}`);return m(t,r)}}},F=new Proxy($,E);export default F;\n',metaType:"application/javascript"},"/modules/mvc/index.js":{content:`import m from"/bootstrap.js";m.addModule({name:"mvc",modules:["mvc/view","mvc/model","mvc/controller","app"]});
`,metaType:"application/javascript"},"/modules/mvc/view/index.js":{content:`import e from"/bootstrap.js";e.addModule({name:"view",path:"mvc/view",alias:"View",frontend:!0,backend:!0,modules:["mvc/view/fonts","mvc/view/unocss"]});
`,metaType:"application/javascript"},"/modules/mvc/view/fonts/index.js":{content:`import e from"/bootstrap.js";e.addModule({name:"fonts",path:"mvc/view/fonts",frontend:!0,base:[]});
`,metaType:"application/javascript"},"/modules/mvc/view/fonts/frontend.js":{content:`import a from"/bootstrap.js";const d={ttf:"truetype"},m={extralight:200,light:300,regular:400,medium:500,semibold:600,bold:700,extrabold:800},i=(t,o)=>{const{variants:e,name:n,type:s="woff2"}=o;return e.map(f=>{const c=m[f]||400;return\`@font-face {
      font-family: '\${n}';
      font-weight: \${c};
      src: url('\${a.settings.basePath}/modules/font/\${t}/\${f}.\${s}') format('\${d[s]||s}');
    }\`}).join(\`
\`)},r=(t,o)=>{const e=i(t,o),n=document.createElement("style");n.textContent=e,document.head.appendChild(n)};a.addFunctions({name:"fonts",functions:{load:r}}),a.addHooks({name:"fonts",hooks:{moduleAdded({module:t}){t.font&&r(t.name,t.font)}}});
`,metaType:"application/javascript"},"/modules/mvc/view/unocss/index.js":{content:`import e from"/bootstrap.js";e.addModule({name:"unocss",path:"mvc/view/unocss",frontend:!0,dev:!0});
`,metaType:"application/javascript"},"/modules/mvc/view/unocss/frontend.js":{content:"export default {}"},"/modules/mvc/view/frontend.js":{content:'import l from"/bootstrap.js";import f from"/modules/mvc/view/html/index.js";import i from"/modules/types/index.js";const g=i.object({properties:{model:i.string().$,id:i.string().$,method:i.string().$,filter:i.object().$,includes:i.string().$,order:i.string().$,limit:i.number().$,offset:i.number().$,count:i.number().$,rows:i.array().$,row:i.object().$}}).$,C=i.object({}).$,_=i.object({}).$,$=i.array({}).$,A=i.object({}).$;function b(n,t){t?.constructor&&(b(n,Object.getPrototypeOf(t)),t.constructor.tag&&n.classList.add(t.constructor.tag))}class m extends HTMLElement{static get observedAttributes(){return Object.keys(this.properties).filter(t=>this.properties[t].attribute!==!1)}static properties={_data:g,_actions:C,_map:_,_rows:$,_row:A};static _attrs={};static plugins=[];state={};_hasUpdated=!1;_ignoreAttributeChange=!1;_changedProps={};constructor(){super(),l.events.install(this)}connectedCallback(){this.constructor.properties&&this.initProps(),b(this,Object.getPrototypeOf(this));for(const t of this.constructor.plugins){const{event:e,fn:s,test:r}=t;s&&(!r||r({instance:this,component:this.constructor}))&&this.on(e,s.bind(this))}this.emit("connectedCallback",{instance:this,component:this.constructor}),this.requestUpdate()}disconnectedCallback(){this.emit("disconnectedCallback",{instance:this,component:this.constructor})}q(t){return this.querySelector(t)}qa(t){return this.querySelectorAll(t)}prop(t){return{value:this[t],setValue:(e=>this[t]=e).bind(this)}}initProps(){for(const t of this.attributes){const e=this.constructor._attrs[t.name],s=this.constructor.properties[e];if(s&&s.type!=="boolean"&&t.value===""){this.removeAttribute(t.name);continue}this.state[e]=s?i.stringToType(t.value,{...s,attribute:!0}):t.value}for(const[t,e]of Object.entries(this.constructor.properties)){const{type:s,sync:r,defaultValue:o,attribute:a=!0,setter:h,getter:u}=e;if(r)continue;this.state[t]??=this[t]??o,Object.getOwnPropertyDescriptor(this,t)||Object.defineProperty(this,t,{get:u?u.bind(this):()=>this.state[t],set:h?h.bind(this):c=>{const p=this.state[t];p!==c&&(this.state[t]=c,this.updateAttribute({key:t,value:c,skipPropUpdate:!0,type:s}),this.requestUpdate(t,p,c))}});const d=this.state[t];!a||this.hasAttribute(t)||d===void 0||(this.updateAttribute({key:t,value:d,skipPropUpdate:!0,type:s}),this._changedProps[t]=void 0)}}requestUpdate(t,e){t&&(this._changedProps[t]=e),this.updateComplete&&clearTimeout(this.updateComplete);const s={...this._changedProps};return this.updateComplete=setTimeout(()=>{this.performUpdate(s,t===void 0)},0),this.updateComplete}performUpdate(t,e){this.updateComplete=null,!(this._hasUpdated&&!e&&!this.shouldUpdate(t))&&(this.emit("willUpdate",t),this.update(t),this._hasUpdated||(this._hasUpdated=!0,this.emit("firstUpdated",t)),this.emit("updated",t),this._changedProps={})}shouldUpdate(t){for(const[e,s]of Object.entries(t)){const r=this[e],o=this.constructor.properties[e],a=o?.hasChanged?o.hasChanged(r,s):s!==r;e==="darkmode"&&console.log({hasChanged:a},o.hasChanged),a||delete t[e]}return this.changedProps={},Object.keys(t).length>0||!this._hasUpdated}update(){f.render(this.render(),this)}render(){return f``}attributeChangedCallback(t,e,s){e!==s&&(this.emit("attributeChangedCallback",{instance:this,component:this.constructor,key:t,value:s,oldValue:e}),!this._ignoreAttributeChange&&(this.state[t]=i.stringToType(s,this.constructor.properties[t]),this._hasUpdated&&this.requestUpdate(t,e)))}updateAttribute({key:t,value:e,type:s,skipPropUpdate:r=!1}){s&&(this._ignoreAttributeChange=r,s==="function"&&typeof e=="function"?this.setAttribute(t,e.toString()):s==="boolean"?e?this.setAttribute(t,""):this.removeAttribute(t):e===void 0?this.removeAttribute(t):["array","object"].includes(s)?this.setAttribute(t,JSON.stringify(e)):this.setAttribute(t,e),r?this._ignoreAttributeChange=!1:this[t]=e)}}window.$=n=>document.querySelector(n),window.$$=n=>document.querySelectorAll(n),l.setLibrary({name:"view",path:"mvc/view",alias:"View",base:m});export default m;\n',metaType:"application/javascript"},"/modules/mvc/view/html/index.js":{content:'const He=!1,ze=!1,ve=!1,Ue=!1,P=globalThis;let Be;const h=void 0;let We=0,Ye;const _=s=>s,C=P.trustedTypes,Q=C?C.createPolicy("lit-html",{createHTML:s=>s}):void 0,$e=s=>s,H=(s,e,t)=>$e,Fe=s=>{},Xe=()=>{k=H},Ke=(s,e,t)=>k(s,e,t),z="$lit$",g=`lit$${Math.random().toFixed(9).slice(2)}$`,v="?"+g,Te=`<${v}>`,E=document,S=()=>E.createComment(""),x=s=>s===null||typeof s!="object"&&typeof s!="function",U=Array.isArray,G=s=>U(s)||typeof s?.[Symbol.iterator]=="function",B=`[ 	\n\\f\\r]`,ye=`[^ 	\n\\f\\r"\'\\`<>=]`,Ne=`[^\\\\s"\'>=/]`,b=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,q=1,W=2,Se=3,Z=/-->/g,J=/>/g,$=new RegExp(`>|${B}(?:(${Ne}+)(${B}*=${B}*(?:${ye}|("|\')|))|$)`,"g"),xe=0,ee=1,be=2,te=3,ne=/\'/g,ie=/"/g,se=/^(?:script|style|textarea|title)$/i,oe=1,R=2,M=3,Y=1,I=2,Ae=3,Ve=4,we=5,F=6,Oe=7,X=s=>(e,...t)=>({_$litType$:s,strings:e,values:t}),L=X(oe),ae=X(R),je=X(M),A=Symbol.for("lit-noChange"),c=Symbol.for("lit-nothing"),re=new WeakMap,T=E.createTreeWalker(E,129);let k=H;function le(s,e){if(!U(s)||!Object.hasOwn(s,"raw")){let t="invalid template strings array";throw new Error(t)}return Q!==void 0?Q.createHTML(e):e}const de=(s,e)=>{const t=s.length-1,n=[];let i=e===R?"<svg>":e===M?"<math>":"",o,a=b;for(let r=0;r<t;r++){const l=s[r];let p=-1,d,u=0,m;for(;u<l.length&&(a.lastIndex=u,m=a.exec(l),m!==null);)u=a.lastIndex,a===b?m[q]==="!--"?a=Z:m[q]!==void 0?a=J:m[W]!==void 0?(se.test(m[W])&&(o=new RegExp(`</${m[W]}`,"g")),a=$):m[Se]!==void 0&&(a=$):a===$?m[xe]===">"?(a=o??b,p=-1):m[ee]===void 0?p=-2:(p=a.lastIndex-m[be].length,d=m[ee],a=m[te]===void 0?$:m[te]===\'"\'?ie:ne):a===ie||a===ne?a=$:a===Z||a===J?a=b:(a=$,o=void 0);const O=a===$&&s[r+1].startsWith("/>")?" ":"";i+=a===b?l+Te:p>=0?(n.push(d),l.slice(0,p)+z+l.slice(p)+g+O):l+g+(p===-2?r:O)}const f=i+(s[t]||"<?>")+(e===R?"</svg>":e===M?"</math>":"");return[le(s,f),n]};class w{parts=[];constructor({strings:e,["_$litType$"]:t},n){let i,o=0,a=0;const f=e.length-1,r=this.parts,[l,p]=de(e,t);if(this.el=w.createElement(l,n),T.currentNode=this.el.content,t===R||t===M){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(i=T.nextNode())!==null&&r.length<f;){if(i.nodeType===1){if(i.hasAttributes())for(const d of i.getAttributeNames())if(d.endsWith(z)){const u=p[a++],O=i.getAttribute(d).split(g),D=/([.?@])?(.*)/.exec(u);r.push({type:Y,index:o,name:D[2],strings:O,ctor:D[1]==="."?me:D[1]==="?"?he:D[1]==="@"?ue:V}),i.removeAttribute(d)}else d.startsWith(g)&&(r.push({type:F,index:o}),i.removeAttribute(d));if(se.test(i.tagName)){const d=i.textContent.split(g),u=d.length-1;if(u>0){i.textContent=C?C.emptyScript:"";for(let m=0;m<u;m++)i.append(d[m],S()),T.nextNode(),r.push({type:I,index:++o});i.append(d[u],S())}}}else if(i.nodeType===8)if(i.data===v)r.push({type:I,index:o});else{let u=-1;for(;(u=i.data.indexOf(g,u+1))!==-1;)r.push({type:Oe,index:o}),u+=g.length-1}o++}h?.({kind:"template prep",template:this,clonableTemplate:this.el,parts:this.parts,strings:e})}static createElement(e,t){const n=E.createElement("template");return n.innerHTML=e,n}}function y(s,e,t=s,n){if(e===A||e===c)return e;let i=n!==void 0?t.__directives?.[n]:t.__directive;const o=x(e)?void 0:e._$litDirective$;return i?.constructor!==o&&(i?._$notifyDirectiveConnectionChanged?.(!1),o===void 0?i=void 0:(i=new o(s),i?._$initialize(s,t,n)),n!==void 0?(t.__directives??=[])[n]=i:t.__directive=i),i!==void 0&&(e=y(s,i._$resolve(s,e.values),i,n)),e}class ce{_$parts=[];_$disconnectableChildren=void 0;constructor(e,t){this._$template=e,this._$parent=t}get parentNode(){return this._$parent.parentNode}get _$isConnected(){return this._$parent._$isConnected}_clone(e){const{el:{content:t},parts:n}=this._$template,i=(e?.creationScope??E).importNode(t,!0);T.currentNode=i;let o=T.nextNode(),a=0,f=0,r=n[0];for(;r!==void 0;){if(a===r.index){let l;r.type===I?l=new N(o,o.nextSibling,this,e):r.type===Y?l=new r.ctor(o,r.name,r.strings,this,e):r.type===F&&(l=new pe(o,this,e)),this._$parts.push(l),r=n[++f]}a!==r?.index&&(o=T.nextNode(),a++)}return T.currentNode=E,i}_update(e){let t=0;for(const n of this._$parts)n!==void 0&&(h?.({kind:"set part",part:n,value:e[t],valueIndex:t,values:e,templateInstance:this}),n.strings!==void 0?(n._$setValue(e,n,t),t+=n.strings.length-2):n._$setValue(e[t])),t++}}class N{type=I;_$committedValue=c;get _$isConnected(){return this._$parent?._$isConnected??this.__isConnected}_$disconnectableChildren=void 0;constructor(e,t,n,i){this._$startNode=e,this._$endNode=t,this._$parent=n,this.options=i,this.__isConnected=i?.isConnected??!0}get parentNode(){let e=_(this._$startNode).parentNode;const t=this._$parent;return t!==void 0&&e?.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$startNode}get endNode(){return this._$endNode}_$setValue(e,t=this){e=y(this,e,t),x(e)?e===c||e==null||e===""?(this._$committedValue!==c&&(h?.({kind:"commit nothing to child",start:this._$startNode,end:this._$endNode,parent:this._$parent,options:this.options}),this._$clear()),this._$committedValue=c):e!==this._$committedValue&&e!==A&&this._commitText(e):e._$litType$!==void 0?this._commitTemplateResult(e):e.nodeType!==void 0?this._commitNode(e):G(e)?this._commitIterable(e):this._commitText(e)}_insert(e){return _(_(this._$startNode).parentNode).insertBefore(e,this._$endNode)}_commitNode(e){this._$committedValue!==e&&(this._$clear(),h?.({kind:"commit node",start:this._$startNode,parent:this._$parent,value:e,options:this.options}),this._$committedValue=this._insert(e))}_commitText(e){if(this._$committedValue!==c&&x(this._$committedValue)){const t=_(this._$startNode).nextSibling;h?.({kind:"commit text",node:t,value:e,options:this.options}),t.data=e}else this._commitNode(E.createTextNode(e)),h?.({kind:"commit text",node:_(this._$startNode).nextSibling,value:e,options:this.options});this._$committedValue=e}_commitTemplateResult(e){const{values:t,["_$litType$"]:n}=e,i=typeof n=="number"?this._$getTemplate(e):(n.el===void 0&&(n.el=w.createElement(le(n.h,n.h[0]),this.options)),n);if(this._$committedValue?._$template===i)h?.({kind:"template updating",template:i,instance:this._$committedValue,parts:this._$committedValue._$parts,options:this.options,values:t}),this._$committedValue._update(t);else{const o=new ce(i,this),a=o._clone(this.options);h?.({kind:"template instantiated",template:i,instance:o,parts:o._$parts,options:this.options,fragment:a,values:t}),o._update(t),h?.({kind:"template instantiated and updated",template:i,instance:o,parts:o._$parts,options:this.options,fragment:a,values:t}),this._commitNode(a),this._$committedValue=o}}_$getTemplate(e){let t=re.get(e.strings);return t===void 0&&re.set(e.strings,t=new w(e)),t}_commitIterable(e){U(this._$committedValue)||(this._$committedValue=[],this._$clear());const t=this._$committedValue;let n=0,i;for(const o of e)n===t.length?t.push(i=new N(this._insert(S()),this._insert(S()),this,this.options)):i=t[n],i._$setValue(o),n++;n<t.length&&(this._$clear(i&&_(i._$endNode).nextSibling,n),t.length=n)}_$clear(e=_(this._$startNode).nextSibling,t){for(this._$notifyConnectionChanged?.(!1,!0,t);e&&e!==this._$endNode;){const n=_(e).nextSibling;_(e).remove(),e=n}}setConnected(e){this._$parent===void 0&&(this.__isConnected=e,this._$notifyConnectionChanged?.(e))}}class V{type=Y;_$committedValue=c;_$disconnectableChildren=void 0;get tagName(){return this.element.tagName}get _$isConnected(){return this._$parent._$isConnected}constructor(e,t,n,i,o){this.element=e,this.name=t,this._$parent=i,this.options=o,n.length>2||n[0]!==""||n[1]!==""?(this._$committedValue=new Array(n.length-1).fill(new String),this.strings=n):this._$committedValue=c}_$setValue(e,t=this,n,i){const o=this.strings;let a=!1;if(o===void 0)e=y(this,e,t,0),a=!x(e)||e!==this._$committedValue&&e!==A,a&&(this._$committedValue=e);else{const f=e;e=o[0];let r,l;for(r=0;r<o.length-1;r++)l=y(this,f[n+r],t,r),l===A&&(l=this._$committedValue[r]),a||=!x(l)||l!==this._$committedValue[r],l===c?e=c:e!==c&&(e+=(l??"")+o[r+1]),this._$committedValue[r]=l}a&&!i&&this._commitValue(e)}_commitValue(e){e===c?_(this.element).removeAttribute(this.name):(h?.({kind:"commit attribute",element:this.element,name:this.name,value:e,options:this.options}),_(this.element).setAttribute(this.name,e??""))}}class me extends V{type=Ae;_commitValue(e){h&&h({kind:"commit property",element:this.element,name:this.name,value:e,options:this.options});const t=this.element[this.name];this.element[this.name]=e===c?void 0:e,this.element?.requestUpdate&&t!==e&&this.element.requestUpdate(this.name,t)}}class he extends V{type=Ve;_commitValue(e){h?.({kind:"commit boolean attribute",element:this.element,name:this.name,value:!!(e&&e!==c),options:this.options}),_(this.element).toggleAttribute(this.name,!!e&&e!==c)}}class ue extends V{type=we;constructor(e,t,n,i,o){super(e,t,n,i,o)}_$setValue(e,t=this){if(e=y(this,e,t,0)??c,e===A)return;const n=this._$committedValue,i=e===c&&n!==c||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,o=e!==c&&(n===c||i);h?.({kind:"commit event listener",element:this.element,name:this.name,value:e,options:this.options,removeListener:i,addListener:o,oldListener:n}),i&&this.element.removeEventListener(this.name,this,n),o&&this.element.addEventListener(this.name,this,e),this._$committedValue=e}handleEvent(e){typeof this._$committedValue=="function"?this._$committedValue.call(this.options?.host??this.element,e):this._$committedValue.handleEvent(e)}}class pe{type=F;_$disconnectableChildren=void 0;constructor(e,t,n){this.element=e,this._$parent=t,this.options=n}get _$isConnected(){return this._$parent._$isConnected}_$setValue(e){h?.({kind:"commit to element binding",element:this.element,value:e,options:this.options}),y(this,e)}}const Qe={_boundAttributeSuffix:z,_marker:g,_markerMatch:v,_HTML_RESULT:oe,_getTemplateHtml:de,_TemplateInstance:ce,_isIterable:G,_resolveDirective:y,_ChildPart:N,_AttributePart:V,_BooleanAttributePart:he,_EventPart:ue,_PropertyPart:me,_ElementPart:pe},De=P.litHtmlPolyfillSupport;De?.(w,N),(P.litHtmlVersions??=[]).push("3.2.0");const Ce=(s,e,t)=>{const n=0,i=t?.renderBefore??e;let o=i._$litPart$;if(h?.({kind:"begin render",id:n,value:s,container:e,options:t,part:o}),o===void 0){const a=t?.renderBefore??null;i._$litPart$=o=new N(e.insertBefore(S(),a),a,void 0,t??{})}return o._$setValue(s),h?.({kind:"end render",id:n,value:s,container:e,options:t,part:o}),o},K=Symbol.for(""),Re=s=>{if(s?.r===K)return s?._$litStatic$},j=s=>({_$litStatic$:s,r:K}),Me=s=>{if(s._$litStatic$!==void 0)return s._$litStatic$;throw new Error(`Value passed to \'literal\' function must be a \'literal\' result: ${s}. Use \'unsafeStatic\' to pass non-literal values, but\n            take care to ensure page security.`)},Ie=(s,...e)=>({_$litStatic$:e.reduce((t,n,i)=>t+Me(n)+s[i+1],s[0]),r:K}),_e=new Map,fe=s=>(e,...t)=>{const n=t.length;let i,o;const a=[],f=[];let r=0,l=!1,p;for(;r<n;){for(p=e[r];r<n&&(o=t[r],(i=Re(o))!==void 0);)p+=i+e[++r],l=!0;r!==n&&f.push(o),a.push(p),r++}if(r===n&&a.push(e[n]),l){const d=a.join("$$lit$$");e=_e.get(d),e===void 0&&(a.raw=a,_e.set(d,e=a)),t=f}return s(e,...t)},ge=fe(L),Le=s=>ge`${j(s)}`,Ee=fe(ae),ke=s=>Ee`${j(s)}`,Pe={unsafeHTML:Le,unsafeStatic:j,staticHTML:ge,staticSVG:Ee,unsafeSVG:ke,render:Ce,html:L,literal:Ie,svg:ae,css};export function css(s,...e){return s.reduce((t,n,i)=>t+n+(e[i]??""),"")}Object.assign(L,Pe);export default L;\n',metaType:"application/javascript"},"/modules/mvc/model/index.js":{content:'import c from"/bootstrap.js";import D from"/modules/types/index.js";c.addModule({name:"sysmodel",alias:"SysModel"});const A=({context:e,collection:t="models"})=>({module:r})=>{if(!r[t])return;const n=Object.fromEntries(Object.keys(r[t]).map(o=>{const f={id:D.string({primary:!0}),...r[t][o]};return[o,Object.fromEntries(Object.entries(f).map(([s,a])=>{const d=a?.$||a;return d.name=s,d.relationship&&!d.targetForeignKey&&(d.targetForeignKey=o),[s,d]}))]}));e.set(n)};c.addModule({name:"models",hooks:({context:e})=>({moduleAdded:A({context:e,collection:"models"}),moduleUpdated:A({context:e,collection:"models"})})}),c.addModule({name:"sysmodels",hooks:({context:e})=>({moduleAdded:A({context:e,collection:"sysmodels"})}),settings:{APP:"App",USER:"User",DEVICE:"Device"}});const g={get(e,t,r){return t==="remove"?()=>i.request("REMOVE",e._modelName,{id:e.id}):t==="update"?()=>{const n={...e};return delete n._modelName,i.request("EDIT",e._modelName,{row:n})}:t==="include"?async n=>{if(!e.id||!e._modelName)return console.error("Cannot run .include() on an object without an ID or model name."),r;const{models:o}=c;if(!(e._modelName in o))throw new Error(`Model ${e._modelName} does not exist in models`);const s=o[e._modelName][n];if(!s)throw new Error(`Relationship \'${n}\' not found in ${e._modelName} model`);const a=await i.request("GET_MANY",s.targetModel,{opts:{filter:s.belongs?e[n]:{[s.targetForeignKey]:e.id}}});return e[n]=m(a,s.targetModel),r}:e[t]},set(e,t,r){return e[t]=r,!0}},y=async({modelName:e,action:t,payload:r})=>{const n=await i.request(t,e,r);return t==="ADD_MANY"&&n&&Array.isArray(n.results)?(n.results.forEach(o=>{o.status==="fulfilled"&&o.value&&(o.value=p(o.value,e))}),n):t.includes("MANY")?r.opts.object?n:n?.items?(n.items=m(n.items,e),n):m(n,e):p(n,e)},T=e=>[{type:"static",name:"get",handler:(t,r={})=>y({modelName:e,action:"GET",payload:t?{id:t,opts:r}:{opts:r}})},{type:"static",name:"getAll",handler:(t={})=>y({modelName:e,action:"GET_MANY",payload:{opts:t}})},{type:"static",name:"add",handler:(t,r)=>y({modelName:e,action:"ADD",payload:{row:t,opts:r}})},{type:"static",name:"addMany",handler:(t,r)=>y({modelName:e,action:"ADD_MANY",payload:{rows:t,opts:r}})},{type:"static",name:"remove",handler:t=>i.request("REMOVE",e,{id:t})},{type:"static",name:"removeAll",handler:t=>i.request("REMOVE_MANY",e,{opts:{filter:t}})},{type:"static",name:"edit",handler:t=>y({modelName:e,action:"EDIT",payload:{row:t}})},{type:"static",name:"editAll",handler:(t,r)=>i.request("EDIT_MANY",e,{opts:{filter:t,updates:r}})},{type:"dynamic",prefix:"getBy",action:"GET"},{type:"dynamic",prefix:"getAllBy",action:"GET_MANY"},{type:"dynamic",prefix:"editAllBy",action:"EDIT_MANY"},{type:"dynamic",prefix:"editBy",action:"EDIT"},{type:"dynamic",prefix:"removeBy",action:"REMOVE"},{type:"dynamic",prefix:"removeAllBy",action:"REMOVE_MANY"}],p=(e,t)=>!e||typeof e!="object"||e.errors?e:(i[t].rows[e.id]=e,i[t].on(`get:${e.id}`,r=>{if(r===void 0){delete i[t].rows[e.id];return}const{id:n,...o}=r;Object.assign(i[t].rows[e.id],o)}),e._modelName=t,new Proxy(i[t].rows[e.id],g)),m=(e,t)=>Array.isArray(e)?e.map(r=>p(r,t)):e,$=e=>typeof e!="string"||!e?e:e.charAt(0).toLowerCase()+e.slice(1),E=new Map,i=new Proxy({},{get(e,t,r){if(t in e)return Reflect.get(e,t,r);if(E.has(t))return E.get(t);const n=t,{models:o}=c;if(!(t in o))throw new Error(`Model ${n} does not exist in models`);const f=o[n],s=T(n,f),a=new Proxy({},{get(d,u,R){if(u in d)return Reflect.get(d,u,R);for(const l of s){if(l.type==="static"&&l.name===u)return l.handler;if(l.type==="dynamic"&&u.startsWith(l.prefix)){const h=u.slice(l.prefix.length);if(!h)continue;const M=$(h);if(!(M in f))throw new Error(`Property \'${M}\' not found in model \'${n}\'`);return(_,w=null)=>{const x={opts:{filter:{[M]:_}}};return w&&(x.opts.row=w),y({modelName:n,action:l.action,payload:x})}}}throw new Error(`Method \'${u}\' not found in model \'${n}\'`)}});return c.events.install(a),a.rows=c.storage.install({}),E.set(t,a),a}});i.proxifyRow=p,i.proxifyMultipleRows=m;export default i;\n',metaType:"application/javascript"},"/modules/mvc/controller/index.js":{content:`import o from"/bootstrap.js";o.addModule({name:"controller",path:"mvc/controller",alias:"Controller",modules:["mvc/controller/backend"],settings:{syncKeySeparator:"_-_"}});
`,metaType:"application/javascript"},"/modules/mvc/controller/backend/index.js":{content:`import c from"/bootstrap.js";const t=e=>{if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(n=>t(n));const a={};for(const n in e)if(Object.hasOwn(e,n)){const r=e[n];typeof r!="function"&&(a[n]=t(r))}return a};c.addModule({name:"backend",alias:"Backend",path:"mvc/controller/backend",base:{sanitize:t},backend:!0});
`,metaType:"application/javascript"},"/modules/app/index.js":{content:`import a from"/bootstrap.js";a.addModule({name:"app"});
`,metaType:"application/javascript"},"/modules/date/index.js":{content:'import n from"/bootstrap.js";const o={formatKey(t){if(!t)return null;const a=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),e=String(t.getDate()).padStart(2,"0");return`${a}-${r}-${e}`}};n.addModule({name:"date",alias:"Date",base:o});\n',metaType:"application/javascript"},"/modules/apps/habits/index.js":{content:`import a from"/bootstrap.js";a.addModule({name:"habits",path:"apps/habits",frontend:!0,backend:!0});
`,metaType:"application/javascript"},"/modules/apps/habits/frontend.js":{content:`import e from"/bootstrap.js";import"/modules/mvc/controller/frontend.js";import t from"/modules/mvc/view/html/index.js";e.events.on("INIT_APP",()=>{e.define("app-index",{render(){return t\`<div class="max-w-6xl mx-auto p-8 flex flex-col gap-16">
                  <div class="flex flex-col gap-4">
                    <h1 class="text-6xl text-center font-bold">
                      <uix-icon name="calendar-heart" class="text-4xl text-blue-600 inline-block align-middle"></uix-icon>
                      Habit Tracker
										</h1>
                    <h2 class="text-3xl text-center font-bold">Build better habits, one day at a time</h2>
                  </div>
                  <uix-card class="p-6 bg-white rounded-lg shadow-md flex flex-col gap-4">
                    <span class="text-2xl font-bold">                 
                      <uix-icon name="circle-plus" class="text-lg text-green-600 inline-block align-middle"></uix-icon> 
                      New Habit
                    </span>
                    <uix-form ._data=\${{model:"habits"}} ._map=\${{submit:"$data:add"}}>
                      <uix-join>
                        <uix-input name="name" class="text-xl"></uix-input>
                        <uix-button label="ADD" icon="plus" type="submit" class="text-xl p-3"></uix-button>
                      </uix-join>
                    </uix-form>
                  </uix-card>
                  <uix-container      
                    class="flex flex-col gap-4"
                    ._data=\${{model:"habits",tag:"uix-card",class:"p-6 bg-white rounded-lg shadow-md flex flex-col gap-4",includes:"checkins,notes",blocks:[{tag:"uix-list",properties:{class:"flex items-center justify-between"},blocks:[{tag:"uix-link",properties:{class:"text-xl font-semibold",_map:{label:"@parent.name"}}},{tag:"uix-link",properties:{class:"text-red-500 hover:text-red-700",icon:"trash",confirmation:"Are you sure you want to remove habit?",_map:{click:"$data:remove"}}}]},{tag:"uix-calendar",properties:{class:"gap-[10px]",_map:{toggledDays:"$map:@parent.checkins:date",habit:"@parent.id",dayContent:{tag:"uix-calendar-day",function:!0}}}},{tag:"uix-list",properties:{class:"flex items-center justify-between"},blocks:[{tag:"uix-button",properties:{label:"Complete today",class:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700",_data:{model:"checkins",method:"edit",displayIf:{"@parent.checkins":{$ninc:{date:"$today"}}}},_map:{_row:"$find:@parent.checkins:date=$today",habit:"@parent.id",date:"$today",click:"$data:add"}}},{tag:"uix-button",properties:{label:"Today Completed",class:"px-4 py-2 rounded-md bg-green-600 text-white cursor-not-allowed",_data:{model:"checkins",method:"edit",displayIf:{"@parent.checkins":{$inc:{date:"$today"}}}},_map:{habit:"@parent.id",date:"$today",click:"$data:remove"}}},{tag:"uix-modal",properties:{icon:"message",label:"Add notes",_map:{cta:{tag:"uix-button",properties:{icon:"message-square-text",label:"Notes",class:"px-4 py-2 rounded-md bg-gray-200 text-black hover:bg-gray-300"}},content:{tag:"uix-form",properties:{class:"flex flex-col gap-4",_data:{model:"notes",method:"add"},_map:{_row:"$find:@parent.notes:date=$today",habit:"@parent.id",date:"$today",submit:"$data:upsert",submitSuccess:"$closest:uix-modal.hide"}},blocks:[{tag:"uix-join",blocks:[{tag:"uix-input",properties:{name:"notes",class:"text-xl",_map:{_row:"$find:@parent.notes:date=$today",value:"@notes"}}},{tag:"uix-button",properties:{label:"ADD",icon:"plus",type:"submit",class:"text-xl"}}]}]}}}}]}]}}> 
                  </uix-container>
                  <uix-card class="p-6 bg-white rounded-lg shadow-md flex flex-col gap-4">
                    <span class="text-lg font-bold">Your Progress</span>
                    <uix-list class="flex gap-8 justify-evenly">
                      <uix-stat label="Total Habits" ._data=\${{model:"habits"}} ._map=\${{value:"$count"}} class="flex flex-col bg-blue-100 p-4 rounded-lg text-center"></uix-stat>
                      <uix-stat label="Total Streaks" value="5" class="flex flex-col bg-blue-100 p-4 rounded-lg text-center"></uix-stat>
                      <uix-stat label="Longest Streaks" value="5" class="flex flex-col bg-blue-100 p-4 rounded-lg text-center"></uix-stat>
                    </uix-list>
                  </uix-card>
                </div>
      <app-button></app-button>      
    \`}})});
`,metaType:"application/javascript"},"/modules/mvc/controller/frontend.js":{content:'import u from"/bootstrap.js";import y from"/modules/mvc/controller/adapter-storage.js";import m from"/modules/mvc/controller/adapter-url.js";import j from"/modules/mvc/controller/backend/frontend.js";import h from"/modules/mvc/view/frontend.js";const b={...y,...m,backend:j},p=e=>{if(typeof e=="string"&&e.includes(".")){const[r,t]=e.split(".",2);return{storeKey:r,path:t}}return{storeKey:e,path:null}},g=(e,r)=>{const t=typeof e=="function"?e:(s,n)=>n!==void 0?t.set(s,n):t.get(s);u.events.install(t);const i=(s,n)=>{d[r]?.emit(s,n)};return t.get=s=>{const{storeKey:n,path:c}=p(s),o=e.get(n);return c&&typeof o=="object"&&o!==null?o[c]:o},t.set=(s,n)=>{const{storeKey:c,path:o}=p(s);if(o){const l={...e.get(c)||{},[o]:n};return e.set(c,l),i(c,l),l}return e.set(c,n),i(c,n),n},t.remove=s=>{const{storeKey:n,path:c}=p(s);if(c){const o=e.get(n);return typeof o=="object"&&o!==null&&(delete o[c],e.set(n,o),i(n,o)),{key:n}}return e.remove(n),i(n,void 0),{key:n}},t.has=e.has,t.keys=e.keys,t.entries=e.entries,a.set(r,t),t},a=new Map,d=new Proxy({},{get(e,r){if(r in e)return e[r];if(a.has(r))return a.get(r);if(r in b)return g(b[r],r);if(u.mv3Connections?.includes(r))return(t,i={})=>(a.get("backend")||g(b.backend,"backend"))(t,i,r)}}),O=()=>{const e=r=>{const t=d[r],i=new Map(t.entries()),s=new Set(t.listeners.keys());i.forEach((n,c)=>{t.emit(c,n),s.delete(c)}),s.forEach(n=>t.emit(n,void 0))};window.addEventListener("popstate",()=>{e("querystring"),e("hash")})};u.hooks.add("init",O);const _=(e,r,t)=>{if(r.scope){if(r.scope.includes(".")){const[i,s]=r.scope.split(".");if(t[i]?.[s])return`${t[i]?.[s]}:${e}`}if(t[r.scope])return`${t[r.scope]}:${e}`}return e};h.plugins.push({event:"connectedCallback",test:({component:e})=>!!e.properties,fn:({instance:e,component:r})=>{r.properties&&Object.entries(r.properties).filter(([,t])=>t.sync).forEach(([t,i])=>{const s=d[i.sync];if(!s)return;const n=_(t,i,e),c=s.get(n),o=f=>{e.state[t]=f,e.requestUpdate()};e._listeners||(e._listeners={}),e._listeners[i.sync]||(e._listeners[i.sync]={}),e._listeners[i.sync][n]=o,Object.getOwnPropertyDescriptor(e,t)||Object.defineProperty(e,t,{get:()=>e.state[t],set:f=>{e.state[t]!==f&&(e.state[t]=f,f!==s.get(n)&&s.set(n,f))}}),s.on(n,o),o(c??i.defaultValue)})}}),h.plugins.push({event:"disconnectedCallback",test:({component:e})=>!!e._listeners,fn:({instance:e})=>{e._listeners&&Object.entries(e._listeners).forEach(([r,t])=>{const i=d[r];i&&Object.entries(t).forEach(([s,n])=>i.off(s,n))})}});export default d;\n',metaType:"application/javascript"},"/modules/mvc/controller/adapter-storage.js":{content:`const o=e=>typeof e=="object"&&e!==null||Array.isArray(e)?JSON.stringify(e):e,c=e=>{try{return JSON.parse(e)}catch{return e}},u=e=>t=>{const n=e.getItem(t);return n!==null?c(n):null},i=e=>(t,n)=>(e.setItem(t,o(n)),{key:t}),a=e=>t=>(e.removeItem(t),{key:t}),l=e=>()=>Object.keys(e),m=e=>t=>e.getItem(t)!==null&&e.getItem(t)!==void 0,s=e=>({has:m(e),set:i(e),remove:a(e),get:u(e),keys:l(e)}),r=new Map,d={has:e=>r.has(e),get:e=>r.get(e),set:(e,t)=>(r.set(e,t),{key:e}),remove:e=>(r.delete(e),{key:e}),keys:()=>r.keys()},g=s(window.localStorage),S=s(window.sessionStorage);export default{local:g,ram:d,session:S};
`,metaType:"application/javascript"},"/modules/mvc/controller/adapter-url.js":{content:'const r=()=>{const a=window.location.hash.substring(1);return new URLSearchParams(a)},n=a=>{const s=a.toString();window.location.hash=s},e={get:a=>r().get(a),has:a=>r().has(a),set:(a,s)=>{const t=r();return t.set(a,s),n(t),window.dispatchEvent(new Event("popstate")),{key:a}},remove:a=>{const s=r();return s.delete(a),n(s),{key:a}},keys:()=>[...r().keys()],entries:()=>[...r().entries()]},o={get(a){return new URLSearchParams(window.location.search).get(a)},set(a,s){const t=new URLSearchParams(window.location.search);return t.set(a,s),window.history?.pushState?.({},"",`${window.location.pathname}?${t}`),window.dispatchEvent(new Event("popstate")),{key:a}},remove(a){const s=new URLSearchParams(window.location.search);return s.delete(a),window.history.pushState?.({},"",`${window.location.pathname}?${s}`),{key:a}},keys(){return[...new URLSearchParams(window.location.search).keys()]},has(a){return new URLSearchParams(window.location.search).has(a)},entries:()=>[...new URLSearchParams(window.location.search).entries()]};export default{querystring:o,hash:e};\n',metaType:"application/javascript"},"/modules/mvc/controller/backend/frontend.js":{content:'import d from"/bootstrap.js";import $ from"/modules/blocks/index.js";import i from"/modules/mvc/model/frontend.js";import m from"/modules/mvc/view/frontend.js";import"/modules/mvc/view/loader/index.js";let S,h,A;const y={},_={},j=async(e={})=>{const{data:t}=e,{eventId:r,type:o,payload:s,connection:n}=t,a=d.events[o];let l=s;const u=r&&(f=>h.postMessage({eventId:r,payload:f,connection:n}));if(a&&(l=await a({respond:u,payload:s,eventId:r})),r&&y[r]){try{y[t.eventId].resolve(l)}catch(f){y[t.eventId].reject(new Error(f))}finally{delete y[r]}return}if(u)return u(l)},L=async(e={})=>{const{data:t}=e,{eventId:r,type:o,payload:s}=t;if(console.log({eventId:r,type:o,payload:s}),r&&_[r]){try{_[r].resolve(s)}catch(a){_[r].reject(new Error(a))}finally{delete _[r]}return}const n=d.swEvents[o];n&&await n({payload:s})},O=async()=>{S=new Worker(`/worker.js?project=${encodeURIComponent(JSON.stringify(d.settings))}`,{type:"module"});const e=new MessageChannel;h=e.port1,h.onmessage=j,S.postMessage({type:"INIT_PORT"},[e.port2]);const{user:t,device:r,app:o}=await I("INIT_APP");d.models.set(o.models),d.events.emit("INIT_APP",{user:t,device:r,app:o}),d.about={user:t,device:r,app:o},await navigator.storage.persist();const s=new MessageChannel;A=s.port1,A.onmessage=L;const n=()=>{navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"INIT_PORT"},[s.port2])};n(),navigator.serviceWorker.addEventListener("controllerchange",n)},M=(e,t,r)=>{if(!e){setTimeout(()=>r(t),100);return}e.postMessage(t)},k=e=>M(A,e,k),P=e=>M(h,e,P),R=(e,t={})=>{const r=Date.now().toString()+Math.random().toString(36).substr(2,9);return new Promise((o,s)=>{_[r]={resolve:o,reject:s},k({type:e,payload:t,eventId:r})})};d.addModule({name:"SW",base:{postMessage:k,request:R}});const I=(e,t={},r=null)=>{const o=Date.now().toString()+Math.random().toString(36).substr(2,9),s={type:e,payload:t,eventId:o};return new Promise((n,a)=>{r&&(s.connection=r),y[o]={resolve:n,reject:a},P(s)})};d.hooks.add("init",O);const T=({instance:e})=>{const{id:t,model:r,limit:o,offset:s=0,includes:n,recursive:a,order:l,filter:u}=e._data,f=e._data.method??t?"get":"getMany",g={limit:o,offset:s,order:l,recursive:a};u&&Object.keys(u).length>0&&(g.filter=c.resolveObject(u,e)),n&&(g.includes=Array.isArray(n)?n:n.split(","));const D=w=>{f.toLowerCase()==="get"?e._row=w:(e._rows=w.items??w,w.count&&(e._data.count=w.count)),e.requestUpdate(),e.emit("dataLoaded",{instance:e,component:e.constructor})};f.toLowerCase()==="get"?i[r].get(t,g).then(D):i[r].getAll(g).then(D)},v=({value:e,...t})=>{const[,...r]=e.split(":");return r.map(o=>c.resolveValue({...t,value:o}))},b={$find:e=>{const[t,r]=v(e);if(!Array.isArray(t)||!r)return;let[o,s]=r.split("=");if(s=c.resolveValue({...e,value:s}),!(!o||s===void 0))return t.find(n=>String(n[o])===String(s))},$boolean:e=>{const[t]=v(e);return!!c.resolveValue({...e,value:t})},$filter:e=>{const[t,r]=v(e);if(!Array.isArray(t)||!r)return[];const[o,s]=r.split("=");return!o||s===void 0?[]:t.filter(n=>String(n[o])===String(s))},$includes:e=>{const[t,r]=v(e);if(!Array.isArray(t)||!r)return!1;const[o,s]=r.split("=");return!o||s===void 0?!1:t.some(n=>String(n[o])===String(s))},$map:e=>{const t=o=>{const[s,n]=v(o);return!Array.isArray(s)||!n?[]:s.map(a=>a[n])};return t({...e,willUpdate:({instance:o,prop:s})=>()=>{o[s]=t(e),o.requestUpdate()}})},$count:({instance:e})=>e?._rows?.count??e?._rows?.length,$now:()=>Date.now(),$data:e=>{const{value:t,prop:r,instance:o}=e,[,s]=t.split(":");if(!p.data[s])return;const n=p.data[s],a=o._data||o.closest("[_data]")?._data||{},l=n({...a,instance:o});return r.startsWith("on")&&(o[r]=l),l},$closest:({value:e,instance:t})=>{const[r,o]=e.slice(9).split("."),s=t.closest(r);return s[o].bind(s)},$query:e=>{const{value:t}=e;if(t.startsWith("@parent"))return b.$parent(e);if(t.startsWith("@"))return b.$row(e)},$row:({value:e,instance:t})=>{const r=t.closest("[_row]"),o=t._row??r?._row??{};return e==="@"?o:o[e.slice(1)]},$parent:({value:e,instance:t,prop:r,willUpdate:o})=>{const[,s]=e.split("."),n=t.parentElement.closest("[_row]");if(!n&&!t._parentListener)return;t._parentListener||(t._parentListener=n,o&&n.on("willUpdate",o({prop:r,instance:t})));const a=t._parentListener._row||{};return s?a[s]:a},$today:()=>new Date().toISOString().split("T")[0],$todayLocale:()=>new Intl.DateTimeFormat(void 0,{dateStyle:"short"}).format(new Date),$currentTime:()=>new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date),$currentDay:()=>new Date().getDate(),$currentMonth:()=>new Date().getMonth()+1,$currentYear:()=>new Date().getFullYear(),$currentHour:()=>new Date().getHours(),$timeAgo:({value:e})=>{if(!e)return"";const t=new Intl.RelativeTimeFormat(void 0,{numeric:"auto"}),r=(new Date(e).getTime()-Date.now())/1e3,o={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60};for(const s in o){const n=r/o[s];if(Math.abs(n)>1)return t.format(Math.round(n),s)}return t.format(r,"second")}},c={operators:{$eq:(e,t)=>e===t,$neq:(e,t)=>e!==t,$exists:e=>e!=null,$nexists:e=>e==null,$gt:(e,t)=>Number(e)>Number(t),$inc:(e,t)=>{if(!Array.isArray(e))return!1;const[r,o]=Object.entries(t)[0];return e.some(s=>s&&s[r]===o)},$ninc:(e,t)=>{if(!Array.isArray(e))return!0;const[r,o]=Object.entries(t)[0];return!e.some(s=>s&&s[r]===o)}},resolveObject(e,t){return Object.fromEntries(Object.entries(e).map(([r,o])=>[r,c.resolveValue({prop:r,value:o,instance:t})]))},resolveValue(e){const{value:t}=e;if(typeof t=="object"&&t.tag){const r={...t,properties:{...t.properties||{}}};return t.function?(o={})=>(r.properties={...r.properties,...o},$.render({block:r})):$.render({block:r})}if(typeof t!="string")return t;if(t.startsWith("@"))return b.$query(e);if(t.startsWith("$")){const[r]=t.split(":");return b[r]?.(e)}return t},resolveParams(e,t){if(typeof e!="object"||e===null)return this.resolveValue({...t,value:e});const r={};for(const o in e)r[o]=this.resolveValue({...t,value:e[o]});return r},evaluate(e,t){for(const r in e){const o=e[r],s=this.resolveValue({...t,value:r});for(const n in o){if(!this.operators[n])continue;const a=o[n],l=this.resolveParams(a,t);if(!this.operators[n](s,l))return!1}}return!0}},p={data:{_prepareRow(e,t){const r=d.models[e];if(!r)return;t._row||(t._row={}),t.qa(".uix-input").forEach(s=>t._row[s.name]=s.inputValue());const o={...t._row};return Object.keys(o).forEach(s=>{s!=="id"&&r[s]===void 0&&delete o[s]}),o},render(){const{model:e,tag:t,blocks:r,properties:o={}}=this._data,s=this._rows??(this._row?[this._row]:null);if(s)return s.map(n=>$.render({row:n,block:{tag:t,blocks:r,properties:{class:this._data.class,_data:{model:e,id:n.id},_row:n,...o}}}))},remove:({model:e,id:t,instance:r})=>()=>t?i[e].remove(t):i[e].removeAll(p.data._prepareRow(e,r)),add:({model:e,instance:t})=>async()=>{const r=p.data._prepareRow(e,t);if(!r)return;const o=await i[e].add(r);o?.id&&(t._row.id=o.id)},edit:({model:e,instance:t})=>async()=>{const r=p.data._prepareRow(e,t);r?.id&&await i[e].edit(r)},upsert:({model:e,instance:t})=>async()=>{const r=p.data._prepareRow(e,t);if(r)if(r.id)await i[e].edit(r);else{const o=await i[e].add(r);o?.id&&(t._row.id=o.id)}}}};m.plugins.push({event:"connectedCallback",test:({instance:e})=>!!e._data?.displayIf,fn:({instance:e})=>{const{displayIf:t}=e._data,r=()=>e.classList.toggle("hide",!c.evaluate(t,o)),o={instance:e,row:e._row,listener:r};r(),e.on("dataLoaded",r)}});const W=({instance:e})=>{for(const[t,r]of Object.entries(e._map)){if(!t||!r)continue;const o=c.resolveValue({value:r,instance:e,prop:t});e.state[t]=o;const s=e.constructor.properties[t];s?.attribute&&t!=="_row"&&e.updateAttribute({key:t,value:o,type:s.type,skipPropUpdate:!0}),e.state._row||(e.state._row={}),e.state._row[t]=o}};m.plugins.push({event:"connectedCallback",test:({instance:e})=>e?._data?.model&&!["add","edit","remove"].includes(e?._data?.method),fn:({instance:e})=>{e._listeners={},e._data.tag&&e.on("dataLoaded",()=>{e._updatedRender||(e.render=p.data.render.bind(e),e._updatedRender=!0),e.requestUpdate()});const{model:t,id:r}=e._data,o=e._row;o&&!r&&(e._data.id=o.id),(o&&!r||e._rows)&&e.emit("dataLoaded",{instance:e,component:e.constructor});const s=i[t]?.rows;if(s){if(r){const n=`get:${r}`;o!==void 0&&s[r]===void 0&&(s[r]=o),e._listeners[n]=()=>{e._row=s[r],e.requestUpdate()},i[t].on(n,e._listeners[n])}else e._listeners.any=()=>T({instance:e}),i[t].onAny(e._listeners.any);!e._row&&!e._rows&&T({instance:e}),e.syncable=!0}}}),m.plugins.push({event:"connectedCallback",test:({instance:e})=>!!e._map,fn:({instance:e})=>{const t=e.parentElement.closest("[_data]");t&&t.on("dataLoaded",()=>{W({instance:e}),e.requestUpdate()})}}),m.plugins.push({event:"willUpdate",test:({instance:e})=>!!e._map,fn(){W({instance:this})}}),m.plugins.push({event:"disconnectedCallback",test:({instance:e})=>e.syncable,fn:({instance:e})=>{Object.entries(e._listeners).forEach(([t,r])=>{t==="any"?i[e._data.model].offAny(r):i[e._data.model].off(t,r)})}}),d.events.set({BROADCAST:e=>{},UPDATE_MODELS:({payload:{models:e}})=>d.models.set(e),REQUEST_DATA_SYNC:({payload:{model:e,key:t,data:r}})=>{console.log({key:t,model:e,data:r}),i[e].emit(t,r)}});export default I;\n',metaType:"application/javascript"},"/modules/blocks/index.js":{content:'import{keyed as b}from"/modules/mvc/view/html/directive.js";import h from"/modules/mvc/view/html/index.js";import g from"/modules/mvc/view/html/spread.js";const{unsafeStatic:l,staticHTML:y}=h;function N(r){const e=new DOMParser().parseFromString(r,"text/html");function i(t){return t===""||t.toLowerCase()==="true"?!0:t.toLowerCase()==="false"?!1:t.trim()!==""&&!Number.isNaN(Number(t))?Number(t):t}function a(t){const o={};for(const n of t.attributes)o[n.name]=i(n.value);return{tag:t.tagName.toLowerCase(),properties:o,blocks:Array.from(t.children).map(a)}}return Array.from(e.body.children).map(a)}function m({block:r,row:c,filter:e,keyed:i=!0}){if(!r||!r.tag)return"";const{tag:a,properties:t={},value:o,topBlock:f,bottomBlock:n}=r;let s=r.blocks||[];const p=a;f&&s.unshift(f),n&&s.push(n),e&&(s=s.filter(e));const d=s?.length?s.map(k=>m({block:k,filter:e,keyed:!1})):o?.tag?m({block:o,filter:e,keyed:!1}):o??"",u=y`<${l(p)}  ${g(t)}>${d}</${l(p)}>`;return c?.id&&i===!0?b(c.id,u):u}const L={render:m,parse:N};export default L;\n',metaType:"application/javascript"},"/modules/mvc/model/frontend.js":{content:`import m from"/modules/mvc/controller/backend/frontend.js";import e from"/modules/mvc/model/index.js";const d=(r,o,t={})=>m(r,{model:o,...t});e.request=d;export default e;
`,metaType:"application/javascript"},"/modules/mvc/view/loader/index.js":{content:'import s from"/bootstrap.js";import O from"/modules/mvc/view/frontend.js";import k from"/modules/theme/index.js";const w=`${s.settings.basePath}/modules`,$=new Map,u=new Map,h=new Map,S=e=>{if(s.components?.[e]?.path)return s.components[e].path;const t=e.split("-"),o=t[0],n=s.modules[o],r=t.slice(1).join("-");return n?[w,n.path??o,r].join("/"):[s.settings.basePath,e].join("/")},M=e=>{const t=S(e);return s.fs.import(`${t}.js`,{tag:e})};async function D(e,t){const{properties:o={},icons:n,formAssociated:r=!1,css:d,style:b=!1,extends:f,types:E,connectedCallback:g,disconnectedCallback:A,willUpdate:L,firstUpdated:j,updated:v,class:P,...T}=t,N=f?await y(f):O,i=class extends N{static icons=n;static css=d;static formAssociated=r;constructor(){super(),P&&this.classList.add(...P.split(" "))}static properties=(()=>{const m=super.properties||{},l=super.theme||{},c={...m};for(const a of Object.keys(o)){const p=o[a];p.type==="object"&&p.properties&&(p.properties=c[a]?.properties?{...c[a]?.properties,...p.properties}:p.properties),c[a]=c[a]?{...c[a],...p}:{...p},p.theme&&(l[a]=c[a].theme)}return E&&(l.types=E),super.theme=l,c.attribute=c.attribute===!1,c})()};return Object.assign(i.prototype,T),i.tag=e,i._attrs=Object.fromEntries(Object.keys(i.properties).map(m=>[m.toLowerCase(),m])),i.plugins=[...i.plugins],Object.entries({connectedCallback:g,disconnectedCallback:A,willUpdate:L,firstUpdated:j,updated:v}).map(([m,l])=>l&&i.plugins.push({event:m,fn:l})),(!customElements.get(e)||s.settings.preview)&&customElements.define(e,i),(b||d)&&k.loadStyle(i),u.set(e,i),i}async function y(e){if(e=e.toLowerCase(),customElements.get(e))return u.has(e)||u.set(e,customElements.get(e)),u.get(e);if(u.has(e))return u.get(e);if(h.has(e))return h.get(e);const t=(async()=>{try{let o=$.get(e);if(!o){const n=await M(e);$.set(e,n),o=n.default}return o?await D(e,o):console.warn(`[Loader] Definition for ${e} not found after loading. The component\'s JS file might be missing a call to $APP.components.define(\'${e}\', ...).`)}catch(o){return console.error(`[Loader] Failed to define component ${e}:`,o),null}})();return h.set(e,t),t}const C=(...e)=>{if(typeof e[0]=="string"){const t=e[0].toLowerCase(),o=e[1];s.hooks.run("componentAdded",{tag:t,component:o}),s.settings.dev||y(t).catch(n=>console.error(`[Loader] Error during preview definition for ${t}:`,n))}else typeof e[0]=="object"&&e[0]!==null&&Object.entries(e[0]).forEach(([t,o])=>{C(t,o)})},_=async(e=document.body)=>{if(!e||typeof e.querySelectorAll!="function")return;const t=e.querySelectorAll(":not(:defined)"),o=new Set;t.forEach(n=>{const r=n.tagName.toLowerCase();r.includes("-")&&o.add(r)});for(const n of o)y(n)},q=()=>{new MutationObserver(async t=>{const o=new Set;for(const n of t)n.type==="childList"&&n.addedNodes.length>0&&n.addedNodes.forEach(r=>{if(r.nodeType===Node.ELEMENT_NODE){const d=r.tagName.toLowerCase();d.includes("-")&&!customElements.get(d)&&!h.has(d)&&o.add(d),typeof r.querySelectorAll=="function"&&r.querySelectorAll(":not(:defined)").forEach(b=>{const f=b.tagName.toLowerCase();f.includes("-")&&!customElements.get(f)&&!h.has(f)&&o.add(f)})}});for(const n of o)y(n)}).observe(document.body,{childList:!0,subtree:!0})},x=()=>{s.events.on("INIT_APP",()=>{_(document.body),q()})};s.settings.dev&&s.hooks.add("init",x),s.hooks.set({componentAdded({tag:e,component:t}){$.set(e,t),s.components[e]||(s.components[e]={}),s.components[e].definition=t},moduleAdded({module:e}){e.components&&Object.entries(e.components).forEach(([t,o])=>{if(Array.isArray(o))o.forEach(n=>{const r=`${e.name}-${n}`;s.components[r]||(s.components[r]={}),s.components[r].path=`${w}/${e.name}/${t}/${n}`});else{const n=`${e.name}-${t}`;s.components[n]||(s.components[n]={}),s.components[n].path=`${w}/${e.name}/${t}`}})}});const U={GET_TAG_PROPS:async({payload:e}={})=>{if(!e.tag)return;const t=await y(e.tag);return t||console.warn(`Component ${e.tag} not found. Did you forget to define it?`),t?s.Backend.sanitize(t?.properties):void 0}};s.events.set(U),s.define=C;export default{define:C};\n',metaType:"application/javascript"},"/modules/mvc/view/html/directive.js":{content:'export const directive=r=>(...e)=>({_$litDirective$:r,values:e});export class Directive{__part;__attributeIndex;__directive;_$parent;_$disconnectableChildren;_$notifyDirectiveConnectionChanged;constructor(e){}get _$isConnected(){return this._$parent._$isConnected}_$initialize(e,t,n){this.__part=e,this._$parent=t,this.__attributeIndex=n}_$resolve(e,t){return this.update(e,t)}render(...e){throw new Error("The `render()` method must be implemented.")}update(e,t){return this.render(...t)}}const i={},o=(r,e=i)=>r._$committedValue=e,s=Symbol.for("lit-nothing");class _ extends Directive{key=s;render(e,t){return this.key=e,t}update(e,[t,n]){return t!==this.key&&(o(e),this.key=t),n}}export const keyed=directive(_);\n',metaType:"application/javascript"},"/modules/mvc/view/html/spread.js":{content:'import{Directive as l,directive as p}from"/modules/mvc/view/html/directive.js";const o=(u,s)=>{const t={};for(const e in u)t[s+e]=u[e];return t},b=({properties:u,events:s,attributes:t,booleanAttributes:e})=>(u??={},{...t,...o(u??{},"."),...o(s??{},"@"),...o(e??{},"?")});class f extends l{element;host;previousValue;render(s,t){}isEqual(s,t){return Object.is(s,t)}update(s,[t]){this.element??=s.element,this.element===void 0&&(this.element=s.parentNode),this.host??=s.options?.host,Array.isArray(t)&&(t=t.reduce((i,r,h)=>(Object.entries(r).forEach(([n,d])=>{h===1?n=`@${n}`:h===2&&(n=`?${n}`),i[n]=d}),i),{}));const{previousValue:e}=this;this.isEqual(t,e)||(this.previousValue=t,Object.entries(t).forEach(([i,r])=>{if(!this.isEqual(e?.[i],r)){const[,h,n]=i.match(/([.?@])?(.*)/);this.updateItem(h,n,r)}}),e!=null&&Object.entries(e).forEach(([i])=>{if(!(i in t)){const[,r,h]=i.match(/([.?@])?(.*)/);this.updateItem(r,h,void 0,!0)}}))}updateItem(s,t,e,i=!1){switch(s){case".":return!i&&this.updateProperty(t,e);case"@":return this.updateEvent(t,e);case"?":return this.updateAttribute(t,e,!0);default:return typeof e=="object"&&e!==null?t==="class"?this.updateClass(e):t==="style"?this.updateStyle(e):this.updateAttribute(t,JSON.stringify(e)):t in this.element?this.updateProperty(t,e):this.updateAttribute(t,e)}}listeners=new Map;updateEvent(s,t){const e=typeof t=="function"?r=>t.call(this.host??this.element,r):null;let i=this.listeners.get(s);if(e===null){i&&(this.listeners.delete(s),this.element.removeEventListener(s,i));return}i===void 0?(this.listeners.set(s,i={handleEvent:e}),this.element.addEventListener(s,i)):i.handleEvent=e}updateClass(s){this.updateAttribute("class",Object.entries(s).filter(([t,e])=>e).map(([t])=>t).join(" "))}updateStyle(s){this.updateAttribute("style",Object.entries(s).map(([t,e])=>`${t}: ${e}`).join("; "))}updateAttribute(s,t,e=!1){typeof t=="boolean"&&(t=t?"":null),t==null||e&&!t?this.element.removeAttribute(s):this.element.setAttribute(s,e?"":t)}updateProperty(s,t){this.element[s]=t}}const c=p(f);export default c;\n',metaType:"application/javascript"},"/modules/theme/index.js":{content:'import o from"/bootstrap.js";const c=new Map,i=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),x=(t,e)=>e>=0?`color-mix(in hsl, white ${e}%, ${t})`:`color-mix(in hsl, ${t}, black ${Math.abs(e)}%)`,d={0:100,1:98,5:90,10:80,20:60,30:40,40:20,50:0,60:-20,70:-30,80:-40,90:-55,95:-65,99:-80,100:-100},f=t=>Object.entries(t).flatMap(([e,s])=>[`--color-${e}: ${s};`,...Object.entries(d).map(([n,a])=>`--color-${e}-${n}: ${x(`var(--color-${e})`,a)};`)]).join(`\n`),m=(t,e="--")=>Object.entries(t).flatMap(([s,n])=>s==="colors"?[]:typeof n=="object"&&n!==null?m(n,`${e}${i(s)}-`):`${e}${i(s)}: ${n};`).join(`\n`),u=(t,{colors:e,...s})=>{`${f(e)}\n${m(s)}`.split(`\n`).filter(Boolean).forEach(a=>{const[r,l]=a.trim().split(": ");t.style.setProperty(r,l.slice(0,-1))})},p=document.querySelector("#compstyles")||(()=>{const e=document.createElement("style");return e.id="compstyles",document.head.appendChild(e),e})();async function $(t){const{tag:e,css:s}=t;s&&(c.has(e)||(c.set(e,""),s&&(p.textContent+=`.${e} { ${s} }`)))}const h=(t,e)=>{const s=o.theme.sizes[t]||t;if(typeof s=="number")return e?`calc(${s}px * ${e})`:`${s}px`;if(typeof s=="string"&&s.includes("/")){const[n,a]=s.split("/"),r=`${(Number.parseFloat(n)/Number.parseFloat(a)*100).toFixed(3)}%`;return e?`calc(${r} * ${e})`:r}return s},g=(t,{base:e=o.theme.text.base,ratio:s=o.theme.text.ratio}={})=>{const n=o.theme.text.sizes.indexOf("md"),r=o.theme.text.sizes.indexOf(t)-n;return`${(r<0?e/s**Math.abs(r):e*s**r).toFixed(2)}rem`},y={loadStyle:$,getSize:h,getTextSize:g};o.hooks.set({init:()=>{u(document.documentElement,o.theme)},moduleAdded({module:t}){t.theme&&(o.theme[t.name]=t.theme)}}),o.theme.set({colors:{default:"darkgray",primary:"#00a7f1",secondary:"#007400",tertiary:"#00998d",success:"#49f09c",warning:"#fc8700",error:"#ff0040",surface:"darkgray",red:"#F44336",pink:"#E91E63",purple:"#9C27B0",blue:"#2196F3",cyan:"#00BCD4",green:"#4CAF50",yellow:"#FFEB3B",orange:"#FF9800",brown:"#795548",gray:"#9E9E9E",black:"#000000",white:"#FFFFFF"},font:{family:"\'Roboto\', -apple-system, BlinkMacSystemFont, \'Segoe UI\', \'Helvetica Neue\', Arial, sans-serif",iconFamily:"lucide",icon:{family:"lucide"}},background:{color:"var(--color-primary-10)"},button:{shade:60,border:{shade:90}},text:{color:"var(--color-surface-100)",sizes:["2xs","xs","sm","md","lg","xl","2xl","xl","2xl","3xl","4xl"],base:1,ratio:1.2},border:{radius:"md",size:"1px",style:"solid",color:"var(--color-default-70)"},radius:{xs:"2px",sm:"4px",md:"8px",lg:"12px",xl:"16px","2xl":"24px",full:"100%"},spacing:{none:"0",xs:"0.25rem",sm:"0.5rem",md:"1rem",lg:"1.5rem",xl:"2rem","2xl":"2.5rem","3xl":"3rem","4xl":"4rem"},sizes:{"3xs":50,"2xs":80,xs:120,sm:200,md:320,lg:480,xl:768,"2xl":1024,"3xl":1280,"4xl":1536,min:"min-content",max:"max-content",fit:"fit-content","fit-content":"fit-content",screen:"100vh",full:"100%",auto:"auto"}});export default y;\n',metaType:"application/javascript"},"/modules/icon-lucide/index.js":{content:`import o from"/bootstrap.js";o.addModule({name:"icon-lucide",icon:!0});
`,metaType:"application/javascript"},"/modules/font/manrope/index.js":{content:`import e from"/bootstrap.js";e.addModule({name:"manrope",font:{name:"Manrope",type:"woff2",variants:["extralight","light","medium","regular","semibold","bold","extrabold"]}});
`,metaType:"application/javascript"},"/modules/uix/index.js":{content:`import a from"/bootstrap.js";a.addModule({name:"uix",frontend:!0,components:{form:["form","form-control","input","select","textarea","time","rating","join","file-upload","number-input","switch","slider"],navigation:["navbar","breadcrumbs","menu","sidebar","pagination","tabs","tabbed"],overlay:["overlay","modal","drawer","tooltip","popover","alert-dialog","toast"],display:["link","button","avatar","badge","card","circle","image","logo","media","table","table-row","icon","calendar","calendar-day","tag","stat","chart","content"],layout:["list","accordion","row","container","divider","section","page","flex","stack","spacer"],feedback:["spinner","progress-bar","circular-progress","skeleton"],utility:["draggable","droparea","clipboard","theme-toggle","dark-mode-switch"]}});
`,metaType:"application/javascript"},"/modules/uix/frontend.js":{content:'import e from"/bootstrap.js";import t from"/modules/mvc/view/html/index.js";const m={"/theme":{component:()=>t`<theme-ui></theme-ui>`,title:"Theme",template:"uix-template"}};e.routes.set(m);\n',metaType:"application/javascript"},"/modules/apps/bundler/index.js":{content:`import e from"/bootstrap.js";e.addModule({name:"bundler",path:"apps/bundler",base:[],dev:!0,frontend:!0});
`,metaType:"application/javascript"},"/modules/apps/bundler/frontend.js":{content:"export default {}"},"/modules/integrations/github.js":{content:"export default {}"},"/npm/esbuild-wasm@0.21.5/lib/browser.min.js":{content:'(xe=>{"use strict";var Ee=Object.defineProperty,Le=Object.getOwnPropertyDescriptor,We=Object.getOwnPropertyNames,qe=Object.prototype.hasOwnProperty,Be=(t,n)=>{for(var r in n)Ee(t,r,{get:n[r],enumerable:!0})},Ge=(t,n,r,u)=>{if(n&&typeof n=="object"||typeof n=="function")for(let d of We(n))!qe.call(t,d)&&d!==r&&Ee(t,d,{get:()=>n[d],enumerable:!(u=Le(n,d))||u.enumerable});return t},Ye=t=>Ge(Ee({},"__esModule",{value:!0}),t),ne=(t,n,r)=>new Promise((u,d)=>{var y=c=>{try{_(r.next(c))}catch(k){d(k)}},m=c=>{try{_(r.throw(c))}catch(k){d(k)}},_=c=>c.done?u(c.value):Promise.resolve(c.value).then(y,m);_((r=r.apply(t,n)).next())}),me={};Be(me,{analyzeMetafile:()=>ht,analyzeMetafileSync:()=>pt,build:()=>lt,buildSync:()=>ft,context:()=>at,default:()=>bt,formatMessages:()=>ct,formatMessagesSync:()=>dt,initialize:()=>wt,stop:()=>gt,transform:()=>ut,transformSync:()=>mt,version:()=>ot}),xe.exports=Ye(me);function $e(t){let n=u=>{if(u===null)r.write8(0);else if(typeof u=="boolean")r.write8(1),r.write8(+u);else if(typeof u=="number")r.write8(2),r.write32(u|0);else if(typeof u=="string")r.write8(3),r.write(H(u));else if(u instanceof Uint8Array)r.write8(4),r.write(u);else if(u instanceof Array){r.write8(5),r.write32(u.length);for(let d of u)n(d)}else{let d=Object.keys(u);r.write8(6),r.write32(d.length);for(let y of d)r.write(H(y)),n(u[y])}},r=new ke;return r.write32(0),r.write32(t.id<<1|+!t.isRequest),n(t.value),Te(r.buf,r.len-4,0),r.buf.subarray(0,r.len)}function ze(t){let n=()=>{switch(r.read8()){case 0:return null;case 1:return!!r.read8();case 2:return r.read32();case 3:return le(r.read());case 4:return r.read();case 5:{let m=r.read32(),_=[];for(let c=0;c<m;c++)_.push(n());return _}case 6:{let m=r.read32(),_={};for(let c=0;c<m;c++)_[le(r.read())]=n();return _}default:throw new Error("Invalid packet")}},r=new ke(t),u=r.read32(),d=(u&1)===0;u>>>=1;let y=n();if(r.ptr!==t.length)throw new Error("Invalid packet");return{id:u,isRequest:d,value:y}}var ke=class{constructor(t=new Uint8Array(1024)){this.buf=t,this.len=0,this.ptr=0}_write(t){if(this.len+t>this.buf.length){let n=new Uint8Array((this.len+t)*2);n.set(this.buf),this.buf=n}return this.len+=t,this.len-t}write8(t){let n=this._write(1);this.buf[n]=t}write32(t){let n=this._write(4);Te(this.buf,t,n)}write(t){let n=this._write(4+t.length);Te(this.buf,t.length,n),this.buf.set(t,n+4)}_read(t){if(this.ptr+t>this.buf.length)throw new Error("Invalid packet");return this.ptr+=t,this.ptr-t}read8(){return this.buf[this._read(1)]}read32(){return je(this.buf,this._read(4))}read(){let t=this.read32(),n=new Uint8Array(t),r=this._read(n.length);return n.set(this.buf.subarray(r,r+t)),n}},H,le,_e;if(typeof TextEncoder<"u"&&typeof TextDecoder<"u"){let t=new TextEncoder,n=new TextDecoder;H=r=>t.encode(r),le=r=>n.decode(r),_e=\'new TextEncoder().encode("")\'}else if(typeof Buffer<"u")H=t=>Buffer.from(t),le=t=>{let{buffer:n,byteOffset:r,byteLength:u}=t;return Buffer.from(n,r,u).toString()},_e=\'Buffer.from("")\';else throw new Error("No UTF-8 codec found");if(!(H("")instanceof Uint8Array))throw new Error(`Invariant violation: "${_e} instanceof Uint8Array" is incorrectly false\n\nThis indicates that your JavaScript environment is broken. You cannot use\nesbuild in this environment because esbuild relies on this invariant. This\nis not a problem with esbuild. You need to fix your environment instead.\n`);function je(t,n){return t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24}function Te(t,n,r){t[r++]=n,t[r++]=n>>8,t[r++]=n>>16,t[r++]=n>>24}var z=JSON.stringify,Se="warning",Ae="silent";function Ue(t){if(X(t,"target"),t.indexOf(",")>=0)throw new Error(`Invalid target: ${t}`);return t}var de=()=>null,B=t=>typeof t=="boolean"?null:"a boolean",$=t=>typeof t=="string"?null:"a string",pe=t=>t instanceof RegExp?null:"a RegExp object",re=t=>typeof t=="number"&&t===(t|0)?null:"an integer",Re=t=>typeof t=="function"?null:"a function",Y=t=>Array.isArray(t)?null:"an array",Q=t=>typeof t=="object"&&t!==null&&!Array.isArray(t)?null:"an object",Ve=t=>typeof t=="object"&&t!==null?null:"an array or an object",Je=t=>t instanceof WebAssembly.Module?null:"a WebAssembly.Module",Ce=t=>typeof t=="object"&&!Array.isArray(t)?null:"an object or null",De=t=>typeof t=="string"||typeof t=="boolean"?null:"a string or a boolean",Xe=t=>typeof t=="string"||typeof t=="object"&&t!==null&&!Array.isArray(t)?null:"a string or an object",Ke=t=>typeof t=="string"||Array.isArray(t)?null:"a string or an array",Pe=t=>typeof t=="string"||t instanceof Uint8Array?null:"a string or a Uint8Array",Qe=t=>typeof t=="string"||t instanceof URL?null:"a string or a URL";function s(t,n,r,u){let d=t[r];if(n[r+""]=!0,d===void 0)return;let y=u(d);if(y!==null)throw new Error(`${z(r)} must be ${y}`);return d}function V(t,n,r){for(let u in t)if(!(u in n))throw new Error(`Invalid option ${r}: ${z(u)}`)}function Ze(t){let n=Object.create(null),r=s(t,n,"wasmURL",Qe),u=s(t,n,"wasmModule",Je),d=s(t,n,"worker",B);return V(t,n,"in initialize() call"),{wasmURL:r,wasmModule:u,worker:d}}function Oe(t){let n;if(t!==void 0){n=Object.create(null);for(let r in t){let u=t[r];if(typeof u=="string"||u===!1)n[r]=u;else throw new Error(`Expected ${z(r)} in mangle cache to map to either a string or false`)}}return n}function ge(t,n,r,u,d){let y=s(n,r,"color",B),m=s(n,r,"logLevel",$),_=s(n,r,"logLimit",re);y!==void 0?t.push(`--color=${y}`):u&&t.push("--color=true"),t.push(`--log-level=${m||d}`),t.push(`--log-limit=${_||0}`)}function X(t,n,r){if(typeof t!="string")throw new Error(`Expected value for ${n}${r!==void 0?" "+z(r):""} to be a string, got ${typeof t} instead`);return t}function Ie(t,n,r){let u=s(n,r,"legalComments",$),d=s(n,r,"sourceRoot",$),y=s(n,r,"sourcesContent",B),m=s(n,r,"target",Ke),_=s(n,r,"format",$),c=s(n,r,"globalName",$),k=s(n,r,"mangleProps",pe),S=s(n,r,"reserveProps",pe),U=s(n,r,"mangleQuoted",B),L=s(n,r,"minify",B),N=s(n,r,"minifySyntax",B),D=s(n,r,"minifyWhitespace",B),A=s(n,r,"minifyIdentifiers",B),a=s(n,r,"lineLimit",re),g=s(n,r,"drop",Y),b=s(n,r,"dropLabels",Y),j=s(n,r,"charset",$),h=s(n,r,"treeShaking",B),l=s(n,r,"ignoreAnnotations",B),o=s(n,r,"jsx",$),p=s(n,r,"jsxFactory",$),w=s(n,r,"jsxFragment",$),E=s(n,r,"jsxImportSource",$),T=s(n,r,"jsxDev",B),e=s(n,r,"jsxSideEffects",B),i=s(n,r,"define",Q),f=s(n,r,"logOverride",Q),v=s(n,r,"supported",Q),P=s(n,r,"pure",Y),I=s(n,r,"keepNames",B),M=s(n,r,"platform",$),O=s(n,r,"tsconfigRaw",Xe);if(u&&t.push(`--legal-comments=${u}`),d!==void 0&&t.push(`--source-root=${d}`),y!==void 0&&t.push(`--sources-content=${y}`),m&&(Array.isArray(m)?t.push(`--target=${Array.from(m).map(Ue).join(",")}`):t.push(`--target=${Ue(m)}`)),_&&t.push(`--format=${_}`),c&&t.push(`--global-name=${c}`),M&&t.push(`--platform=${M}`),O&&t.push(`--tsconfig-raw=${typeof O=="string"?O:JSON.stringify(O)}`),L&&t.push("--minify"),N&&t.push("--minify-syntax"),D&&t.push("--minify-whitespace"),A&&t.push("--minify-identifiers"),a&&t.push(`--line-limit=${a}`),j&&t.push(`--charset=${j}`),h!==void 0&&t.push(`--tree-shaking=${h}`),l&&t.push("--ignore-annotations"),g)for(let R of g)t.push(`--drop:${X(R,"drop")}`);if(b&&t.push(`--drop-labels=${Array.from(b).map(R=>X(R,"dropLabels")).join(",")}`),k&&t.push(`--mangle-props=${k.source}`),S&&t.push(`--reserve-props=${S.source}`),U!==void 0&&t.push(`--mangle-quoted=${U}`),o&&t.push(`--jsx=${o}`),p&&t.push(`--jsx-factory=${p}`),w&&t.push(`--jsx-fragment=${w}`),E&&t.push(`--jsx-import-source=${E}`),T&&t.push("--jsx-dev"),e&&t.push("--jsx-side-effects"),i)for(let R in i){if(R.indexOf("=")>=0)throw new Error(`Invalid define: ${R}`);t.push(`--define:${R}=${X(i[R],"define",R)}`)}if(f)for(let R in f){if(R.indexOf("=")>=0)throw new Error(`Invalid log override: ${R}`);t.push(`--log-override:${R}=${X(f[R],"log override",R)}`)}if(v)for(let R in v){if(R.indexOf("=")>=0)throw new Error(`Invalid supported: ${R}`);let C=v[R];if(typeof C!="boolean")throw new Error(`Expected value for supported ${z(R)} to be a boolean, got ${typeof C} instead`);t.push(`--supported:${R}=${C}`)}if(P)for(let R of P)t.push(`--pure:${X(R,"pure")}`);I&&t.push("--keep-names")}function He(t,n,r,u,d){var y;let m=[],_=[],c=Object.create(null),k=null,S=null;ge(m,n,c,r,u),Ie(m,n,c);let U=s(n,c,"sourcemap",De),L=s(n,c,"bundle",B),N=s(n,c,"splitting",B),D=s(n,c,"preserveSymlinks",B),A=s(n,c,"metafile",B),a=s(n,c,"outfile",$),g=s(n,c,"outdir",$),b=s(n,c,"outbase",$),j=s(n,c,"tsconfig",$),h=s(n,c,"resolveExtensions",Y),l=s(n,c,"nodePaths",Y),o=s(n,c,"mainFields",Y),p=s(n,c,"conditions",Y),w=s(n,c,"external",Y),E=s(n,c,"packages",$),T=s(n,c,"alias",Q),e=s(n,c,"loader",Q),i=s(n,c,"outExtension",Q),f=s(n,c,"publicPath",$),v=s(n,c,"entryNames",$),P=s(n,c,"chunkNames",$),I=s(n,c,"assetNames",$),M=s(n,c,"inject",Y),O=s(n,c,"banner",Q),R=s(n,c,"footer",Q),C=s(n,c,"entryPoints",Ve),q=s(n,c,"absWorkingDir",$),F=s(n,c,"stdin",Q),W=(y=s(n,c,"write",B))!=null?y:d,J=s(n,c,"allowOverwrite",B),oe=s(n,c,"mangleCache",Q);if(c.plugins=!0,V(n,c,`in ${t}() call`),U&&m.push(`--sourcemap${U===!0?"":`=${U}`}`),L&&m.push("--bundle"),J&&m.push("--allow-overwrite"),N&&m.push("--splitting"),D&&m.push("--preserve-symlinks"),A&&m.push("--metafile"),a&&m.push(`--outfile=${a}`),g&&m.push(`--outdir=${g}`),b&&m.push(`--outbase=${b}`),j&&m.push(`--tsconfig=${j}`),E&&m.push(`--packages=${E}`),h){let x=[];for(let G of h){if(X(G,"resolve extension"),G.indexOf(",")>=0)throw new Error(`Invalid resolve extension: ${G}`);x.push(G)}m.push(`--resolve-extensions=${x.join(",")}`)}if(f&&m.push(`--public-path=${f}`),v&&m.push(`--entry-names=${v}`),P&&m.push(`--chunk-names=${P}`),I&&m.push(`--asset-names=${I}`),o){let x=[];for(let G of o){if(X(G,"main field"),G.indexOf(",")>=0)throw new Error(`Invalid main field: ${G}`);x.push(G)}m.push(`--main-fields=${x.join(",")}`)}if(p){let x=[];for(let G of p){if(X(G,"condition"),G.indexOf(",")>=0)throw new Error(`Invalid condition: ${G}`);x.push(G)}m.push(`--conditions=${x.join(",")}`)}if(w)for(let x of w)m.push(`--external:${X(x,"external")}`);if(T)for(let x in T){if(x.indexOf("=")>=0)throw new Error(`Invalid package name in alias: ${x}`);m.push(`--alias:${x}=${X(T[x],"alias",x)}`)}if(O)for(let x in O){if(x.indexOf("=")>=0)throw new Error(`Invalid banner file type: ${x}`);m.push(`--banner:${x}=${X(O[x],"banner",x)}`)}if(R)for(let x in R){if(x.indexOf("=")>=0)throw new Error(`Invalid footer file type: ${x}`);m.push(`--footer:${x}=${X(R[x],"footer",x)}`)}if(M)for(let x of M)m.push(`--inject:${X(x,"inject")}`);if(e)for(let x in e){if(x.indexOf("=")>=0)throw new Error(`Invalid loader extension: ${x}`);m.push(`--loader:${x}=${X(e[x],"loader",x)}`)}if(i)for(let x in i){if(x.indexOf("=")>=0)throw new Error(`Invalid out extension: ${x}`);m.push(`--out-extension:${x}=${X(i[x],"out extension",x)}`)}if(C)if(Array.isArray(C))for(let x=0,G=C.length;x<G;x++){let Z=C[x];if(typeof Z=="object"&&Z!==null){let ee=Object.create(null),K=s(Z,ee,"in",$),fe=s(Z,ee,"out",$);if(V(Z,ee,"in entry point at index "+x),K===void 0)throw new Error(\'Missing property "in" for entry point at index \'+x);if(fe===void 0)throw new Error(\'Missing property "out" for entry point at index \'+x);_.push([fe,K])}else _.push(["",X(Z,"entry point at index "+x)])}else for(let x in C)_.push([x,X(C[x],"entry point",x)]);if(F){let x=Object.create(null),G=s(F,x,"contents",Pe),Z=s(F,x,"resolveDir",$),ee=s(F,x,"sourcefile",$),K=s(F,x,"loader",$);V(F,x,\'in "stdin" object\'),ee&&m.push(`--sourcefile=${ee}`),K&&m.push(`--loader=${K}`),Z&&(S=Z),typeof G=="string"?k=H(G):G instanceof Uint8Array&&(k=G)}let he=[];if(l)for(let x of l)x+="",he.push(x);return{entries:_,flags:m,write:W,stdinContents:k,stdinResolveDir:S,absWorkingDir:q,nodePaths:he,mangleCache:Oe(oe)}}function et(t,n,r,u){let d=[],y=Object.create(null);ge(d,n,y,r,u),Ie(d,n,y);let m=s(n,y,"sourcemap",De),_=s(n,y,"sourcefile",$),c=s(n,y,"loader",$),k=s(n,y,"banner",$),S=s(n,y,"footer",$),U=s(n,y,"mangleCache",Q);return V(n,y,`in ${t}() call`),m&&d.push(`--sourcemap=${m===!0?"external":m}`),_&&d.push(`--sourcefile=${_}`),c&&d.push(`--loader=${c}`),k&&d.push(`--banner=${k}`),S&&d.push(`--footer=${S}`),{flags:d,mangleCache:Oe(U)}}function tt(t){let n={},r={didClose:!1,reason:""},u={},d=0,y=0,m=new Uint8Array(16*1024),_=0,c=A=>{let a=_+A.length;if(a>m.length){let b=new Uint8Array(a*2);b.set(m),m=b}m.set(A,_),_+=A.length;let g=0;for(;g+4<=_;){let b=je(m,g);if(g+4+b>_)break;g+=4,D(m.subarray(g,g+b)),g+=b}g>0&&(m.copyWithin(0,g,_),_-=g)},k=A=>{r.didClose=!0,A&&(r.reason=": "+(A.message||A));let a="The service was stopped"+r.reason;for(let g in u)u[g](a,null);u={}},S=(A,a,g)=>{if(r.didClose)return g("The service is no longer running"+r.reason,null);let b=d++;u[b]=(j,h)=>{try{g(j,h)}finally{A&&A.unref()}},A&&A.ref(),t.writeToStdin($e({id:b,isRequest:!0,value:a}))},U=(A,a)=>{if(r.didClose)throw new Error("The service is no longer running"+r.reason);t.writeToStdin($e({id:A,isRequest:!1,value:a}))},L=(A,a)=>ne(this,null,function*(){try{if(a.command==="ping"){U(A,{});return}if(typeof a.key=="number"){let g=n[a.key];if(!g)return;let b=g[a.command];if(b){yield b(A,a);return}}throw new Error("Invalid command: "+a.command)}catch(g){let b=[se(g,t,null,void 0,"")];try{U(A,{errors:b})}catch{}}}),N=!0,D=A=>{if(N){N=!1;let g=String.fromCharCode(...A);if(g!=="0.21.5")throw new Error(`Cannot start service: Host version "0.21.5" does not match binary version ${z(g)}`);return}let a=ze(A);if(a.isRequest)L(a.id,a.value);else{let g=u[a.id];delete u[a.id],a.value.error?g(a.value.error,{}):g(null,a.value)}};return{readFromStdout:c,afterClose:k,service:{buildOrContext:({callName:A,refs:a,options:g,isTTY:b,defaultWD:j,callback:h})=>{let l=0,o=y++,p={},w={ref(){++l===1&&a&&a.ref()},unref(){--l===0&&(delete n[o],a&&a.unref())}};n[o]=p,w.ref(),nt(A,o,S,U,w,t,p,g,b,j,(E,T)=>{try{h(E,T)}finally{w.unref()}})},transform:({callName:A,refs:a,input:g,options:b,isTTY:j,fs:h,callback:l})=>{let o=Ne(),p=w=>{try{if(typeof g!="string"&&!(g instanceof Uint8Array))throw new Error(\'The input to "transform" must be a string or a Uint8Array\');let{flags:E,mangleCache:T}=et(A,b,j,Ae),e={command:"transform",flags:E,inputFS:w!==null,input:w!==null?H(w):typeof g=="string"?H(g):g};T&&(e.mangleCache=T),S(a,e,(i,f)=>{if(i)return l(new Error(i),null);let v=ae(f.errors,o),P=ae(f.warnings,o),I=1,M=()=>{if(--I===0){let O={warnings:P,code:f.code,map:f.map,mangleCache:void 0,legalComments:void 0};"legalComments"in f&&(O.legalComments=f?.legalComments),f.mangleCache&&(O.mangleCache=f?.mangleCache),l(null,O)}};if(v.length>0)return l(ue("Transform failed",v,P),null);f.codeFS&&(I++,h.readFile(f.code,(O,R)=>{O!==null?l(O,null):(f.code=R,M())})),f.mapFS&&(I++,h.readFile(f.map,(O,R)=>{O!==null?l(O,null):(f.map=R,M())})),M()})}catch(E){let T=[];try{ge(T,b,{},j,Ae)}catch{}let e=se(E,t,o,void 0,"");S(a,{command:"error",flags:T,error:e},()=>{e.detail=o.load(e.detail),l(ue("Transform failed",[e],[]),null)})}};if((typeof g=="string"||g instanceof Uint8Array)&&g.length>1024*1024){let w=p;p=()=>h.writeFile(g,w)}p(null)},formatMessages:({callName:A,refs:a,messages:g,options:b,callback:j})=>{if(!b)throw new Error(`Missing second argument in ${A}() call`);let h={},l=s(b,h,"kind",$),o=s(b,h,"color",B),p=s(b,h,"terminalWidth",re);if(V(b,h,`in ${A}() call`),l===void 0)throw new Error(`Missing "kind" in ${A}() call`);if(l!=="error"&&l!=="warning")throw new Error(`Expected "kind" to be "error" or "warning" in ${A}() call`);let w={command:"format-msgs",messages:te(g,"messages",null,"",p),isWarning:l==="warning"};o!==void 0&&(w.color=o),p!==void 0&&(w.terminalWidth=p),S(a,w,(E,T)=>{if(E)return j(new Error(E),null);j(null,T.messages)})},analyzeMetafile:({callName:A,refs:a,metafile:g,options:b,callback:j})=>{b===void 0&&(b={});let h={},l=s(b,h,"color",B),o=s(b,h,"verbose",B);V(b,h,`in ${A}() call`);let p={command:"analyze-metafile",metafile:g};l!==void 0&&(p.color=l),o!==void 0&&(p.verbose=o),S(a,p,(w,E)=>{if(w)return j(new Error(w),null);j(null,E.result)})}}}}function nt(t,n,r,u,d,y,m,_,c,k,S){let U=Ne(),L=t==="context",N=(a,g)=>{let b=[];try{ge(b,_,{},c,Se)}catch{}let j=se(a,y,U,void 0,g);r(d,{command:"error",flags:b,error:j},()=>{j.detail=U.load(j.detail),S(ue(L?"Context failed":"Build failed",[j],[]),null)})},D;if(typeof _=="object"){let a=_.plugins;if(a!==void 0){if(!Array.isArray(a))return N(new Error(\'"plugins" must be an array\'),"");D=a}}if(D&&D.length>0){if(y.isSync)return N(new Error("Cannot use plugins in synchronous API calls"),"");rt(n,r,u,d,y,m,_,D,U).then(a=>{if(!a.ok)return N(a.error,a.pluginName);try{A(a.requestPlugins,a.runOnEndCallbacks,a.scheduleOnDisposeCallbacks)}catch(g){N(g,"")}},a=>N(a,""));return}try{A(null,(a,g)=>g([],[]),()=>{})}catch(a){N(a,"")}function A(a,g,b){let j=y.hasFS,{entries:h,flags:l,write:o,stdinContents:p,stdinResolveDir:w,absWorkingDir:E,nodePaths:T,mangleCache:e}=He(t,_,c,Se,j);if(o&&!y.hasFS)throw new Error(\'The "write" option is unavailable in this environment\');let i={command:"build",key:n,entries:h,flags:l,write:o,stdinContents:p,stdinResolveDir:w,absWorkingDir:E||k,nodePaths:T,context:L};a&&(i.plugins=a),e&&(i.mangleCache=e);let f=(I,M)=>{let O={errors:ae(I.errors,U),warnings:ae(I.warnings,U),outputFiles:void 0,metafile:void 0,mangleCache:void 0},R=O.errors.slice(),C=O.warnings.slice();I.outputFiles&&(O.outputFiles=I.outputFiles.map(it)),I.metafile&&(O.metafile=JSON.parse(I.metafile)),I.mangleCache&&(O.mangleCache=I.mangleCache),I.writeToStdout!==void 0&&console.log(le(I.writeToStdout).replace(/\\n$/,"")),g(O,(q,F)=>{if(R.length>0||q.length>0){let W=ue("Build failed",R.concat(q),C.concat(F));return M(W,null,q,F)}M(null,O,q,F)})},v,P;L&&(m["on-end"]=(I,M)=>new Promise(O=>{f(M,(R,C,q,F)=>{let W={errors:q,warnings:F};P&&P(R,C),v=void 0,P=void 0,u(I,W),O()})})),r(d,i,(I,M)=>{if(I)return S(new Error(I),null);if(!L)return f(M,(C,q)=>(b(),S(C,q)));if(M.errors.length>0)return S(ue("Context failed",M.errors,M.warnings),null);let O=!1,R={rebuild:()=>(v||(v=new Promise((C,q)=>{let F;P=(J,oe)=>{F||(F=()=>J?q(J):C(oe))};let W=()=>{r(d,{command:"rebuild",key:n},(J,oe)=>{J?q(new Error(J)):F?F():W()})};W()})),v),watch:(C={})=>new Promise((q,F)=>{if(!y.hasFS)throw new Error(\'Cannot use the "watch" API in this environment\');V(C,{},"in watch() call"),r(d,{command:"watch",key:n},W=>{W?F(new Error(W)):q(void 0)})}),serve:(C={})=>new Promise((q,F)=>{if(!y.hasFS)throw new Error(\'Cannot use the "serve" API in this environment\');let W={},J=s(C,W,"port",re),oe=s(C,W,"host",$),he=s(C,W,"servedir",$),x=s(C,W,"keyfile",$),G=s(C,W,"certfile",$),Z=s(C,W,"fallback",$),ee=s(C,W,"onRequest",Re);V(C,W,"in serve() call");let K={command:"serve",key:n,onRequest:!!ee};J!==void 0&&(K.port=J),oe!==void 0&&(K.host=oe),he!==void 0&&(K.servedir=he),x!==void 0&&(K.keyfile=x),G!==void 0&&(K.certfile=G),Z!==void 0&&(K.fallback=Z),r(d,K,(fe,vt)=>{if(fe)return F(new Error(fe));ee&&(m["serve-request"]=(xt,Et)=>{ee(Et.args),u(xt,{})}),q(vt)})}),cancel:()=>new Promise(C=>{if(O)return C();r(d,{command:"cancel",key:n},()=>{C()})}),dispose:()=>new Promise(C=>{if(O)return C();O=!0,r(d,{command:"dispose",key:n},()=>{C(),b(),d.unref()})})};d.ref(),S(null,R)})}}var rt=(t,n,r,u,d,y,m,_,c)=>ne(void 0,null,function*(){let k=[],S=[],U={},L={},N=[],D=0,A=0,a=[],g=!1;_=[..._];for(let h of _){let l={};if(typeof h!="object")throw new Error(`Plugin at index ${A} must be an object`);let o=s(h,l,"name",$);if(typeof o!="string"||o==="")throw new Error(`Plugin at index ${A} is missing a name`);try{let p=s(h,l,"setup",Re);if(typeof p!="function")throw new Error("Plugin is missing a setup function");V(h,l,`on plugin ${z(o)}`);let w={name:o,onStart:!1,onEnd:!1,onResolve:[],onLoad:[]};A++;let E=p({initialOptions:m,resolve:(T,e={})=>{if(!g)throw new Error(\'Cannot call "resolve" before plugin setup has completed\');if(typeof T!="string")throw new Error("The path to resolve must be a string");let i=Object.create(null),f=s(e,i,"pluginName",$),v=s(e,i,"importer",$),P=s(e,i,"namespace",$),I=s(e,i,"resolveDir",$),M=s(e,i,"kind",$),O=s(e,i,"pluginData",de),R=s(e,i,"with",Q);return V(e,i,"in resolve() call"),new Promise((C,q)=>{let F={command:"resolve",path:T,key:t,pluginName:o};if(f!=null&&(F.pluginName=f),v!=null&&(F.importer=v),P!=null&&(F.namespace=P),I!=null&&(F.resolveDir=I),M!=null)F.kind=M;else throw new Error(\'Must specify "kind" when calling "resolve"\');O!=null&&(F.pluginData=c.store(O)),R!=null&&(F.with=st(R,"with")),n(u,F,(W,J)=>{W!==null?q(new Error(W)):C({errors:ae(J.errors,c),warnings:ae(J.warnings,c),path:J.path,external:J.external,sideEffects:J.sideEffects,namespace:J.namespace,suffix:J.suffix,pluginData:c.load(J.pluginData)})})})},onStart(T){let e=\'This error came from the "onStart" callback registered here:\',i=we(new Error(e),d,"onStart");k.push({name:o,callback:T,note:i}),w.onStart=!0},onEnd(T){let e=\'This error came from the "onEnd" callback registered here:\',i=we(new Error(e),d,"onEnd");S.push({name:o,callback:T,note:i}),w.onEnd=!0},onResolve(T,e){let i=\'This error came from the "onResolve" callback registered here:\',f=we(new Error(i),d,"onResolve"),v={},P=s(T,v,"filter",pe),I=s(T,v,"namespace",$);if(V(T,v,`in onResolve() call for plugin ${z(o)}`),P==null)throw new Error("onResolve() call is missing a filter");let M=D++;U[M]={name:o,callback:e,note:f},w.onResolve.push({id:M,filter:P.source,namespace:I||""})},onLoad(T,e){let i=\'This error came from the "onLoad" callback registered here:\',f=we(new Error(i),d,"onLoad"),v={},P=s(T,v,"filter",pe),I=s(T,v,"namespace",$);if(V(T,v,`in onLoad() call for plugin ${z(o)}`),P==null)throw new Error("onLoad() call is missing a filter");let M=D++;L[M]={name:o,callback:e,note:f},w.onLoad.push({id:M,filter:P.source,namespace:I||""})},onDispose(T){N.push(T)},esbuild:d.esbuild});E&&(yield E),a.push(w)}catch(p){return{ok:!1,error:p,pluginName:o}}}y["on-start"]=(h,l)=>ne(void 0,null,function*(){let o={errors:[],warnings:[]};yield Promise.all(k.map(p=>ne(void 0,[p],function*({name:w,callback:E,note:T}){try{let e=yield E();if(e!=null){if(typeof e!="object")throw new Error(`Expected onStart() callback in plugin ${z(w)} to return an object`);let i={},f=s(e,i,"errors",Y),v=s(e,i,"warnings",Y);V(e,i,`from onStart() callback in plugin ${z(w)}`),f!=null&&o.errors.push(...te(f,"errors",c,w,void 0)),v!=null&&o.warnings.push(...te(v,"warnings",c,w,void 0))}}catch(e){o.errors.push(se(e,d,c,T&&T(),w))}}))),r(h,o)}),y["on-resolve"]=(h,l)=>ne(void 0,null,function*(){let o={},p="",w,E;for(let T of l.ids)try{({name:p,callback:w,note:E}=U[T]);let e=yield w({path:l.path,importer:l.importer,namespace:l.namespace,resolveDir:l.resolveDir,kind:l.kind,pluginData:c.load(l.pluginData),with:l.with});if(e!=null){if(typeof e!="object")throw new Error(`Expected onResolve() callback in plugin ${z(p)} to return an object`);let i={},f=s(e,i,"pluginName",$),v=s(e,i,"path",$),P=s(e,i,"namespace",$),I=s(e,i,"suffix",$),M=s(e,i,"external",B),O=s(e,i,"sideEffects",B),R=s(e,i,"pluginData",de),C=s(e,i,"errors",Y),q=s(e,i,"warnings",Y),F=s(e,i,"watchFiles",Y),W=s(e,i,"watchDirs",Y);V(e,i,`from onResolve() callback in plugin ${z(p)}`),o.id=T,f!=null&&(o.pluginName=f),v!=null&&(o.path=v),P!=null&&(o.namespace=P),I!=null&&(o.suffix=I),M!=null&&(o.external=M),O!=null&&(o.sideEffects=O),R!=null&&(o.pluginData=c.store(R)),C!=null&&(o.errors=te(C,"errors",c,p,void 0)),q!=null&&(o.warnings=te(q,"warnings",c,p,void 0)),F!=null&&(o.watchFiles=ye(F,"watchFiles")),W!=null&&(o.watchDirs=ye(W,"watchDirs"));break}}catch(e){o={id:T,errors:[se(e,d,c,E&&E(),p)]};break}r(h,o)}),y["on-load"]=(h,l)=>ne(void 0,null,function*(){let o={},p="",w,E;for(let T of l.ids)try{({name:p,callback:w,note:E}=L[T]);let e=yield w({path:l.path,namespace:l.namespace,suffix:l.suffix,pluginData:c.load(l.pluginData),with:l.with});if(e!=null){if(typeof e!="object")throw new Error(`Expected onLoad() callback in plugin ${z(p)} to return an object`);let i={},f=s(e,i,"pluginName",$),v=s(e,i,"contents",Pe),P=s(e,i,"resolveDir",$),I=s(e,i,"pluginData",de),M=s(e,i,"loader",$),O=s(e,i,"errors",Y),R=s(e,i,"warnings",Y),C=s(e,i,"watchFiles",Y),q=s(e,i,"watchDirs",Y);V(e,i,`from onLoad() callback in plugin ${z(p)}`),o.id=T,f!=null&&(o.pluginName=f),v instanceof Uint8Array?o.contents=v:v!=null&&(o.contents=H(v)),P!=null&&(o.resolveDir=P),I!=null&&(o.pluginData=c.store(I)),M!=null&&(o.loader=M),O!=null&&(o.errors=te(O,"errors",c,p,void 0)),R!=null&&(o.warnings=te(R,"warnings",c,p,void 0)),C!=null&&(o.watchFiles=ye(C,"watchFiles")),q!=null&&(o.watchDirs=ye(q,"watchDirs"));break}}catch(e){o={id:T,errors:[se(e,d,c,E&&E(),p)]};break}r(h,o)});let b=(h,l)=>l([],[]);S.length>0&&(b=(h,l)=>{ne(void 0,null,function*(){let o=[],p=[];for(let{name:w,callback:E,note:T}of S){let e,i;try{let f=yield E(h);if(f!=null){if(typeof f!="object")throw new Error(`Expected onEnd() callback in plugin ${z(w)} to return an object`);let v={},P=s(f,v,"errors",Y),I=s(f,v,"warnings",Y);V(f,v,`from onEnd() callback in plugin ${z(w)}`),P!=null&&(e=te(P,"errors",c,w,void 0)),I!=null&&(i=te(I,"warnings",c,w,void 0))}}catch(f){e=[se(f,d,c,T&&T(),w)]}if(e){o.push(...e);try{h.errors.push(...e)}catch{}}if(i){p.push(...i);try{h.warnings.push(...i)}catch{}}}l(o,p)})});let j=()=>{for(let h of N)setTimeout(()=>h(),0)};return g=!0,{ok:!0,requestPlugins:a,runOnEndCallbacks:b,scheduleOnDisposeCallbacks:j}});function Ne(){let t=new Map,n=0;return{load(r){return t.get(r)},store(r){if(r===void 0)return-1;let u=n++;return t.set(u,r),u}}}function we(t,n,r){let u,d=!1;return()=>{if(d)return u;d=!0;try{let y=(t.stack+"").split(`\n`);y.splice(1,1);let m=Me(n,y,r);if(m)return u={text:t.message,location:m},u}catch{}}}function se(t,n,r,u,d){let y="Internal error",m=null;try{y=(t&&t.message||t)+""}catch{}try{m=Me(n,(t.stack+"").split(`\n`),"")}catch{}return{id:"",pluginName:d,text:y,location:m,notes:u?[u]:[],detail:r?r.store(t):-1}}function Me(t,n,r){let u="    at ";if(t.readFileSync&&!n[0].startsWith(u)&&n[1].startsWith(u))for(let d=1;d<n.length;d++){let y=n[d];if(y.startsWith(u))for(y=y.slice(u.length);;){let m=/^(?:new |async )?\\S+ \\((.*)\\)$/.exec(y);if(m){y=m[1];continue}if(m=/^eval at \\S+ \\((.*)\\)(?:, \\S+:\\d+:\\d+)?$/.exec(y),m){y=m[1];continue}if(m=/^(\\S+):(\\d+):(\\d+)$/.exec(y),m){let _;try{_=t.readFileSync(m[1],"utf8")}catch{break}let c=_.split(/\\r\\n|\\r|\\n|\\u2028|\\u2029/)[+m[2]-1]||"",k=+m[3]-1,S=c.slice(k,k+r.length)===r?r.length:0;return{file:m[1],namespace:"file",line:+m[2],column:H(c.slice(0,k)).length,length:H(c.slice(k,k+S)).length,lineText:c+`\n`+n.slice(1).join(`\n`),suggestion:""}}break}}return null}function ue(t,n,r){let u=5;t+=n.length<1?"":` with ${n.length} error${n.length<2?"":"s"}:`+n.slice(0,u+1).map((y,m)=>{if(m===u)return`\n...`;if(!y.location)return`\nerror: ${y.text}`;let{file:_,line:c,column:k}=y.location,S=y.pluginName?`[plugin: ${y.pluginName}] `:"";return`\n${_}:${c}:${k}: ERROR: ${S}${y.text}`}).join("");let d=new Error(t);for(let[y,m]of[["errors",n],["warnings",r]])Object.defineProperty(d,y,{configurable:!0,enumerable:!0,get:()=>m,set:_=>Object.defineProperty(d,y,{configurable:!0,enumerable:!0,value:_})});return d}function ae(t,n){for(let r of t)r.detail=n.load(r.detail);return t}function Fe(t,n,r){if(t==null)return null;let u={},d=s(t,u,"file",$),y=s(t,u,"namespace",$),m=s(t,u,"line",re),_=s(t,u,"column",re),c=s(t,u,"length",re),k=s(t,u,"lineText",$),S=s(t,u,"suggestion",$);if(V(t,u,n),k){let U=k.slice(0,(_&&_>0?_:0)+(c&&c>0?c:0)+(r&&r>0?r:80));!/[\\x7F-\\uFFFF]/.test(U)&&!/\\n/.test(k)&&(k=U)}return{file:d||"",namespace:y||"",line:m||0,column:_||0,length:c||0,lineText:k||"",suggestion:S||""}}function te(t,n,r,u,d){let y=[],m=0;for(let _ of t){let c={},k=s(_,c,"id",$),S=s(_,c,"pluginName",$),U=s(_,c,"text",$),L=s(_,c,"location",Ce),N=s(_,c,"notes",Y),D=s(_,c,"detail",de),A=`in element ${m} of "${n}"`;V(_,c,A);let a=[];if(N)for(let g of N){let b={},j=s(g,b,"text",$),h=s(g,b,"location",Ce);V(g,b,A),a.push({text:j||"",location:Fe(h,A,d)})}y.push({id:k||"",pluginName:S||u,text:U||"",location:Fe(L,A,d),notes:a,detail:r?r.store(D):-1}),m++}return y}function ye(t,n){let r=[];for(let u of t){if(typeof u!="string")throw new Error(`${z(n)} must be an array of strings`);r.push(u)}return r}function st(t,n){let r=Object.create(null);for(let u in t){let d=t[u];if(typeof d!="string")throw new Error(`key ${z(u)} in object ${z(n)} must be a string`);r[u]=d}return r}function it({path:t,contents:n,hash:r}){let u=null;return{path:t,contents:n,hash:r,get text(){let d=this.contents;return(u===null||d!==n)&&(n=d,u=le(d)),u}}}var ot="0.21.5",lt=t=>ce().build(t),at=t=>ce().context(t),ut=(t,n)=>ce().transform(t,n),ct=(t,n)=>ce().formatMessages(t,n),ht=(t,n)=>ce().analyzeMetafile(t,n),ft=()=>{throw new Error(\'The "buildSync" API only works in node\')},mt=()=>{throw new Error(\'The "transformSync" API only works in node\')},dt=()=>{throw new Error(\'The "formatMessagesSync" API only works in node\')},pt=()=>{throw new Error(\'The "analyzeMetafileSync" API only works in node\')},gt=()=>(be&&be(),Promise.resolve()),ie,be,ve,ce=()=>{if(ve)return ve;throw ie?new Error(\'You need to wait for the promise returned from "initialize" to be resolved before calling this\'):new Error(\'You need to call "initialize" before calling this\')},wt=t=>{t=Ze(t||{});let n=t.wasmURL,r=t.wasmModule,u=t.worker!==!1;if(!n&&!r)throw new Error(\'Must provide either the "wasmURL" option or the "wasmModule" option\');if(ie)throw new Error(\'Cannot call "initialize" more than once\');return ie=yt(n||"",r,u),ie.catch(()=>{ie=void 0}),ie},yt=(t,n,r)=>ne(void 0,null,function*(){let u;if(r){let k=new Blob([\'onmessage=(postMessage=>{\\n// Copyright 2018 The Go Authors. All rights reserved.\\n// Use of this source code is governed by a BSD-style\\n// license that can be found in the LICENSE file.\\nvar y=(r,f,m)=>new Promise((c,n)=>{var s=u=>{try{l(m.next(u))}catch(h){n(h)}},i=u=>{try{l(m.throw(u))}catch(h){n(h)}},l=u=>u.done?c(u.value):Promise.resolve(u.value).then(s,i);l((m=m.apply(r,f)).next())});let onmessage,globalThis={};for(let r=self;r;r=Object.getPrototypeOf(r))for(let f of Object.getOwnPropertyNames(r))f in globalThis||Object.defineProperty(globalThis,f,{get:()=>self[f]});(()=>{const r=()=>{const c=new Error("not implemented");return c.code="ENOSYS",c};if(!globalThis.fs){let c="";globalThis.fs={constants:{O_WRONLY:-1,O_RDWR:-1,O_CREAT:-1,O_TRUNC:-1,O_APPEND:-1,O_EXCL:-1},writeSync(n,s){c+=m.decode(s);const i=c.lastIndexOf(`\\n`);return i!=-1&&(console.log(c.substring(0,i)),c=c.substring(i+1)),s.length},write(n,s,i,l,u,h){if(i!==0||l!==s.length||u!==null){h(r());return}const g=this.writeSync(n,s);h(null,g)},chmod(n,s,i){i(r())},chown(n,s,i,l){l(r())},close(n,s){s(r())},fchmod(n,s,i){i(r())},fchown(n,s,i,l){l(r())},fstat(n,s){s(r())},fsync(n,s){s(null)},ftruncate(n,s,i){i(r())},lchown(n,s,i,l){l(r())},link(n,s,i){i(r())},lstat(n,s){s(r())},mkdir(n,s,i){i(r())},open(n,s,i,l){l(r())},read(n,s,i,l,u,h){h(r())},readdir(n,s){s(r())},readlink(n,s){s(r())},rename(n,s,i){i(r())},rmdir(n,s){s(r())},stat(n,s){s(r())},symlink(n,s,i){i(r())},truncate(n,s,i){i(r())},unlink(n,s){s(r())},utimes(n,s,i,l){l(r())}}}if(globalThis.process||(globalThis.process={getuid(){return-1},getgid(){return-1},geteuid(){return-1},getegid(){return-1},getgroups(){throw r()},pid:-1,ppid:-1,umask(){throw r()},cwd(){throw r()},chdir(){throw r()}}),!globalThis.crypto)throw new Error("globalThis.crypto is not available, polyfill required (crypto.getRandomValues only)");if(!globalThis.performance)throw new Error("globalThis.performance is not available, polyfill required (performance.now only)");if(!globalThis.TextEncoder)throw new Error("globalThis.TextEncoder is not available, polyfill required");if(!globalThis.TextDecoder)throw new Error("globalThis.TextDecoder is not available, polyfill required");const f=new TextEncoder("utf-8"),m=new TextDecoder("utf-8");globalThis.Go=class{constructor(){this.argv=["js"],this.env={},this.exit=t=>{t!==0&&console.warn("exit code:",t)},this._exitPromise=new Promise(t=>{this._resolveExitPromise=t}),this._pendingEvent=null,this._scheduledTimeouts=new Map,this._nextCallbackTimeoutID=1;const c=(t,e)=>{this.mem.setUint32(t+0,e,!0),this.mem.setUint32(t+4,Math.floor(e/4294967296),!0)},n=t=>{const e=this.mem.getUint32(t+0,!0),o=this.mem.getInt32(t+4,!0);return e+o*4294967296},s=t=>{const e=this.mem.getFloat64(t,!0);if(e===0)return;if(!isNaN(e))return e;const o=this.mem.getUint32(t,!0);return this._values[o]},i=(t,e)=>{if(typeof e=="number"&&e!==0){if(isNaN(e)){this.mem.setUint32(t+4,2146959360,!0),this.mem.setUint32(t,0,!0);return}this.mem.setFloat64(t,e,!0);return}if(e===void 0){this.mem.setFloat64(t,0,!0);return}let a=this._ids.get(e);a===void 0&&(a=this._idPool.pop(),a===void 0&&(a=this._values.length),this._values[a]=e,this._goRefCounts[a]=0,this._ids.set(e,a)),this._goRefCounts[a]++;let d=0;switch(typeof e){case"object":e!==null&&(d=1);break;case"string":d=2;break;case"symbol":d=3;break;case"function":d=4;break}this.mem.setUint32(t+4,2146959360|d,!0),this.mem.setUint32(t,a,!0)},l=t=>{const e=n(t+0),o=n(t+8);return new Uint8Array(this._inst.exports.mem.buffer,e,o)},u=t=>{const e=n(t+0),o=n(t+8),a=new Array(o);for(let d=0;d<o;d++)a[d]=s(e+d*8);return a},h=t=>{const e=n(t+0),o=n(t+8);return m.decode(new DataView(this._inst.exports.mem.buffer,e,o))},g=Date.now()-performance.now();this.importObject={go:{"runtime.wasmExit":t=>{t>>>=0;const e=this.mem.getInt32(t+8,!0);this.exited=!0,delete this._inst,delete this._values,delete this._goRefCounts,delete this._ids,delete this._idPool,this.exit(e)},"runtime.wasmWrite":t=>{t>>>=0;const e=n(t+8),o=n(t+16),a=this.mem.getInt32(t+24,!0);globalThis.fs.writeSync(e,new Uint8Array(this._inst.exports.mem.buffer,o,a))},"runtime.resetMemoryDataView":t=>{t>>>=0,this.mem=new DataView(this._inst.exports.mem.buffer)},"runtime.nanotime1":t=>{t>>>=0,c(t+8,(g+performance.now())*1e6)},"runtime.walltime":t=>{t>>>=0;const e=new Date().getTime();c(t+8,e/1e3),this.mem.setInt32(t+16,e%1e3*1e6,!0)},"runtime.scheduleTimeoutEvent":t=>{t>>>=0;const e=this._nextCallbackTimeoutID;this._nextCallbackTimeoutID++,this._scheduledTimeouts.set(e,setTimeout(()=>{for(this._resume();this._scheduledTimeouts.has(e);)console.warn("scheduleTimeoutEvent: missed timeout event"),this._resume()},n(t+8)+1)),this.mem.setInt32(t+16,e,!0)},"runtime.clearTimeoutEvent":t=>{t>>>=0;const e=this.mem.getInt32(t+8,!0);clearTimeout(this._scheduledTimeouts.get(e)),this._scheduledTimeouts.delete(e)},"runtime.getRandomData":t=>{t>>>=0,crypto.getRandomValues(l(t+8))},"syscall/js.finalizeRef":t=>{t>>>=0;const e=this.mem.getUint32(t+8,!0);if(this._goRefCounts[e]--,this._goRefCounts[e]===0){const o=this._values[e];this._values[e]=null,this._ids.delete(o),this._idPool.push(e)}},"syscall/js.stringVal":t=>{t>>>=0,i(t+24,h(t+8))},"syscall/js.valueGet":t=>{t>>>=0;const e=Reflect.get(s(t+8),h(t+16));t=this._inst.exports.getsp()>>>0,i(t+32,e)},"syscall/js.valueSet":t=>{t>>>=0,Reflect.set(s(t+8),h(t+16),s(t+32))},"syscall/js.valueDelete":t=>{t>>>=0,Reflect.deleteProperty(s(t+8),h(t+16))},"syscall/js.valueIndex":t=>{t>>>=0,i(t+24,Reflect.get(s(t+8),n(t+16)))},"syscall/js.valueSetIndex":t=>{t>>>=0,Reflect.set(s(t+8),n(t+16),s(t+24))},"syscall/js.valueCall":t=>{t>>>=0;try{const e=s(t+8),o=Reflect.get(e,h(t+16)),a=u(t+32),d=Reflect.apply(o,e,a);t=this._inst.exports.getsp()>>>0,i(t+56,d),this.mem.setUint8(t+64,1)}catch(e){t=this._inst.exports.getsp()>>>0,i(t+56,e),this.mem.setUint8(t+64,0)}},"syscall/js.valueInvoke":t=>{t>>>=0;try{const e=s(t+8),o=u(t+16),a=Reflect.apply(e,void 0,o);t=this._inst.exports.getsp()>>>0,i(t+40,a),this.mem.setUint8(t+48,1)}catch(e){t=this._inst.exports.getsp()>>>0,i(t+40,e),this.mem.setUint8(t+48,0)}},"syscall/js.valueNew":t=>{t>>>=0;try{const e=s(t+8),o=u(t+16),a=Reflect.construct(e,o);t=this._inst.exports.getsp()>>>0,i(t+40,a),this.mem.setUint8(t+48,1)}catch(e){t=this._inst.exports.getsp()>>>0,i(t+40,e),this.mem.setUint8(t+48,0)}},"syscall/js.valueLength":t=>{t>>>=0,c(t+16,parseInt(s(t+8).length))},"syscall/js.valuePrepareString":t=>{t>>>=0;const e=f.encode(String(s(t+8)));i(t+16,e),c(t+24,e.length)},"syscall/js.valueLoadString":t=>{t>>>=0;const e=s(t+8);l(t+16).set(e)},"syscall/js.valueInstanceOf":t=>{t>>>=0,this.mem.setUint8(t+24,s(t+8)instanceof s(t+16)?1:0)},"syscall/js.copyBytesToGo":t=>{t>>>=0;const e=l(t+8),o=s(t+32);if(!(o instanceof Uint8Array||o instanceof Uint8ClampedArray)){this.mem.setUint8(t+48,0);return}const a=o.subarray(0,e.length);e.set(a),c(t+40,a.length),this.mem.setUint8(t+48,1)},"syscall/js.copyBytesToJS":t=>{t>>>=0;const e=s(t+8),o=l(t+16);if(!(e instanceof Uint8Array||e instanceof Uint8ClampedArray)){this.mem.setUint8(t+48,0);return}const a=o.subarray(0,e.length);e.set(a),c(t+40,a.length),this.mem.setUint8(t+48,1)},debug:t=>{console.log(t)}}}}run(c){return y(this,null,function*(){if(!(c instanceof WebAssembly.Instance))throw new Error("Go.run: WebAssembly.Instance expected");this._inst=c,this.mem=new DataView(this._inst.exports.mem.buffer),this._values=[NaN,0,null,!0,!1,globalThis,this],this._goRefCounts=new Array(this._values.length).fill(1/0),this._ids=new Map([[0,1],[null,2],[!0,3],[!1,4],[globalThis,5],[this,6]]),this._idPool=[],this.exited=!1;let n=4096;const s=t=>{const e=n,o=f.encode(t+"\\\\0");return new Uint8Array(this.mem.buffer,n,o.length).set(o),n+=o.length,n%8!==0&&(n+=8-n%8),e},i=this.argv.length,l=[];this.argv.forEach(t=>{l.push(s(t))}),l.push(0),Object.keys(this.env).sort().forEach(t=>{l.push(s(`${t}=${this.env[t]}`))}),l.push(0);const h=n;if(l.forEach(t=>{this.mem.setUint32(n,t,!0),this.mem.setUint32(n+4,0,!0),n+=8}),n>=12288)throw new Error("total length of command line and environment variables exceeds limit");this._inst.exports.run(i,h),this.exited&&this._resolveExitPromise(),yield this._exitPromise})}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(c){const n=this;return function(){const s={id:c,this:this,args:arguments};return n._pendingEvent=s,n._resume(),s.result}}}})(),onmessage=({data:r})=>{let f=new TextDecoder,m=globalThis.fs,c="";m.writeSync=(u,h)=>{if(u===1)postMessage(h);else if(u===2){c+=f.decode(h);let g=c.split(`\\n`);g.length>1&&console.log(g.slice(0,-1).join(`\\n`)),c=g[g.length-1]}else throw new Error("Bad write");return h.length};let n=[],s,i=0;onmessage=({data:u})=>(u.length>0&&(n.push(u),s&&s()),l),m.read=(u,h,g,t,e,o)=>{if(u!==0||g!==0||t!==h.length||e!==null)throw new Error("Bad read");if(n.length===0){s=()=>m.read(u,h,g,t,e,o);return}let a=n[0],d=Math.max(0,Math.min(t,a.length-i));h.set(a.subarray(i,i+d),g),i+=d,i===a.length&&(n.shift(),i=0),o(null,d)};let l=new globalThis.Go;return l.argv=["","--service=0.21.5"],tryToInstantiateModule(r,l).then(u=>{postMessage(null),l.run(u)},u=>{postMessage(u)}),l};function tryToInstantiateModule(r,f){return y(this,null,function*(){if(r instanceof WebAssembly.Module)return WebAssembly.instantiate(r,f.importObject);const m=yield fetch(r);if(!m.ok)throw new Error(`Failed to download ${JSON.stringify(r)}`);if("instantiateStreaming"in WebAssembly&&/^application\\\\/wasm($|;)/i.test(m.headers.get("Content-Type")||""))return(yield WebAssembly.instantiateStreaming(m,f.importObject)).instance;const c=yield m.arrayBuffer();return(yield WebAssembly.instantiate(c,f.importObject)).instance})}return r=>onmessage(r);})(postMessage)\'],{type:"text/javascript"});u=new Worker(URL.createObjectURL(k))}else{let k=(U=>{var L=(a,g,b)=>new Promise((j,h)=>{var l=w=>{try{p(b.next(w))}catch(E){h(E)}},o=w=>{try{p(b.throw(w))}catch(E){h(E)}},p=w=>w.done?j(w.value):Promise.resolve(w.value).then(l,o);p((b=b.apply(a,g)).next())});let N,D={};for(let a=self;a;a=Object.getPrototypeOf(a))for(let g of Object.getOwnPropertyNames(a))g in D||Object.defineProperty(D,g,{get:()=>self[g]});(()=>{const a=()=>{const j=new Error("not implemented");return j.code="ENOSYS",j};if(!D.fs){let j="";D.fs={constants:{O_WRONLY:-1,O_RDWR:-1,O_CREAT:-1,O_TRUNC:-1,O_APPEND:-1,O_EXCL:-1},writeSync(h,l){j+=b.decode(l);const o=j.lastIndexOf(`\n`);return o!=-1&&(console.log(j.substring(0,o)),j=j.substring(o+1)),l.length},write(h,l,o,p,w,E){if(o!==0||p!==l.length||w!==null){E(a());return}const T=this.writeSync(h,l);E(null,T)},chmod(h,l,o){o(a())},chown(h,l,o,p){p(a())},close(h,l){l(a())},fchmod(h,l,o){o(a())},fchown(h,l,o,p){p(a())},fstat(h,l){l(a())},fsync(h,l){l(null)},ftruncate(h,l,o){o(a())},lchown(h,l,o,p){p(a())},link(h,l,o){o(a())},lstat(h,l){l(a())},mkdir(h,l,o){o(a())},open(h,l,o,p){p(a())},read(h,l,o,p,w,E){E(a())},readdir(h,l){l(a())},readlink(h,l){l(a())},rename(h,l,o){o(a())},rmdir(h,l){l(a())},stat(h,l){l(a())},symlink(h,l,o){o(a())},truncate(h,l,o){o(a())},unlink(h,l){l(a())},utimes(h,l,o,p){p(a())}}}if(D.process||(D.process={getuid(){return-1},getgid(){return-1},geteuid(){return-1},getegid(){return-1},getgroups(){throw a()},pid:-1,ppid:-1,umask(){throw a()},cwd(){throw a()},chdir(){throw a()}}),!D.crypto)throw new Error("globalThis.crypto is not available, polyfill required (crypto.getRandomValues only)");if(!D.performance)throw new Error("globalThis.performance is not available, polyfill required (performance.now only)");if(!D.TextEncoder)throw new Error("globalThis.TextEncoder is not available, polyfill required");if(!D.TextDecoder)throw new Error("globalThis.TextDecoder is not available, polyfill required");const g=new TextEncoder("utf-8"),b=new TextDecoder("utf-8");D.Go=class{constructor(){this.argv=["js"],this.env={},this.exit=e=>{e!==0&&console.warn("exit code:",e)},this._exitPromise=new Promise(e=>{this._resolveExitPromise=e}),this._pendingEvent=null,this._scheduledTimeouts=new Map,this._nextCallbackTimeoutID=1;const j=(e,i)=>{this.mem.setUint32(e+0,i,!0),this.mem.setUint32(e+4,Math.floor(i/4294967296),!0)},h=e=>{const i=this.mem.getUint32(e+0,!0),f=this.mem.getInt32(e+4,!0);return i+f*4294967296},l=e=>{const i=this.mem.getFloat64(e,!0);if(i===0)return;if(!isNaN(i))return i;const f=this.mem.getUint32(e,!0);return this._values[f]},o=(e,i)=>{if(typeof i=="number"&&i!==0){if(isNaN(i)){this.mem.setUint32(e+4,2146959360,!0),this.mem.setUint32(e,0,!0);return}this.mem.setFloat64(e,i,!0);return}if(i===void 0){this.mem.setFloat64(e,0,!0);return}let f=this._ids.get(i);f===void 0&&(f=this._idPool.pop(),f===void 0&&(f=this._values.length),this._values[f]=i,this._goRefCounts[f]=0,this._ids.set(i,f)),this._goRefCounts[f]++;let v=0;switch(typeof i){case"object":i!==null&&(v=1);break;case"string":v=2;break;case"symbol":v=3;break;case"function":v=4;break}this.mem.setUint32(e+4,2146959360|v,!0),this.mem.setUint32(e,f,!0)},p=e=>{const i=h(e+0),f=h(e+8);return new Uint8Array(this._inst.exports.mem.buffer,i,f)},w=e=>{const i=h(e+0),f=h(e+8),v=new Array(f);for(let P=0;P<f;P++)v[P]=l(i+P*8);return v},E=e=>{const i=h(e+0),f=h(e+8);return b.decode(new DataView(this._inst.exports.mem.buffer,i,f))},T=Date.now()-performance.now();this.importObject={go:{"runtime.wasmExit":e=>{e>>>=0;const i=this.mem.getInt32(e+8,!0);this.exited=!0,delete this._inst,delete this._values,delete this._goRefCounts,delete this._ids,delete this._idPool,this.exit(i)},"runtime.wasmWrite":e=>{e>>>=0;const i=h(e+8),f=h(e+16),v=this.mem.getInt32(e+24,!0);D.fs.writeSync(i,new Uint8Array(this._inst.exports.mem.buffer,f,v))},"runtime.resetMemoryDataView":e=>{e>>>=0,this.mem=new DataView(this._inst.exports.mem.buffer)},"runtime.nanotime1":e=>{e>>>=0,j(e+8,(T+performance.now())*1e6)},"runtime.walltime":e=>{e>>>=0;const i=new Date().getTime();j(e+8,i/1e3),this.mem.setInt32(e+16,i%1e3*1e6,!0)},"runtime.scheduleTimeoutEvent":e=>{e>>>=0;const i=this._nextCallbackTimeoutID;this._nextCallbackTimeoutID++,this._scheduledTimeouts.set(i,setTimeout(()=>{for(this._resume();this._scheduledTimeouts.has(i);)console.warn("scheduleTimeoutEvent: missed timeout event"),this._resume()},h(e+8)+1)),this.mem.setInt32(e+16,i,!0)},"runtime.clearTimeoutEvent":e=>{e>>>=0;const i=this.mem.getInt32(e+8,!0);clearTimeout(this._scheduledTimeouts.get(i)),this._scheduledTimeouts.delete(i)},"runtime.getRandomData":e=>{e>>>=0,crypto.getRandomValues(p(e+8))},"syscall/js.finalizeRef":e=>{e>>>=0;const i=this.mem.getUint32(e+8,!0);if(this._goRefCounts[i]--,this._goRefCounts[i]===0){const f=this._values[i];this._values[i]=null,this._ids.delete(f),this._idPool.push(i)}},"syscall/js.stringVal":e=>{e>>>=0,o(e+24,E(e+8))},"syscall/js.valueGet":e=>{e>>>=0;const i=Reflect.get(l(e+8),E(e+16));e=this._inst.exports.getsp()>>>0,o(e+32,i)},"syscall/js.valueSet":e=>{e>>>=0,Reflect.set(l(e+8),E(e+16),l(e+32))},"syscall/js.valueDelete":e=>{e>>>=0,Reflect.deleteProperty(l(e+8),E(e+16))},"syscall/js.valueIndex":e=>{e>>>=0,o(e+24,Reflect.get(l(e+8),h(e+16)))},"syscall/js.valueSetIndex":e=>{e>>>=0,Reflect.set(l(e+8),h(e+16),l(e+24))},"syscall/js.valueCall":e=>{e>>>=0;try{const i=l(e+8),f=Reflect.get(i,E(e+16)),v=w(e+32),P=Reflect.apply(f,i,v);e=this._inst.exports.getsp()>>>0,o(e+56,P),this.mem.setUint8(e+64,1)}catch(i){e=this._inst.exports.getsp()>>>0,o(e+56,i),this.mem.setUint8(e+64,0)}},"syscall/js.valueInvoke":e=>{e>>>=0;try{const i=l(e+8),f=w(e+16),v=Reflect.apply(i,void 0,f);e=this._inst.exports.getsp()>>>0,o(e+40,v),this.mem.setUint8(e+48,1)}catch(i){e=this._inst.exports.getsp()>>>0,o(e+40,i),this.mem.setUint8(e+48,0)}},"syscall/js.valueNew":e=>{e>>>=0;try{const i=l(e+8),f=w(e+16),v=Reflect.construct(i,f);e=this._inst.exports.getsp()>>>0,o(e+40,v),this.mem.setUint8(e+48,1)}catch(i){e=this._inst.exports.getsp()>>>0,o(e+40,i),this.mem.setUint8(e+48,0)}},"syscall/js.valueLength":e=>{e>>>=0,j(e+16,parseInt(l(e+8).length))},"syscall/js.valuePrepareString":e=>{e>>>=0;const i=g.encode(String(l(e+8)));o(e+16,i),j(e+24,i.length)},"syscall/js.valueLoadString":e=>{e>>>=0;const i=l(e+8);p(e+16).set(i)},"syscall/js.valueInstanceOf":e=>{e>>>=0,this.mem.setUint8(e+24,l(e+8)instanceof l(e+16)?1:0)},"syscall/js.copyBytesToGo":e=>{e>>>=0;const i=p(e+8),f=l(e+32);if(!(f instanceof Uint8Array||f instanceof Uint8ClampedArray)){this.mem.setUint8(e+48,0);return}const v=f.subarray(0,i.length);i.set(v),j(e+40,v.length),this.mem.setUint8(e+48,1)},"syscall/js.copyBytesToJS":e=>{e>>>=0;const i=l(e+8),f=p(e+16);if(!(i instanceof Uint8Array||i instanceof Uint8ClampedArray)){this.mem.setUint8(e+48,0);return}const v=f.subarray(0,i.length);i.set(v),j(e+40,v.length),this.mem.setUint8(e+48,1)},debug:e=>{console.log(e)}}}}run(j){return L(this,null,function*(){if(!(j instanceof WebAssembly.Instance))throw new Error("Go.run: WebAssembly.Instance expected");this._inst=j,this.mem=new DataView(this._inst.exports.mem.buffer),this._values=[NaN,0,null,!0,!1,D,this],this._goRefCounts=new Array(this._values.length).fill(1/0),this._ids=new Map([[0,1],[null,2],[!0,3],[!1,4],[D,5],[this,6]]),this._idPool=[],this.exited=!1;let h=4096;const l=E=>{const T=h,e=g.encode(E+"\\0");return new Uint8Array(this.mem.buffer,h,e.length).set(e),h+=e.length,h%8!==0&&(h+=8-h%8),T},o=this.argv.length,p=[];this.argv.forEach(E=>{p.push(l(E))}),p.push(0),Object.keys(this.env).sort().forEach(E=>{p.push(l(`${E}=${this.env[E]}`))}),p.push(0);const w=h;if(p.forEach(E=>{this.mem.setUint32(h,E,!0),this.mem.setUint32(h+4,0,!0),h+=8}),h>=12288)throw new Error("total length of command line and environment variables exceeds limit");this._inst.exports.run(o,w),this.exited&&this._resolveExitPromise(),yield this._exitPromise})}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(j){const h=this;return function(){const l={id:j,this:this,args:arguments};return h._pendingEvent=l,h._resume(),l.result}}}})(),N=({data:a})=>{let g=new TextDecoder,b=D.fs,j="";b.writeSync=(w,E)=>{if(w===1)U(E);else if(w===2){j+=g.decode(E);let T=j.split(`\n`);T.length>1&&console.log(T.slice(0,-1).join(`\n`)),j=T[T.length-1]}else throw new Error("Bad write");return E.length};let h=[],l,o=0;N=({data:w})=>(w.length>0&&(h.push(w),l&&l()),p),b.read=(w,E,T,e,i,f)=>{if(w!==0||T!==0||e!==E.length||i!==null)throw new Error("Bad read");if(h.length===0){l=()=>b.read(w,E,T,e,i,f);return}let v=h[0],P=Math.max(0,Math.min(e,v.length-o));E.set(v.subarray(o,o+P),T),o+=P,o===v.length&&(h.shift(),o=0),f(null,P)};let p=new D.Go;return p.argv=["","--service=0.21.5"],A(a,p).then(w=>{U(null),p.run(w)},w=>{U(w)}),p};function A(a,g){return L(this,null,function*(){if(a instanceof WebAssembly.Module)return WebAssembly.instantiate(a,g.importObject);const b=yield fetch(a);if(!b.ok)throw new Error(`Failed to download ${JSON.stringify(a)}`);if("instantiateStreaming"in WebAssembly&&/^application\\/wasm($|;)/i.test(b.headers.get("Content-Type")||""))return(yield WebAssembly.instantiateStreaming(b,g.importObject)).instance;const j=yield b.arrayBuffer();return(yield WebAssembly.instantiate(j,g.importObject)).instance})}return a=>N(a)})(U=>u.onmessage({data:U})),S;u={onmessage:null,postMessage:U=>setTimeout(()=>S=k({data:U})),terminate(){if(S)for(let U of S._scheduledTimeouts.values())clearTimeout(U)}}}let d,y,m=new Promise((k,S)=>{d=k,y=S});u.onmessage=({data:k})=>{u.onmessage=({data:S})=>_(S),k?y(k):d()},u.postMessage(n||new URL(t,location.href).toString());let{readFromStdout:_,service:c}=tt({writeToStdin(k){u.postMessage(k)},isSync:!1,hasFS:!1,esbuild:me});yield m,be=()=>{u.terminate(),ie=void 0,be=void 0,ve=void 0},ve={build:k=>new Promise((S,U)=>c.buildOrContext({callName:"build",refs:null,options:k,isTTY:!1,defaultWD:"/",callback:(L,N)=>L?U(L):S(N)})),context:k=>new Promise((S,U)=>c.buildOrContext({callName:"context",refs:null,options:k,isTTY:!1,defaultWD:"/",callback:(L,N)=>L?U(L):S(N)})),transform:(k,S)=>new Promise((U,L)=>c.transform({callName:"transform",refs:null,input:k,options:S||{},isTTY:!1,fs:{readFile(N,D){D(new Error("Internal error"),null)},writeFile(N,D){D(null)}},callback:(N,D)=>N?L(N):U(D)})),formatMessages:(k,S)=>new Promise((U,L)=>c.formatMessages({callName:"formatMessages",refs:null,messages:k,options:S,callback:(N,D)=>N?L(N):U(D)})),analyzeMetafile:(k,S)=>new Promise((U,L)=>c.analyzeMetafile({callName:"analyzeMetafile",refs:null,metafile:typeof k=="string"?k:JSON.stringify(k),options:S,callback:(N,D)=>N?L(N):U(D)}))}}),bt=me})(typeof module=="object"?module:{set exports(xe){(typeof self<"u"?self:this).esbuild=xe}});\n',metaType:"application/javascript"},"/modules/p2p/index.js":{content:`import e from"/bootstrap.js";const n={};e.events.install(n),e.addModule({name:"p2p",frontend:!0,backend:!0,base:n});
`,metaType:"application/javascript"},"/modules/p2p/frontend.js":{content:`import e from"/bootstrap.js";const A={"P2P:SEND_DATA_OP":({payload:P})=>{console.log("P2P DATA OP",{payload:P}),e.p2p.emit("SEND_DATA_OP",P)}};e.events.set(A);
`,metaType:"application/javascript"},"/theme.css":{content:`body{font-family:var(--font-family)}html,body{font-family:var(--font-family);background-color:var(--background-color)!important;color:var(--text-color)!important;width:100%;min-height:100%;height:100%;padding:0;margin:0}body:not(.production) *:not(:defined){border:1px solid red}.dark{filter:invert(1) hue-rotate(180deg)}.dark img,.dark dialog,.dark video,.dark iframe{filter:invert(1) hue-rotate(180deg)}html{font-size:14px}@media (max-width: 768px){html{font-size:18px}}@media (max-width: 480px){html{font-size:20px}}textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}:root{box-sizing:border-box;-moz-text-size-adjust:none;-webkit-text-size-adjust:none;text-size-adjust:none;line-height:1.2;-webkit-font-smoothing:antialiased}*,*:before,*:after{box-sizing:border-box}*{margin:0}body{-webkit-font-smoothing:antialiased}a{color:currentColor;text-decoration:none;font-family:var(--font-family)}button,textarea,select{background-color:inherit;border-width:0;color:inherit}img,picture,video,canvas,svg{display:block;max-width:100%}input,button,textarea,select{font:inherit}p,h1,h2,h3,h4,h5,h6{font-family:var(--font-family);overflow-wrap:break-word}dialog::backdrop{background-color:#000c}*::-webkit-scrollbar{width:8px;margin-right:10px}*::-webkit-scrollbar-track{background:transparent}*::-webkit-scrollbar-thumb{&:hover{scrollbar-color:rgba(154,153,150,.8) transparent}border-radius:10px;border:none}*::-webkit-scrollbar-button{background:transparent;color:transparent}*{scrollbar-width:thin;scrollbar-color:transparent transparent;&:hover{scrollbar-color:rgba(154,153,150,.8) transparent}}[full]{width:100%;height:100vh}[w-full]{width:100%}[grow]{flex-grow:1}[hide],.hide{display:none!important}[noscroll]{overflow:hidden}div [container]{display:flex}div [container][horizontal]{display:flex;flex-direction:col}
`,metaType:"text/css"},"/worker.js":{content:'import n from"/bootstrap.js";let l;const a=async e=>{console.log("App Worker: bootstrap() called");const o=new URL(self.location).searchParams.get("project"),c=o?JSON.parse(decodeURIComponent(o)):{};c.backend=!0;const i=await n.bootstrap({backend:!0,...c||{},settings:{...c.settings||{},preview:!!self.IS_PREVIEW,IS_MV3:!!self.chrome}});return i&&!l&&(console.log("App Worker: Initializing backend application"),await n.Backend.bootstrap(i)),i};let t,s;const p=[],d={handleMessage:async({data:e})=>{if(e.eventId&&p.includes(e.eventId))return;e.eventId&&p.push(e.eventId);const r=e.eventId&&(o=>{s&&s.postMessage({eventId:e.eventId,payload:o,connection:e.connection})});if(e.type==="LOAD_APP"&&n.settings.preview){const o=e?.payload?.project;if(!o)return;t&&(console.info("App Worker: Restarting existing application"),t.restart()),t=await a(o)}n?.Backend?(console.info(`App Worker: Routing message to backend: ${e.type}`),n.Backend.handleMessage({data:e,respond:r})):n.hooks.add("APP:BACKEND_STARTED",async()=>{console.info(`App Worker: Routing message to backend after APP:BACKEND_STARTED: ${e.type}`),n.Backend.handleMessage({data:e,respond:r})})}};self.addEventListener("message",async e=>{e.data.type==="INIT_PORT"&&(s=e.ports[0],console.warn("App Worker: Communication port initialized."),s.onmessage=d.handleMessage,(async()=>(t=await a(),n.Backend.client=s))())});\n',metaType:"application/javascript"},"/modules/mvc/view/backend.js":{content:`import n from"/bootstrap.js";const t=async e=>n.Backend.requestFromClient("GET_TAG_PROPS",{tag:e});n.addFunctions({name:"view",functions:{getTagProps:t}});
`,metaType:"application/javascript"},"/modules/mvc/controller/backend/backend.js":{content:'import t from"/bootstrap.js";import D from"/modules/mvc/model/backend.js";import c from"/modules/mvc/model/database/index.js";const f=(()=>{let e=0,s=0;return()=>{let a=Date.now();return a>e?s=0:(s++,a+=s),e=a,a.toString()}})();let v=1;const u={},l={},S=async(e,s,a=5e3)=>{const o=(await self.clients.matchAll({type:"window",includeUncontrolled:!0}))[0];if(!o)return Promise.reject(new Error("No active client found to send request to."));const d=`backend-request-${v++}`;return new Promise((i,r)=>{l[d]={resolve:i,reject:r},setTimeout(()=>{delete l[d],r(new Error(`Request timed out after ${a}ms`))},a),o.postMessage({type:e,payload:s,eventId:d})})},M=async e=>{t.Backend.client.postMessage(e),t.Backend.client.postMessage({type:"BROADCAST",params:e})},k=async({data:e,respond:s})=>{const{events:a}=t,{type:n,payload:o,connection:d,eventId:i}=e;if(l[i]){l[i].resolve(o),delete l[i];return}if(d){u[i]?u[i].postMessage(e):(t.mv3.postMessage(e,d),u[i]=s);return}const r=a[n];r&&await r({payload:o,eventId:i,respond:s,client:B(t.Backend.client),broadcast:M})},B=e=>new Proxy({},{get:(s,a)=>n=>b(e,a,n)}),b=(e,s,a)=>{const n=`sw_${v++}`;return new Promise((o,d)=>{l[n]={resolve:o,reject:d},e.postMessage({type:s,payload:a,eventId:n})})};function h({$APP:e,getApp:s,debounceDelay:a=50}){let n;const o=async()=>{e.log(`Batch processing ${e.dynamicModels.length} model(s)...`);try{const{SysModel:d}=e,i=await s(),r=i.version+1;await d.edit(e.settings.sysmodels.APP,{id:i.id,models:e.models,version:r}),e.log(`Batch add successful. ${e.dynamicModels.length} model(s) added. App version is now ${r}.`),await c.reload({models:e.models,version:r}),e.dynamicData.length&&await E(Object.fromEntries(e.dynamicData),!0)}catch(d){console.error("Failed to process model additions batch:",d)}};return e.addModule({name:"dynamicModels",base:[]}),e.addModule({name:"dynamicData",base:[]}),function({name:i,schema:r}){if(e.dynamicModels.includes(i)||e.dynamicModels.add(i),!i||!r)throw new Error("A model \'name\' and \'schema\' are required.");e.log(`Model "${i}" queued for addition.`),e.models.set({[i]:r}),clearTimeout(n),n=setTimeout(o,a)}}const A=async({timestamp:e=Date.now(),id:s=e.toString(),models:a=t.models,version:n=1}={})=>{const o={id:s,version:n,active:!0,models:a};return await t.SysModel.add(t.settings.sysmodels.APP,o),t.hooks.run("appCreated",{app:o}),o};async function I(){const e=await self.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"]),s=await self.crypto.subtle.exportKey("spki",e.publicKey),a=await self.crypto.subtle.exportKey("pkcs8",e.privateKey);return{publicKey:btoa(String.fromCharCode(...new Uint8Array(s))),privateKey:btoa(String.fromCharCode(...new Uint8Array(a)))}}const T=async({app:e,device:s,user:a}={})=>{const n=e||await t.Backend.getApp();if(!a){const y=await t.SysModel.get(t.settings.sysmodels.USER,{active:!0,appId:n.id});if(y)return y.privateKey=null,await t.SysModel.get(t.settings.sysmodels.DEVICE,{userId:y.id,active:!0})||await t.SysModel.add(t.settings.sysmodels.DEVICE,s),y}const{publicKey:o,privateKey:d}=await I(),i=a||{id:a?.id||f(),name:a?.name||"Local User",publicKey:o,privateKey:d,appId:n.id,active:!0};await t.SysModel.add(t.settings.sysmodels.USER,i);const r=s||{userId:i.id,appId:n.id,active:!0};return await t.SysModel.add(t.settings.sysmodels.DEVICE,r),i.privateKey=null,i},p=async()=>await t.SysModel.get(t.settings.sysmodels.APP,{active:!0}),m=async e=>{const s=e||await t.Backend.getApp();if(t.Backend.user&&t.Backend.user.appId!==s.id&&(t.Backend.user=null),!t.Backend.user){let a=await t.SysModel.get(t.settings.sysmodels.USER,{appId:s.id,active:!0});a||(a=await t.Backend.createUserEntry({app:s}));const{privateKey:n,active:o,...d}=a;t.Backend.user=d}return t.Backend.user},w=async({app:e,user:s}={})=>{const a=e||await t.Backend.getApp(),n=s||await t.Backend.getUser(a);if(!n)throw new Error("User not found");return await t.SysModel.get(t.settings.sysmodels.DEVICE,{userId:n.id,active:!0})||null},E=async(e,s=!1)=>{const a=e??t.data,{SysModel:n}=t,o=await p(),d=Object.entries(a);if(d.length){for(const[i,r]of d)!s&&t.dynamicModels.includes(i)?t.dynamicData.add([i,r]):await D[i].addMany(r,{keepIndex:!0});c.app=await n.edit(t.settings.sysmodels.APP,{id:o.id,migrationTimestamp:Date.now()})}},g=async e=>{c.app=e,await c.reload({name:e.id,models:e.models,version:e.version});const{active:s,privateKey:a,...n}=await m(e),o=await w({app:e,user:n});return t.data&&!e.migrationTimestamp&&(await E(t.data),e=await p()),{app:e,user:n,device:o,models:e.models}},C=h({$APP:t,getApp:p}),U={bootstrap:async()=>{let e=await p();return e||(e=await A()),await t.hooks.run("APP:BACKEND_STARTED",{app:e,models:e.models}),g(e)},handleMessage:k,getApp:p,getDevice:w,createAppEntry:A,createUserEntry:T,getUser:m,generateId:f,broadcast:M,addModel:C,requestFromClient:S};t.events.set({INIT_APP:async({respond:e})=>{await t.hooks.add("APP:DATABASE_STARTED",async()=>{const s=await p(),a=await m(),n=await w();e({app:s,user:a,device:n})})},GET_CURRENT_APP:async({respond:e})=>{const s=await t.Backend.getApp();e(s)},LIST_APPS:async({respond:e})=>{const s=await t.SysModel.getMany(t.settings.sysmodels.APP);e(s||[])},CREATE_APP:async({respond:e})=>{const s=await t.Backend.getApp();s&&await t.SysModel.edit(t.settings.sysmodels.APP,{id:s.id,active:!1});const a=await t.Backend.createAppEntry(),n=await g(a);e(n.app)},SELECT_APP:async({payload:e,respond:s})=>{const{appId:a}=e;if(!a)return s({error:"An \'appId\' is required to select an app."});const n=await t.Backend.getApp();n&&n.id!==a&&await t.SysModel.edit(t.settings.sysmodels.APP,{id:n.id,active:!1}),await t.SysModel.edit(t.settings.sysmodels.APP,{id:a,active:!0});const o=await t.SysModel.get(t.settings.sysmodels.APP,{id:a}),d=await g(o);s(d.app)},GET_DB_DUMP:async({respond:e})=>{const s=await c.createDBDump();e(s)},LOAD_DB_DUMP:async({payload:e,respond:s=console.log})=>{try{c.loadDBDump(e),s({success:!0})}catch(a){console.error("Failed to load DB dump:",a),s({success:!1,error:a})}}}),t.setLibrary({name:"backend",path:"mvc/controller/backend",alias:"Backend",base:U});\n',metaType:"application/javascript"},"/modules/mvc/model/backend.js":{content:'import r from"/bootstrap.js";import c from"/modules/mvc/model/database/index.js";import l from"/modules/mvc/model/index.js";const f={DISCONNECT:(e,{port:t})=>t.removePort(),CREATE_REMOTE_WORKSPACE:async({payload:e},{importDB:t})=>t(e),ADD_REMOTE_USER:async({payload:e})=>r.Backend.createUserEntry(e),ADD:async({payload:e,respond:t})=>{const s=await c.add(e.model,e.row,e.opts);t(s)},ADD_MANY:async({payload:e,respond:t})=>{const s=await c.addMany(e.model,e.rows,e.opts);t({success:!0,results:s})},REMOVE:async({payload:e,respond:t})=>{const s=await c.remove(e.model,e.id,e.opts);t(s)},REMOVE_MANY:async({payload:e,respond:t})=>{const s=await c.removeMany(e.model,e.ids,e.opts);t({success:!0,results:s})},EDIT:async({payload:e,respond:t})=>{const s=await c.edit(e.model,e.row,e.opts);t(s)},EDIT_MANY:async({payload:e,respond:t})=>{const s=await c.editMany(e.model,e.rows,e.opts);t({success:!0,results:s})},GET:async({payload:e,respond:t})=>{const{id:s,model:o,opts:n={}}=e,a=await c.get(o,s??(n.filter&&(typeof n.filter=="string"&&JSON.parse(n.filter)||n.filter)),n);t(a)},GET_MANY:async({payload:{model:e,opts:t={}},respond:s}={})=>{const o=await c.getMany(e,t.filter,t);s(o)}};r.events.set(f);const p=(e,t,s={})=>new Promise(o=>{const n=f[e];n&&typeof n=="function"?n({respond:o,payload:{model:t,...s}}):o({success:!1,error:`Action "${e}" not found.`})}),d=({model:e,row:t})=>{if(!t)return;const s=r.models[e],o=Object.entries(s).filter(([,n])=>n.belongs&&n.targetModel!=="*");o.length&&o.forEach(([n,a])=>{t[n]&&r.Backend.broadcast({type:"REQUEST_DATA_SYNC",payload:{key:`get:${t[n]}`,model:a.targetModel,data:void 0}})})},u=({row:e,db:t,model:s})=>{if(!e.models)return;const o=new Set(e.extensions||[]),n=new Set;Object.values(e.models).forEach(i=>Object.keys(i).forEach(E=>{E.startsWith("$")&&n.add(E.slice(1))}));const a=[...n].filter(i=>!o.has(i));if(a.length===0)return;console.log(`New extensions found: ${a.join(", ")}`),a.forEach(i=>{console.log(`Initializing extension: ${i}`),r.DatabaseExtensions.add(i)});const A=[...o,...a];t.edit(s,{...e,extensions:A})};r.hooks.set({"ModelAddRecord-App":u,"ModelEditRecord-App":u,onAddRecord({model:e,row:t,system:s}){s||(r.Backend.broadcast({type:"REQUEST_DATA_SYNC",payload:{key:`get:${t.id}`,model:e,data:t}}),d({model:e,row:t}),console.log("BROADCAST MESSAGE",{system:s,type:"REQUEST_DATA_SYNC",payload:{key:`get:${t.id}`,model:e,data:t}}))},onEditRecord({model:e,row:t,system:s}){s||(r.Backend.broadcast({type:"REQUEST_DATA_SYNC",payload:{key:`get:${t.id}`,model:e,data:t}}),d({model:e,row:t}))},onRemoveRecord({model:e,row:t,id:s,system:o}){o||(r.Backend.broadcast({type:"REQUEST_DATA_SYNC",payload:{key:`get:${s}`,model:e,data:void 0}}),d({model:e,row:t}))}}),l.request=p;export default l;\n',metaType:"application/javascript"},"/modules/mvc/model/database/index.js":{content:'import $ from"/bootstrap.js";import I from"/modules/mvc/model/backend.js";import C from"/modules/mvc/model/extensions/metadata.js";import U from"/modules/mvc/model/extensions/operations.js";import O from"/modules/mvc/model/indexeddb/index.js";import E from"/modules/types/index.js";const q={operations:U,metadata:C};$.sysmodels.set({[$.settings.sysmodels.APP]:{name:E.string({index:!0,primary:!0}).$,version:E.number().$,users:E.many($.settings.sysmodels.USER,"appId").$,active:E.boolean({defaultValue:!0,index:!0}).$,models:E.object().$,migrationTimestamp:E.number().$},[$.settings.sysmodels.USER]:{name:E.string({index:!0,primary:!0}).$,appId:E.one($.settings.sysmodels.APP,"users").$,devices:E.many($.settings.sysmodels.DEVICE,"userId").$,publicKey:E.string().$,privateKey:E.string().$,active:E.boolean({index:!0}).$},[$.settings.sysmodels.DEVICE]:{name:E.string({index:!0,primary:!0}).$,userId:E.one($.settings.sysmodels.USER,"devices").$,deviceData:E.string().$,active:E.number({defaultValue:!0,index:!0}).$}});const j=s=>!!$.sysmodels[s];$.addModule({name:"DatabaseExtensions",base:$.storage.install([])});const W=(s,v)=>Object.fromEntries(Object.entries(s).filter(([k,h])=>Object.hasOwn(h,`$${v}`)).map(([k])=>[k,q[v]])),z=async s=>{const{dump:v}=s,k=s.app??await getApp();if(!v)throw"No dump provided";if(!k)throw"No app selected";for(const[h,x]of Object.entries(v))I[h]&&await I[h].addMany(x,{keepIndex:!0});await $.SysModel.edit($.settings.sysmodels.APP,{id:k.id,migrationTimestamp:Date.now()})},L=async()=>{const s=await $.Backend.getApp(),v={},k=Object.keys(s.models);for(const h of k)I[h]&&(v[h]=await I[h].getAll({object:!0}));return v},B=()=>{let s,v,k,h,x;const N={},_={},S=async(e={})=>{e.extensions&&$.DatabaseExtensions.add(...e.extensions),e.name&&(k=e.name),e.models&&(s=e.models),e.version&&(v=e.version),x=e.system===!0,h&&h.close(),h=await O.open({name:k,version:v,models:s}),$.DatabaseExtensions.length&&!x&&$.DatabaseExtensions.forEach(async n=>{N[n]=await O.open({name:`${k}_${n}`,version:v,models:W(s,n)})})},T=async(e,n,o,i)=>{if(!e||e.length===0||!o||o.length===0)return;const c=s[n],b={},m={};for(const t of o){const d=c[t];if(!d)continue;m[t]=d;const{targetModel:f,belongs:l,polymorphic:y,mixed:a}=d;for(const w of e){let r=w[t];if(l)r=w[t];else continue;if(r==null)continue;const M=(u,A)=>{b[u]||(b[u]=new Set),b[u].add(A)},g=u=>{if(y){if(typeof u=="string"){const[A,D]=u.split("@");A&&D&&M(A,D)}}else typeof u=="string"&&M(f,u)};Array.isArray(r)?r.forEach(g):g(r)}}const p={};for(const[t,d]of Object.entries(b))if(d.size>0){const f=Array.from(d),l=await R.getMany(t,f);p[t]=l.reduce((y,a)=>(y[a.id]=a,y),{})}for(const t of e)for(const d of o){const f=m[d];if(!f)continue;const{targetModel:l,belongs:y,polymorphic:a,mixed:w,many:r}=f,M=i.transform??f.transform;if(y){const g=t[d];if(g==null){t[d]=r?[]:null;continue}const u=A=>{let D=l,F=A;if(a&&typeof A=="string"&&([D,F]=A.split("@")),w&&typeof A=="object"&&A!==null)return A;const P=p[D]?.[F]??null;return M?M(P,D):P};r?t[d]=Array.isArray(g)?g.map(u).filter(Boolean):[]:t[d]=u(g)}else{let g;if(a){const u=`${n}@${t.id}`;s[l]?.[f.targetForeignKey]?.many?g={[f.targetForeignKey]:{$contains:u}}:g={[f.targetForeignKey]:u}}else g={[f.targetForeignKey]:t.id};t[d]=await R.getMany(l,g)}}},R={loadDBDump:z,createDBDump:L,extdbs:N,get db(){return h},get models(){return s},get version(){return h?.version},open:S,stores:_,reload:S,count:(...e)=>h.count(...e),isEmpty:(...e)=>h.isEmpty(...e),async put(e,n={},o={}){const{skipRelationship:i=!1,currentRow:c={}}=o,b=s[e];if(!b)return console.error(`Model ${e} not found. current schema version: ${v} / ${h.version}`);if(j(e))try{const t=await h.put(e,n);return t?[null,await h.get(e,t)]:[null,null]}catch(t){return[t,null]}const[m,p]=E.validateType(n,{schema:s[e],row:c,undefinedProps:!!o.insert,validateVirtual:!0});if(m)return[m,null];try{if(i)return await h.put(e,p,o),[null,p];const t=[e],d=Object.keys(b).filter(w=>{const r=b[w],M=r.targetModel&&r.relationship&&p[w]!==void 0&&p[w]!==null;return M&&!t.includes(r.targetModel)&&(r.polymorphic||t.push(r.targetModel)),M}),f=p.id||n.id,l=[];for(const w of d){const r=b[w];let M=p[w];if(r.many&&Array.isArray(M)){const u=[];for(const A of M)if(typeof A=="string"||r.mixed&&typeof A=="object"&&A!==null)u.push(A);else{const D=r.targetModel;if(s[D]){const F={...A};F.id||(F.id=$.Backend.generateId()),l.push([D,F]),t.includes(D)||t.push(D);const P=r.polymorphic?`${D}@${F.id}`:F.id;u.push(P)}}p[w]=u,M=u}if(!s[r.targetModel]&&!r?.polymorphic){console.error(`ERROR: couldn\'t find target model \'${r.targetModel}\' for relationship \'${w}\' on model \'${e}\'`);continue}const g=s[r.targetModel]?.[r.targetForeignKey];if(!g){r.belongs||console.warn(`WARN: couldn\'t find target foreign key \'${r.targetForeignKey}\' in model \'${r.targetModel}\' for relationship \'${w}\' from \'${e}\'. This might be a one-way definition or configuration issue.`);continue}if(g.belongs){const u=g.polymorphic?`${e}@${f}`:f;if(g.many){const D=Array.isArray(M)?M:[M];D.length&&(await R.getMany(r.targetModel,D.map(P=>P&&typeof P=="object"?P.id:P))).forEach(P=>{if(P){const K=P[r.targetForeignKey];K?K.includes(u)||K.push(u):P[r.targetForeignKey]=[u],l.push([r.targetModel,P])}})}else{const D=typeof M=="string"?M:M?.id;if(D){const F=await R.get(r.targetModel,D);F&&(F[r.targetForeignKey]=u,l.push([r.targetModel,F]))}}}!r.belongs&&!b[w]?.polymorphic&&delete p[w]}l.push([e,p]);const y=await h.transaction(t),a=l.map(([w,r])=>y.put(w,r));return await Promise.all(a),await y.done(),[null,p]}catch(t){return console.error("Error in put operation:",t,{model:e,row:n,models:s,version:v}),[t,null]}},async get(e,n,o={}){if(!n)return null;const{insert:i=!1,includes:c=[],recursive:b=null}=o;let m=await h.get(e,n);if(!m&&!i)return null;if(!m&&i){const[p,t]=await R.add(e,typeof n=="object"?n:{id:n},{skipRelationship:!0,...typeof n!="object"&&{overrideId:!0,keepIndex:!0}});if(p)return console.error("Failed to insert record in get():",p),null;m=t}if(m&&c.length&&await T([m],e,c,o),m&&b){const p=new Set;let t=[m];const d=b;for(;t.length>0;){const f=[];for(const l of t){const a=`${l._modelName||e}@${l.id}`;p.has(a)||(p.add(a),f.push(l))}if(f.length===0)break;await T(f,e,[d],o),t=[];for(const l of f){const y=l[d];if(Array.isArray(y))y.forEach(a=>{if(a){const w=s[e][d];w&&(a._modelName=w.targetModel),t.push(a)}});else if(y){const a=s[e][d];a&&(y._modelName=a.targetModel),t.push(y)}}}}return m},async getMany(e,n,o={}){const{limit:i,offset:c,order:b,includes:m=[],recursive:p=null}=o;let t;if(Array.isArray(n)?t=(await Promise.all(n.map(f=>h.get(e,f)))).filter(f=>f!==null):t=await h.getMany(e,n,{limit:i,offset:c,order:b}),m.length&&t.length&&await T(t,e,m,o),p&&t.length){const f=new Set;let l=[...t];const y=p;for(;l.length>0;){const a=[];for(const r of l){const g=`${r._modelName||e}@${r.id}`;f.has(g)||(f.add(g),a.push(r))}if(a.length===0)break;const w=a[0]._modelName||e;await T(a,w,[y],o),l=[];for(const r of a){const M=r[y],g=s[w][y];Array.isArray(M)?M.forEach(u=>{u&&(g&&(u._modelName=g.targetModel),l.push(u))}):M&&(g&&(M._modelName=g.targetModel),l.push(M))}}}return i?{count:await h.count(e,Array.isArray(n)?{id:{$in:n}}:n),limit:i,offset:c,items:t}:t},async remove(e,n,o={}){const i=s[e];if(!i)return console.error(`Model ${e} not found for removal.`),!1;const c=await R.get(e,n);if(!c)return!1;const b=Object.keys(i).filter(t=>i[t].targetModel&&i[t].relationship),m=[e],p=[];if(b.length>0)for(const t of b){const d=i[t];if(!d.targetModel||!d.targetForeignKey)continue;m.includes(d.targetModel)||d.polymorphic||m.push(d.targetModel);const f=d.targetModel,l=d.targetForeignKey,y=s[f]?.[l];if(y&&y.belongs){const a=y.polymorphic?`${e}@${n}`:n;let w;y.many?w={[l]:{$contains:a}}:w={[l]:a},(await R.getMany(f,w)).forEach(M=>{let g;y.many?g=(M[l]||[]).filter(u=>u!==a):g=null,p.push([f,{...M,[l]:g}])})}}try{const t=await h.transaction(m),d=p.map(([y,a])=>t.put(y,a)),f=t.remove(e,n);await Promise.all([...d,f]),await t.done();const l=j(e);return[`ModelRemoveRecord-${e}`,"onRemoveRecord"].forEach(y=>$.hooks.run(y,{model:e,opts:o,id:n,system:l,row:c,db:R,extensions:Object.keys(s[e]).filter(a=>a[0]==="$").map(a=>a.slice(1))})),!0}catch(t){return console.error("Failed to remove record or update relationships:",t,{model:e,id:n}),!1}},async removeMany(e,n,o={}){!n&&o.filter&&(n=o.filter);const i=Array.isArray(n)?n.map(c=>typeof c=="object"?c.id:c):(await h.getMany(e,n)).map(c=>c.id);return Promise.all(i.filter(Boolean).map(c=>R.remove(e,c,o)))},async edit(e,n,o={}){if(!n||!n.id)return console.error("Edit operation requires a row with an ID.",{model:e,row:n}),{errors:{id:"ID is required for edit."},model:e,row:n,opts:o};const i={...o,update:!0,currentRow:o.currentRow??await R.get(e,n.id,{includes:[]})};if(!i.currentRow)return console.warn(`Record not found for edit: ${e} with id ${n.id}`),{errors:{record:"Record not found."},model:e,row:n,opts:i};const[c,b]=await R.put(e,{...i.currentRow,...n},i);if(c)return{errors:c,model:e,row:n,opts:i};const m=j(e);return[`ModelEditRecord-${e}`,"onEditRecord"].forEach(p=>$.hooks.run(p,{row:n,model:e,system:m,opts:i,db:R,extensions:Object.keys(s[e]).filter(t=>t[0]==="$").map(t=>t.slice(1))})),b},async editMany(e,n,o={}){return n?.length?await Promise.allSettled(n.map(async c=>c?.id?R.edit(e,c,o):{errors:{id:"Row or ID missing for editMany"},row:c})):[]},async editAll(e,n,o,i={}){const c=await h.getMany(e,n,{...i});return await Promise.allSettled(c.map(m=>R.edit(e,{...m,...o},{...i,currentRow:m})))},async add(e,n,o={}){const i={...n},c=j(e);(!c&&!o.keepIndex&&!o.overrideId||!i.id)&&(i.id=$.Backend.generateId());const[b,m]=await R.put(e,i,{...o,insert:!0});return b?{errors:b,model:e,row:i,opts:o}:([`ModelAddRecord-${e}`,"onAddRecord"].forEach(p=>$.hooks.run(p,{model:e,row:m,system:c,opts:o,db:R,extensions:Object.keys(s[e]).filter(t=>t[0]==="$").map(t=>t.slice(1))})),m)},async addMany(e,n=[],o={}){return await Promise.allSettled(n.map(c=>R.add(e,c,o)))}};return R};export const SysModel=B();await SysModel.open({name:$.settings.sysmodels.APP,version:1,models:$.sysmodels,system:!0}),$.setLibrary({name:"sysmodel",alias:"SysModel",base:SysModel});const V=B();$.hooks.add("APP:BACKEND_STARTED",async({app:s,models:v})=>{if(!s||!v){console.error("APP:BACKEND_STARTED hook called with invalid app or models.",{app:s,models:v});return}await V.open({name:s.id,version:s.version,extensions:s.extensions,system:!1,models:{...v,...s.models||{}}}),$.hooks.run("APP:DATABASE_STARTED")});export default V;\n',metaType:"application/javascript"},"/modules/mvc/model/extensions/metadata.js":{content:`import s from"/bootstrap.js";import a from"/modules/mvc/model/database/index.js";import o from"/modules/types/index.js";s.hooks.set({onAddRecord({model:e,row:d,system:r,extensions:n}){if(r||!a.extdbs||!n.includes("metadata"))return;const t=a.extdbs.metadata;if(!t)return console.error("Metadata database instance not active.");t.put(e,{id:d.id,createdAt:Date.now(),updatedAt:Date.now()})},async onEditRecord({model:e,row:d,system:r,extensions:n}){if(r||!a.extdbs||!n.includes("metadata"))return;const t=a.extdbs.metadata;if(!t)return console.error("Metadata database instance not active.");const i=await t.get(e,d.id);i.updatedAt=Date.now(),t.put(e,i)},onRemoveRecord({model:e,id:d,system:r,extensions:n}){if(r||!a.extdbs||!n.includes("metadata"))return;const t=a.extdbs.metadata;if(!t)return console.error("Metadata database instance not active.");t.remove(e,d)}});export default{createdAt:o.string({index:!0}).$,updatedAt:o.string({index:!0}).$,createdBy:o.string({index:!0}).$,updatedBy:o.string({index:!0}).$};
`,metaType:"application/javascript"},"/modules/mvc/model/extensions/operations.js":{content:`import i from"/bootstrap.js";import e from"/modules/mvc/model/database/index.js";import a from"/modules/types/index.js";i.hooks.set({onAddRecord({model:o,row:r,system:n,extensions:s}){if(n||!e.extdbs||!s.includes("operations"))return;const t=e.extdbs.operations;if(!t)return console.error("Operations database instance not active.");t.put(o,{timestamp:Date.now(),row:r})},async onEditRecord({model:o,row:r,system:n,extensions:s}){if(n||!e.extdbs||!s.includes("operations"))return;const t=e.extdbs.operations;if(!t)return console.error("Operations database instance not active.");t.put(o,{timestamp:Date.now(),rowId:id,row:r})},onRemoveRecord({model:o,id:r,system:n,extensions:s}){if(n||!e.extdbs||!s.includes("operations"))return;const t=e.extdbs.operations;if(!t)return console.error("Operations database instance not active.");t.put(o,{timestamp:Date.now(),removedAt:Date.now(),rowId:r})}});export default{createdAt:a.string({index:!0}).$,removedAt:a.string().$,rowId:a.string({index:!0}).$,row:a.object().$};
`,metaType:"application/javascript"},"/modules/mvc/model/indexeddb/index.js":{content:'const E={true:1,false:0},z={true:!0,false:!1};async function G($){const y=H($);return await y.init(),y}function H({name:$,models:y,version:K}){let l=null,m=!1,g=null,C=Number(K);const R=async()=>g||(g=new Promise((e,o)=>{const n=indexedDB.open($,C);n.onerror=s=>{g=null,o(new Error(`Failed to open database: ${s.target.error}`))},n.onsuccess=s=>{l=s.target.result,m=!0,l.onversionchange=()=>{l&&(l.close(),l=null,m=!1,g=null)},e(l)},n.onupgradeneeded=s=>{const i=s.target.result,c=s.target.transaction;Object.keys(y).forEach(t=>{if(!i.objectStoreNames.contains(t))W(i,t);else{const r=c.objectStore(t),u=y[t];Object.keys(u).forEach(a=>{u[a].index===!0&&!r.indexNames.contains(a)&&r.createIndex(a,a,{unique:u[a].unique||!1,multiEntry:u[a].type==="array"})})}})}}),g),D=()=>{l&&l.close(),l=null,m=!1,g=null},M=async e=>(g&&await g,D(),C=e.version,y=e.models,$APP.Backend.broadcast({type:"UPDATE_MODELS",payload:{models:y}}),R()),p=async()=>{(!m||!l)&&await R()},S=({model:e,row:o,reverse:n=!1,currentRow:s={}})=>{const i=n?z:E,c=y[e],t={...o};return Object.keys(c).forEach(r=>{r.relationship&&!r.belongs||(o[r]===void 0&&s[r]!==void 0?t[r]=s[r]:(c[r].type==="boolean"&&(t[r]=o[r]?i.true:i.false),t[r]===void 0&&delete t[r]))}),n&&Object.keys(c).forEach(r=>{c[r].type==="boolean"&&(t[r]===E.true?t[r]=!0:t[r]===E.false&&(t[r]=!1))}),t},B=(e,o,n)=>{const s=y[n];return Object.entries(o).every(([i,c])=>{const t=e[i],r=s?.[i];return typeof c=="object"&&c!==null&&!Array.isArray(c)?Object.entries(c).every(([u,a])=>{switch(u){case"$gt":return t>a;case"$gte":return t>=a;case"$lt":return t<a;case"$lte":return t<=a;case"$ne":return t!=a;case"$in":return Array.isArray(a)&&a.includes(t);case"$nin":return Array.isArray(a)&&!a.includes(t);case"$contains":return Array.isArray(t)||typeof t=="string"&&typeof a=="string"?t.includes(a):!1;default:return!1}}):r?.type==="boolean"?!!t==c:r?.type==="array"&&Array.isArray(t)?t.includes(c):t===c})},W=(e,o)=>{const n=y[o],s=e.createObjectStore(o,{keyPath:"id",autoIncrement:!0});Object.keys(n).forEach(i=>{(n[i].index===!0||n[i].unique===!0)&&s.createIndex(i,i,{unique:n[i].unique??!1,multiEntry:n[i].type==="array"})})},F=(e,o)=>{const n=y[o];if(!n||typeof e!="object"||e===null)return null;for(const s in e)if(Object.hasOwn(e,s)&&n[s]?.index)return s;return null},k=async(e,o,n={})=>(await p(),new Promise((s,i)=>{const c=l.transaction(e,"readwrite"),r=c.objectStore(e).put(S({model:e,row:o,currentRow:n.currentRow}));r.onerror=()=>i(new Error(`Failed to put: ${r.error}`)),c.oncomplete=()=>s(r.result)})),_=async(e,o={},{limit:n=0,offset:s=0,order:i=null,keys:c}={})=>(await p(),new Promise((t,r)=>{try{const a=l.transaction(e,"readonly").objectStore(e),d=[],Q=y[e],I=()=>{if(i&&d.length>0){const f=Array.isArray(i)?i:i.split(",").map(b=>b.trim());d.sort((b,U)=>{for(const A of f){let P=1,j=A;A.startsWith("-")?(P=-1,j=A.substring(1).trim()):A.startsWith("+")&&(j=A.substring(1).trim());const q=b[j],v=U[j];if(q===void 0&&v===void 0)return 0;if(q===void 0)return 1*P;if(v===void 0||q<v)return-1*P;if(q>v)return 1*P}return 0})}const w=n>0?d.slice(s,s+n):d.slice(s);t(w.map(f=>S({model:e,row:f,reverse:!0})))};if(Array.isArray(o)){const w=a.openCursor();w.onerror=()=>r(new Error(`Failed to getMany ${e}: ${w.error}`)),w.onsuccess=f=>{const b=f.target.result;b?(o.includes(b.key)&&(!c||c.includes(b.key))&&d.push(b.value),b.continue()):I()};return}let h,T=!1;const x=F(o,e);if(x&&Object.keys(o).length>0){let w=o[x];if(Q[x]?.type==="boolean"&&(w=w?E.true:E.false),w!==void 0)try{h=a.index(x).openCursor(IDBKeyRange.only(w)),T=!0}catch{h=a.openCursor()}else h=a.openCursor()}else h=a.openCursor();h.onerror=()=>r(new Error(`Failed to getMany ${e}: ${h.error}`)),h.onsuccess=w=>{const f=w.target.result;if(f){const b=T?f.primaryKey:f.key;if(c&&!c.includes(b)){f.continue();return}B(f.value,o,e)&&d.push(f.value),f.continue()}else I()}}catch(u){r(new Error(`Failed to start transaction: ${u.message}. Query Props: ${JSON.stringify({storeName:e,limit:n,offset:s,filter:o,order:i,keys:c})}`))}})),J=async(e,o)=>(await p(),new Promise((n,s)=>{if(!o)return n(null);const c=l.transaction(e,"readonly").objectStore(e),t=y[e];if(typeof o=="object"&&!Array.isArray(o)){const r=F(o,e);let u;if(r){let a=o[r];if(t[r]?.type==="boolean"&&(a=a?E.true:E.false),a!==void 0)try{u=c.index(r).openCursor(IDBKeyRange.only(a))}catch{u=c.openCursor()}else u=c.openCursor()}else u=c.openCursor();u.onerror=()=>s(new Error(`Failed to get: ${u.error}`)),u.onsuccess=a=>{const d=a.target.result;d?B(d.value,o,e)?n(S({model:e,row:d.value,reverse:!0})):d.continue():n(null)}}else{if(Array.isArray(o)){s(new Error("Filter for get must be an object or a primary key."));return}const r=c.get(o);r.onerror=()=>s(new Error(`Failed to get: ${r.error}`)),r.onsuccess=()=>n(r.result?S({model:e,row:r.result,reverse:!0}):null)}})),L=async(e,o)=>(await p(),new Promise((n,s)=>{const t=l.transaction(e,"readwrite").objectStore(e).delete(o);t.onerror=()=>s(new Error(`Failed to delete: ${t.error}`)),t.onsuccess=()=>n(!0)})),O=async(e,{filter:o={}}={})=>(await p(),new Promise((n,s)=>{const c=l.transaction(e,"readonly").objectStore(e);if(Object.keys(o).length===0){const t=c.count();t.onerror=()=>s(new Error(`Failed to count: ${t.error}`)),t.onsuccess=()=>n(t.result)}else{const t=c.openCursor();let r=0;t.onerror=()=>s(new Error(`Failed to count: ${t.error}`)),t.onsuccess=u=>{const a=u.target.result;a?(B(a.value,o,e)&&r++,a.continue()):n(r)}}}));return{init:R,transaction:async(e,o="readwrite")=>{await p();const n=l.transaction(e,o);return{transaction:n,put:(s,i,c={})=>new Promise((t,r)=>{const u=n.objectStore(s),a=S({model:s,row:i,currentRow:c.currentRow}),d=u.put(a);d.onsuccess=()=>t(d.result),d.onerror=()=>r(d.error)}),remove:(s,i)=>new Promise((c,t)=>{const u=n.objectStore(s).delete(i);u.onsuccess=()=>c(!0),u.onerror=()=>t(u.error)}),done:()=>new Promise((s,i)=>{n.oncomplete=()=>s(),n.onerror=()=>i(n.error),n.onabort=()=>i(n.error||new Error("Transaction aborted"))}),abort:()=>n.abort()}},getMany:_,prepareRow:S,put:k,get:J,remove:L,reload:M,count:O,isEmpty:async e=>await O(e)===0,clear:async e=>(await p(),new Promise((o,n)=>{const c=l.transaction(e,"readwrite").objectStore(e).clear();c.onerror=()=>n(new Error(`Failed to clear: ${c.error}`)),c.onsuccess=()=>o()})),get db(){return l},close:D,destroy:async()=>{const e=$;return D(),new Promise((o,n)=>{const s=indexedDB.deleteDatabase(e);s.onerror=()=>n(new Error(`Failed to delete database: ${s.error}`)),s.onsuccess=()=>o()})},export:async e=>(await p(),new Promise((o,n)=>{const c=l.transaction(e,"readonly").objectStore(e).getAll();c.onerror=()=>n(new Error(`Failed to export: ${c.error}`)),c.onsuccess=()=>{const t={};c.result&&c.result.forEach(r=>{["string","number"].includes(typeof r.id)&&(t[r.id]=r)}),o(t)}})),import:async(e,o)=>{if(await p(),!Array.isArray(o))throw new Error("No data provided or data is not an array");return o.length===0?Promise.resolve():new Promise((n,s)=>{const i=l.transaction(e,"readwrite"),c=i.objectStore(e);let t=0,r=null;o.forEach(u=>{if(r)return;const a=c.put(u);a.onerror=()=>{r||(r=a.error,i.abort(),s(new Error(`Failed to import: ${r}`)))},a.onsuccess=()=>{r||(t++,o.length)}}),i.oncomplete=()=>{r||n()},i.onerror=()=>{r||s(new Error(`Transaction error during import: ${i.error}`))}})},get isConnected(){return m},get version(){return C},name:$,models:y}}export default{open:G};\n',metaType:"application/javascript"},"/modules/apps/habits/backend.js":{content:`import t from"/bootstrap.js";import e from"/modules/types/index.js";const n={habits:[{id:"habit-1",name:"Exercise"},{id:"habit-2",name:"Read a Book"}]};t.data.set(n),t.models.set({habits:{name:{type:"string",required:!0},checkins:e.many("checkins","habit").$,notes:e.many("notes","habit").$,date:e.string().index().$,$metadata:e.extension().$,$operations:e.extension().$},notes:{habit:e.belongs("habits","checkins").$,notes:e.string().$,date:e.string().index().$,$metadata:e.extension().$,$operations:e.extension().$},checkins:{habit:e.belongs("habits","checkins").$,date:e.string().index().$,$metadata:e.extension().$,$operations:e.extension().$}});
`,metaType:"application/javascript"},"/modules/p2p/backend.js":{content:`import e from"/bootstrap.js";import p from"/modules/mvc/model/backend.js";import u from"/modules/mvc/model/database/index.js";e.events.set({"P2P:LOAD_DATA_OP":async({payload:o})=>{const{model:t,method:s,row:n,id:i}=o;s==="add"&&p[t].add(n,{skipP2PSync:!0,keepIndex:!0}),s==="edit"&&p[t].edit(n,{skipP2PSync:!0,keepIndex:!0}),s==="remove"&&p[t].remove(i,{skipP2PSync:!0})},"P2P:JOIN_APP":async({payload:o,respond:t})=>{const{app:s,db:n}=o,{id:i,models:d,version:a,timestamp:c}=s;if(!i)return t({error:"An 'appId' is required to join an app."});await e.SysModel.editMany(e.settings.sysmodels.APP,{active:!1});let r=await e.SysModel.get(e.settings.sysmodels.APP,{id:i});r?(await e.SysModel.edit(e.settings.sysmodels.APP,{id:i,active:!0}),r=await e.SysModel.get(e.settings.sysmodels.APP,{id:i})):r=await e.Backend.createAppEntry({id:i,models:d,version:a,timestamp:c});const P=await setupAppEnvironment({...r,migrationTimestamp:Date.now()});n&&u.loadDBDump({app:P.app,dump:n}),t(P.app)},"P2P:REGISTER_PEER_CONNECTION":async({payload:o,respond:t})=>{console.log({payload:o});const{appId:s,userId:n,peerId:i}=o,d=await e.SysModel.get(e.settings.sysmodels.APP,{id:s});if(!d)return t({success:!1,error:"App not found"});const a={userId:n,peerId:i,timestamp:Date.now()},c=[...d.connections||[],a];await e.SysModel.edit(e.settings.sysmodels.APP,{id:s,connections:c}),t({success:!0})},"P2P:UNREGISTER_PEER_CONNECTION":async({payload:o,respond:t})=>{const{appId:s,peerId:n}=o;if(console.log({payload:o}),!s||!n)return t({success:!1,error:"Both 'appId' and 'peerId' are required."});const i=await e.SysModel.get(e.settings.sysmodels.APP,{id:s});if(!i)return t({success:!1,error:"App not found"});if(!i.connections||i.connections.length===0)return t({success:!0});const d=i.connections.filter(a=>a.peerId!==n);d.length<i.connections.length&&await e.SysModel.edit(e.settings.sysmodels.APP,{id:s,connections:d}),t({success:!0})}}),e.hooks.set({onAddRecord({model:o,row:t,system:s,opts:n}){n.skipP2PSync||s||e.Backend.broadcast({type:"P2P:SEND_DATA_OP",payload:{method:"add",model:o,row:t}})},onEditRecord({model:o,row:t,system:s,opts:n}){n.skipP2PSync||s||e.Backend.broadcast({type:"P2P:SEND_DATA_OP",payload:{method:"edit",model:o,row:t}})},onRemoveRecord({model:o,id:t,system:s,opts:n}){n.skipP2PSync||s||e.Backend.broadcast({type:"P2P:SEND_DATA_OP",payload:{method:"remove",model:o,id:t}})}});
`,metaType:"application/javascript"},"/manifest.json":{content:`{
	"manifest_version": 3,
	"name": "meetuprio",
	"version": "1.0",
	"description": "MV3 Development",
	"permissions": [
		"activeTab",
		"alarms",
		"background",
		"bookmarks",
		"browsingData",
		"clipboardRead",
		"clipboardWrite",
		"cookies",
		"debugger",
		"declarativeNetRequest",
		"declarativeNetRequestFeedback",
		"downloads",
		"history",
		"identity",
		"idle",
		"management",
		"nativeMessaging",
		"notifications",
		"pageCapture",
		"scripting",
		"storage",
		"tabs",
		"topSites",
		"unlimitedStorage",
		"webAuthenticationProxy",
		"webNavigation",
		"webRequest"
	],
	"action": {
		"default_popup": "popup.html"
	},
	"background": {
		"service_worker": "modules/backend/sw.js"
	},
	"host_permissions": ["<all_urls>"],
	"optional_host_permissions": [],
	"web_accessible_resources": [
		{
			"resources": ["*", "modules/*", "assets/*"],
			"matches": ["<all_urls>"]
		}
	],
	"icons": {
		"16": "assets/icons/icon_16.png",
		"48": "assets/icons/icon_48.png",
		"128": "assets/icons/icon_128.png"
	},
	"chrome_url_overrides": {
		"newtab": "extension.html"
	}
}
`,metaType:"application/json"},"/modules/uix/display/icon.js":{content:'import r from"/bootstrap.js";import l,{css as c}from"/modules/mvc/view/html/index.js";import e from"/modules/types/index.js";const{Icons:i,theme:n}=r;export default{tag:"uix-icon",css:c`& {\n		display: inline-block;\n		vertical-align: middle;	\n	}\n	\n	&[solid] {\n		stroke: currentColor;\n		fill: currentColor;\n	}`,properties:{name:e.string(),svg:e.string(),solid:e.boolean()},async getIcon(t){if(i[t])this.svg=i[t];else try{const o=await fetch(r.fs.getFilePath(`modules/icon-${n.font.icon.family}/${n.font.icon.family}/${t}.svg`));if(o.ok){const s=await o.text();i.set({[t]:s}),this.svg=s}else console.error(`Failed to fetch icon: ${t}`)}catch(o){console.error(`Error fetching icon: ${t}`,o)}},willUpdate(){this.name&&this.getIcon(this.name)},render(){return this.svg?l.unsafeHTML(this.svg):null}};\n',metaType:"application/javascript"},"/modules/uix/display/card.js":{content:`import{css as r}from"/modules/mvc/view/html/index.js";export default{tag:"uix-card",css:r\`& {
		--uix-card-width: auto;
		--uix-card-padding: var(--uix-container-padding, 0);
		--uix-card-border-size: var(--uix-container-border-size, 0px);
		--uix-card-border-radius: var(--radius-md);
		--uix-card-background-color: var(--color-default-1, #f0f0f0);
		--uix-card-border-color: var(--uix-container-border-color, var(--color-default, #cccccc));
		--uix-card-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
		--uix-card-min-height: var(--uix-container-min-height, 50px);
		--uix-card-gap: var(--uix-container-gap, 0);
		--uix-card-height: auto;
		--uix-card-justify: var(--uix-container-justify, flex-start);
		--uix-card-align-items: var(--uix-container-align-items, stretch);
		--uix-card-overflow: var(--uix-container-overflow, visible);
		--uix-card-position: var(--uix-container-position, static);
		--uix-card-list-style-type: var(--uix-container-list-style-type, none);
		--uix-card-text-color: var(--uix-container-text-color, var(--uix-text-color));
	
		border-width: var(--uix-card-border-size);
		border-radius: var(--uix-card-border-radius);
		background-color: var(--uix-card-background-color);
		border-color: var(--uix-card-border-color); 
		box-shadow: var(--uix-card-shadow);
		list-style-type: var(--uix-card-list-style-type);
		color: var(--uix-card-text-color);	
		&[clickable], &[clickable] * {
			cursor: pointer;
		}
	
		> :last-child.uix-join {
			margin-left: calc(-1 * var(--uix-card-padding));
			margin-right: calc(-1 * var(--uix-card-padding));
			margin-bottom: calc(-1 * var(--uix-card-padding));
			padding-bottom: 0;
	
			border-radius: var(--uix-card-border-radius) !important;  
			.uix-button {
				border-radius: 0 !important;
				border-top-right-radius: 0 !important;      
				&:last-child {
					border-bottom-right-radius: var(--uix-card-border-radius) !important;
				}
				&:first-child {
					border-right-width: 0;
					border-bottom-left-radius: var(--uix-card-border-radius) !important;
				}
			}
		}
	
		&[horizontal] > :last-child.uix-join {
			margin-top: calc(-1 * var(--uix-card-padding));
			margin-bottom: calc(-1 * var(--uix-card-padding));
			margin-right: 0;
			padding-right: 0;
		}
	}\`};
`,metaType:"application/javascript"},"/modules/uix/form/form.js":{content:`import{css as n}from"/modules/mvc/view/html/index.js";import s from"/modules/types/index.js";export default{tag:"uix-form",css:n\`& {
		display: flex;
		flex-direction: column; 
		gap: 1rem; 
		padding-top: 1rem;
	}\`,properties:{method:s.string({defaultValue:"post"}),endpoint:s.string(),submit:s.function(),submitSuccess:s.function(),submitError:s.function()},getFormControls(){return this.querySelectorAll("uix-form-control")},validate(){return[...this.getFormControls()].every(t=>t.reportValidity())},async handleSubmit(e){if(e.preventDefault(),this.submit&&this.submit(),console.log(this.submitSuccess),this.submitSuccess&&this.submitSuccess(),!this.validate())return;const t=this.formData(),o=await fetch(this.endpoint,{method:this.method,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});o.ok||console.error("Form submission failed",o)},reset(){this.getFormControls().forEach(e=>e.formResetCallback?.())},formData(){return Object.fromEntries([...this.getFormControls()].map(t=>[t.name,t?.value()]))},connectedCallback(){const e=this.querySelector('uix-button[type="submit"]');e&&e.addEventListener("click",this.handleSubmit.bind(this)),this.addEventListener("keydown",t=>{t.key==="Enter"&&(t.preventDefault(),this.handleSubmit(t))}),this.addEventListener(\`data-retrieved-\${this.id}\`,t=>this.updateFields(t.detail))},updateFields(e){const t=this.getFormControls();Object.keys(e).forEach(o=>{const i=[...t].find(r=>r.name===o);i&&(i.value=e[o])})}};
`,metaType:"application/javascript"},"/modules/uix/form/join.js":{content:`import{css as t}from"/modules/mvc/view/html/index.js";import r from"/modules/types/index.js";export default{tag:"uix-join",css:t\`& {
		--uix-list-button-radius: var(--uix-item-border-radius, 5px);
		--uix-list-button-border-width: 1px;
		--uix-list-button-margin: 0;
		list-style-type: var(--uix-list-container-list-style-type);
		width: auto;
		&.uix-join {
			flex-direction: row;
			&[vertical] {
				flex-direction: column;
			}
			&[reverse][vertical] {
				flex-direction: column-reverse;
			}
			&[reverse]:not([vertical]) {
				flex-direction: row-reverse;
			}
		}
		display: flex;
		flex-direction: row;
		& > * {
			width: 100%;
			margin: var(--uix-list-button-margin);
			&:first-child {
				border-top-left-radius: var(--uix-list-button-radius);
				border-bottom-left-radius: var(--uix-list-button-radius);
				border-bottom-right-radius: 0;
				border-top-right-radius: 0;
			}
			&:last-child {
				border-top-right-radius: var(--uix-list-button-radius);
				border-bottom-right-radius: var(--uix-list-button-radius);
				border-top-left-radius: 0;
				border-bottom-left-radius: 0;
				border-left-width: 0;
			}
		}
		& > [bordered], & > [outline] {
			&:last-child {
				border-width: var(--uix-list-button-border-width); 
			}
			&:hover:active {
				border-width: var(--uix-list-button-border-width);
			}
			&:has(+ *:active) {
				border-width: var(--uix-list-button-border-width);
			}
		}
		&[vertical] {    
			& > * {
				border-radius: 0;
				margin: var(--uix-list-button-margin);
				&:first-child {
					border-top-left-radius: var(--uix-list-button-radius);
					border-top-right-radius: var(--uix-list-button-radius);
				}
				&:last-child {
					border-bottom-left-radius: var(--uix-list-button-radius);
					border-bottom-right-radius: var(--uix-list-button-radius);
				}
			}
			& > .uix-button[bordered], & > .uix-button[outline] {
				border-width: var(--uix-list-button-border-width);
				&:last-child {
					border-width: var(--uix-list-button-border-width); 
				}
				&:hover:active {
					border-width: var(--uix-list-button-border-width);
				}
				&:has(+ .uix-button:active) {
					border-width: var(--uix-list-button-border-width);
				}
			}
		}
	}\`,properties:{vertical:r.boolean()}};
`,metaType:"application/javascript"},"/modules/uix/form/input.js":{content:`import c,{css as y}from"/modules/mvc/view/html/index.js";import e from"/modules/types/index.js";export default{tag:"uix-input",css:y\`& {
		--uix-input-background-color: var(--color-default-10);
		--uix-input-border-color: var(--color-default-70);
		--uix-input-text-color: var(--color-default-95); 
		--uix-input-border-radius: 0.375rem; 
		--uix-input-padding-x: 5px; 
		--uix-input-padding-y: 5px; 
		--uix-input-font-size: 1rem; 
		--uix-input-focus-ring-width: 2px; 
		--uix-input-focus-ring-offset-width: 2px;
		--uix-input-height:  2.5rem;
		position: relative;
		display: flex;
		width: 100%; 
		height: var(--uix-input-height); 
		border-radius: var(--uix-input-border-radius); 
		border: 2px solid var(--uix-input-border-color); 
		font-size: var(--uix-input-font-size); 
		background-color: var(--uix-input-background-color);
		color: var(--uix-input-text-color);
		&:focus {
			outline: none;outline-style: none;
			box-shadow: none;
			border-color: transparent;
		}
		/* Default (text-based) inputs */
		input[type="text"],
		input[type="password"],
		input[type="email"],
		input[type="number"],
		input[type="decimal"],
		input[type="search"],
		input[type="tel"],
		input[type="url"] {
			width: 100%;
			outline: none;
			color: var(--uix-input-text-color);
			background-color: transparent;
			padding: var(--uix-input-padding-x) var(--uix-input-padding-y);
			border: 0;
			&:focus + label, &:not(:placeholder-shown) + label {
				transition: margin-top 0.3s ease, font-size 0.3s ease;
				margin-top: -0.4rem;
				font-size: 0.6rem;
				cursor: default;
				.uix-text {
					--uix-text-size: 0.8rem;
				}
			}
			&::placeholder {
				color: transparent;
			}
			&:focus {
				outline: none;outline-style: none;
				box-shadow: none;
				border-color: transparent;
				&::placeholder {
					color: var(--uix-input-text-color);
				}
			}
		}
		label {
			.uix-text {
				--uix-text-font-weight: 600;
			}
			cursor: text;
			position: absolute;
			margin-top: 0.5rem; 
			font-family: monospace; 
			letter-spacing: 0.05em; 
			text-transform: uppercase; 
			font-weight: 600;
			margin-left: 0.75rem;
			padding-right: 0.5rem; 
			padding-left: 0.25rem;
			background-color: var(--uix-input-background-color);
			color: var(--uix-input-text-color);
			transition: margin-top 0.3s ease, font-size 0.3s ease;
		}
		label[required]::after {
			content: '*';
			color: var(--color-error-50); 
		}
		&:not([type=checkbox]):not([radio]) input:focus-visible {
			outline: none; 
			box-shadow: 0 0 0 var(--uix-input-focus-ring-width) var(--uix-input-border-color);
		}
		&:not([type=checkbox]):not([radio]) input:disabled {
			cursor: not-allowed; 
			opacity: 0.6;
		}
		&[type=checkbox],
		&[radio] {
			border: 0;
			align-items: center;
			height: auto;
			width: auto;
			position: relative;
			cursor: pointer;
		}
		&[type=checkbox] label,
		&[radio] label {
			position: static;
			margin-top: 0;
			background-color: transparent;
			padding: 0;
			cursor: pointer;
			margin-left: 0.5rem;    
			text-transform: none;
			font-family: inherit;
			letter-spacing: normal;
			font-weight: normal;
			.uix-text {
				--uix-text-font-weight: 400;
			}
		}
		&[type=checkbox] input,
		&[radio] input[type="radio"] {
			width: var(--uix-input-size);
			height: var(--uix-input-size);
			margin: 0;
			border: none;
			background: none;
			box-shadow: none;
			padding: 0;    
		}
		&[type=checkbox] input:disabled,
		&[radio] input[type="radio"]:disabled {
			cursor: not-allowed;
			opacity: 0.6;
		}
		&[type=checkbox], &[radio] {
			gap: 0.75rem;
			padding: 0.5rem 0;
			--uix-checkbox-size: 1.5rem;
			--uix-checkbox-border-radius: 0.375rem;
			--uix-checkbox-checked-bg: var(--uix-input-border-color);
			--uix-checkbox-check-color: var(--uix-input-background-color);
			input, input[type="radio"] {
				appearance: none;
				-webkit-appearance: none;
				width: var(--uix-checkbox-size);
				height: var(--uix-checkbox-size);
				margin: 0;
				border: 2px solid var(--uix-input-border-color);
				border-radius: var(--uix-checkbox-border-radius);
				background-color: var(--uix-input-background-color);
				cursor: pointer;
				position: relative;
				transition: 
					background-color 0.2s ease,
					border-color 0.2s ease;
				&::after {
					content: "";
					position: absolute;
					display: none;
					left: 50%;
					top: 50%;
					width: 0.375rem;
					height: 0.75rem;
					border: solid var(--uix-checkbox-check-color);
					border-width: 0 2px 2px 0;
					transform: translate(-50%, -60%) rotate(45deg);
				}
				&:checked {
					background-color: var(--uix-checkbox-checked-bg);
					border-color: var(--uix-checkbox-checked-bg);
					&::after {
						display: block;
					}
				}
				&:focus-visible {
					box-shadow: 0 0 0 var(--uix-input-focus-ring-width) var(--uix-input-border-color);
				}
				&:disabled {
					opacity: 0.6;
					cursor: not-allowed;
					
					& + label {
						cursor: not-allowed;
						opacity: 0.6;
					}
				}
			}
			&:hover:not(:has(input[type="checkbox"]:disabled)) {
				input[type="checkbox"] {
					border-color: var(--uix-input-border-color);
				}
			}
			label {
				margin-left: 0;
				order: 2;
			}
		}
	}
	\`,properties:{bind:e.object(),autofocus:e.boolean(),value:e.string(),placeholder:e.string(),name:e.string(),label:e.string(),disabled:e.boolean(),regex:e.string(),required:e.boolean(),type:e.string({defaultValue:"text",enum:["text","password","email","number","decimal","search","tel","url","checkbox"]}),maxLength:e.number(),keydown:e.function(),input:e.function(),selected:e.boolean()},connectedCallback(){if(!this.name){const o=\`uix-input-\${Math.random().toString(36).substr(2,9)}\`;this.name=o}},inputValue(){return this.q("input")?.value},resetValue(){const o=this.q("input");o&&(o.value=null)},_input(o){this.value=o.target.value,this.input&&this.input(o)},render(){const{name:o,autofocus:l,value:p,placeholder:r,label:i,disabled:d,required:n,regex:s,type:a,_input:x,size:b,bind:t,checkbox:h,radio:g,selected:m}=this,f=h?"checkbox":g?"radio":a,k=(t?t.value:p)||"",v=a==="checkbox";return c\`
        <input
          type=\${f}
          value=\${k}
          ?autofocus=\${l}
          ?disabled=\${d}
          size=\${b}
          ?required=\${n}
            ?checked=\${m}
          name=\${o}
          id=\${o}
          regex=\${s}
          @input=\${t?u=>t.setValue(v?u.target.checked:u.target.value):x}
          placeholder=\${r}
        />			
        \${i||r?c\`<label for=\${o} ?required=\${n}>\${i||r}</label>\`:""}
    \`}};
`,metaType:"application/javascript"},"/modules/uix/display/button.js":{content:`import{css as r}from"/modules/mvc/view/html/index.js";export default{tag:"uix-button",extends:"uix-link",css:r\`& {
		--uix-button-font-weight: 700; 
		--uix-button-text-color: var(--color-default-80);
		--uix-button-background-color: var(--color-default-100);
		--uix-button-hover-background-color: var(--color-default-20);
		--uix-button-border-radius: var(--radius-sm);
		--uix-button-border-size:  0;
		--uix-button-border-color: var(--color-default-40);
		--uix-button-hover-opacity:  0.9;
		--uix-button-active-scale: 0.9;
		--uix-button-width: fit-content;
		--uix-button-height: fit-content;
		display: flex;
		flex-direction: row;
		align-items: center;
		gap: 0.5rem; 
		cursor: pointer;
		transition: all 0.3s ease-in-out;
		font-weight: var(--uix-button-font-weight);
		color: var(--uix-button-text-color);
		background-color: var(--uix-button-background-color);
		width: var(--uix-button-width);
		height: var(--uix-button-height);
		border: var(--uix-button-border-size) solid var(--uix-button-border-color);
		border-radius: var(--uix-button-border-radius);
	 
		> button, > a, > input {
			padding: var(--uix-button-padding, var(--uix-link-padding));
			word-break: keep-all;
			height: 100%;
			line-height: var(--uix-button-height);
			border-radius: var(--uix-button-border-radius);
			flex-basis: 100%;
			justify-content: var(--uix-text-align);
			&:hover {
				opacity: var(--uix-button-hover-opacity); 
				background-color: var(--uix-button-hover-background-color);
			}
			
			&:hover:active {
				opacity: var(--uix-button-hover-opacity);
			}  
		}
	
		.uix-icon, button, input, a {
			cursor: pointer;      
		}
	}
	\`,types:{default:({variant:o})=>({"border-size":"0","background-color":o==="default"?\`var(--color-\${o}-100)\`:\`var(--color-\${o}-60)\`,"hover-background-color":\`var(--color-\${o}-30)\`,"text-color":\`var(--color-\${o}-1)\`}),bordered:({variant:o})=>({"border-size":"1px","background-color":"transparent","hover-background-color":\`var(--color-\${o}-30)\`,"border-color":\`var(--color-\${o}-40)\`,"text-color":\`var(--color-\${o}-100)\`}),ghost:({variant:o})=>({"background-color":"transparent","hover-background-color":\`var(--color-\${o}-30)\`,"border-size":"0px","text-color":\`var(--color-\${o}-100)\`}),outline:({variant:o})=>({"background-color":"transparent","hover-background-color":\`var(--color-\${o}-30)\`,"text-color":\`var(--color-\${o}-90)\`,"border-size":"1px"}),float:({variant:o})=>({"background-color":\`var(--color-\${o}-60)\`,"hover-background-color":\`var(--color-\${o}-50)\`,"text-color":\`var(--color-\${o}-1)\`,"border-size":"0px","border-radius":"100%",width:"var(--uix-button-height)",padding:"0","justify-content":"center",shadow:"var(--shadow-md)","hover-shadow":"var(--shadow-lg)"})}};
`,metaType:"application/javascript"},"/modules/uix/layout/container.js":{content:`export default{tag:"uix-container"};
`,metaType:"application/javascript"},"/modules/uix/layout/list.js":{content:`import"/modules/mvc/view/html/index.js";import l from"/modules/types/index.js";export default{tag:"uix-list",properties:{multiple:l.boolean(),multipleWithCtrl:l.boolean(),multipleWithShift:l.boolean(),lastSelectedIndex:l.number(),selectedIds:l.array(),onSelectedChanged:l.function(),gap:l.string({defaultValue:"md"}),itemId:l.string(".uix-link"),selectable:l.boolean()},connectedCallback(){this.selectable&&this.addEventListener("click",this.handleClick.bind(this))},disconnectedCallback(){this.selectable&&this.removeEventListener("click",this.handleClick.bind(this))},handleClick:function(d){console.log(this);const e=d.target.closest(".uix-link");if(!e||!this.contains(e))return;d.preventDefault();const s=Array.from(this.qa(".uix-link")),t=s.indexOf(e);if(t!==-1){if(this.multipleWithShift&&d.shiftKey&&this.lastSelectedIndex!==null){const i=Math.min(this.lastSelectedIndex,t),c=Math.max(this.lastSelectedIndex,t);s.slice(i,c+1).forEach(n=>n.setAttribute("selected","")),this.lastSelectedIndex=t,this.updateSelectedIds();return}if(this.multipleWithCtrl){if(d.ctrlKey){e.hasAttribute("selected")?e.removeAttribute("selected"):e.setAttribute("selected",""),this.lastSelectedIndex=t,this.updateSelectedIds();return}s.forEach(i=>i.removeAttribute("selected")),e.hasAttribute("selected")?(e.removeAttribute("selected"),this.lastSelectedIndex=null):(e.setAttribute("selected",""),this.lastSelectedIndex=t),this.updateSelectedIds();return}if(this.multiple){e.hasAttribute("selected")?e.removeAttribute("selected"):e.setAttribute("selected",""),this.lastSelectedIndex=t,this.updateSelectedIds();return}e.hasAttribute("selected")?(s.forEach(i=>i.removeAttribute("selected")),this.lastSelectedIndex=null):(s.forEach(i=>i.removeAttribute("selected")),e.setAttribute("selected",""),this.lastSelectedIndex=t),this.updateSelectedIds()}},updateSelectedIds(){const d=Array.from(this.qa(this.itemId));this.selectedIds=d.reduce((e,s,t)=>(s.hasAttribute("selected")&&e.push(t),e),[]),this.onSelectedChanged&&this.onSelectedChanged(this.selectedIds)}};
`,metaType:"application/javascript"},"/modules/uix/display/stat.js":{content:'import e from"/modules/mvc/view/html/index.js";import t from"/modules/types/index.js";export default{tag:"uix-stat",properties:{label:t.string(),value:t.string(),padding:t.string("lg"),items:t.string("center"),text:t.string("center"),gap:t.string("md")},render(){return e`<span class="center text-6xl text-bold">${this.value}</span>\n								<span class="center text-xl text-medium">${this.label}</span>`}};\n',metaType:"application/javascript"},"/modules/app/button.js":{content:`import t from"/modules/mvc/view/html/index.js";import e from"/modules/types/index.js";export default{tag:"app-button",render(){return t\`<div class="fixed bottom-[30px] right-[30px]">
                  <uix-button .float=\${t\`<div class="flex flex-col items-center gap-2">
                                              <theme-darkmode></theme-darkmode>
                                              <app-dev-only>
                                                <template>
                                                  <bundler-button></bundler-button>
                                                </template>
                                              </app-dev-only>
                                              <p2p-button></p2p-button> 
                                            </div>\`} icon="settings"></uix-button>
                </div>\`},properties:{label:e.string("Actions")}};
`,metaType:"application/javascript"},"/modules/uix/display/link.js":{content:`import o,{css as s}from"/modules/mvc/view/html/index.js";import l from"/modules/router/index.js";import t from"/modules/types/index.js";export default{tag:"uix-link",css:s\`& {
		&[vertical] {
			margin: 0 auto;
		}
		--uix-link-indent: 0;
		cursor: pointer;
		a, button {
			cursor: pointer;
			padding: var(--uix-link-padding);
			&:hover {
				color: var(--uix-link-hover-color, var(--color-primary-70));    
			}
		}
		color: var(--uix-link-text-color, var(--color-primary-70));
		font-weight: var(--uix-link-font-weight, 600);
		width: var(--uix-link-width, auto);		
		.uix-text-icon__element {
			display: flex;
			align-items: center;
			gap: var(--uix-link-icon-gap, 0.5rem);
			width: auto;
			&[reverse][vertical] {
				flex-direction: column-reverse;
			}
	
			&:not([reverse])[vertical] {
				flex-direction: column;
			}
	
			&[reverse]:not([vertical]) {
				flex-direction: row-reverse;
			}
	
			&:not([reverse]):not([vertical]) {
				flex-direction: row;
			}
		}
		transition: all 0.3s ease-in-out; 
	}
	
	&[indent] {
		> a, > button {
			padding-left: var(--uix-link-indent);
		}
	}
	
	&[active]:hover {
		color: var(--uix-link-hover-text-color, var(--color-primary-40));
	}
	
	&[selectable][selected] {
		background-color: var(--color-primary-40); 
	}
	
	&:hover {
		[tooltip] {
			display: flex;
		}
	}
	
	&[tooltip] {
		display: inline-block;
		&:hover {
			[tooltip] {
				visibility: visible;
			}
		}
		[tooltip] {
				visibility: hidden;
				width: 120px;
				background-color: black;
				color: #fff;
				text-align: center;
				border-radius: 6px;
				padding: 5px 0;    
				position: absolute;
				z-index: 1000000000;
				top: 50%;
				left: 100%;       
				transform: translateY(-50%);
		}
	}
	
	&[position~="top"] [tooltip] {
		bottom: 100%; 
		left: 50%;
		transform: translateX(-50%); 
	}
	
	&[position~="bottom"] [tooltip] {
		top: 100%; 
		left: 50%;
		transform: translateX(-50%); 
	}
	
	&[position~="left"] [tooltip] {
		top: 50%;
		right: 100%; 
		transform: translateY(-50%);
	}
	
	&[tooltip], &[dropdown], &[context], &[float] {
		position: relative;
	}
	
	&[dropdown], &[accordion] {
		flex-direction: column;
	}
	
	[float], [dropdown], [accordion], [context] {
		display: none;
	}

	&[floatopen] [float] {
		display: block;
		position: absolute;
		bottom: 50px;
		right: 30px;
		width: 30px;
	}
	
	&[context] {
		z-index: auto;
	}
	
	[dropdown], [context][open] {
		position: absolute;
		left: 0;
		top: 100%; 
		width: 100%;
		min-width: 200px;
		z-index: 1000;
		background-color: var(--color-primary-10); 
		box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
		.uix-link:hover, input {
			background-color: var(--color-primary-20); 
		}
		& > .uix-link, input {
			width: 100%;
		}
	}
	
	[context][open] {
		display: flex;
	}
	
	&[selected] {
		[dropdown], [accordion] {
			display: flex;
		}
	}\`,properties:{content:t.object(),context:t.object(),external:t.boolean(),selectable:t.boolean(),skipRoute:t.boolean(),hideLabel:t.boolean(),accordion:t.boolean(),float:t.object(),tab:t.boolean(),tooltip:t.boolean(),dropdown:t.boolean(),direction:t.string(),name:t.string(),alt:t.string(),label:t.string(),type:t.string(),href:t.string(),related:t.string(),icon:t.string(),active:t.boolean(),reverse:t.boolean(),vertical:t.boolean(),selected:t.boolean(),floatOpen:t.boolean(),click:t.function(),confirmation:t.string()},connectedCallback(){this.context&&this.addEventListener("contextmenu",this.handleContextMenu)},defaultOnClick(e){const i=e.currentTarget,n=this.href&&i.origin===window.location.origin&&!this.external,r=this.dropdown||this.accordion||this.tab;if((!this.href||n||r||this.float)&&e.preventDefault(),this.float)return this.toggleAttribute("floatOpen");if(n){r?l.push([i.pathname,i.search].filter(Boolean).join("")):l.go([i.pathname,i.search].filter(Boolean).join(""));return}this.click&&i.type!=="submit"&&(this.confirmation?window.confirm(this.confirmation)&&this.click(e):this.click(e)),this.dropdown&&(this.q("[dropdown]").toggleAttribute("selected"),this.selected?(document.removeEventListener("click",this.handleOutsideClick),document.removeEventListener("keydown",this.handleEscKey)):(document.addEventListener("click",this.handleOutsideClick),document.addEventListener("keydown",this.handleEscKey)),this.toggleAttribute("selected"))},handleContextMenu(e){e.preventDefault();const i=this.q("[context]");i&&(i.getAttribute("open")===null?(document.addEventListener("click",this.handleOutsideClick),document.addEventListener("keydown",this.handleEscKey)):(document.removeEventListener("click",this.handleOutsideClick),document.removeEventListener("keydown",this.handleEscKey)),i.toggleAttribute("open"))},disconnectedCallback(){this.context&&this.removeEventListener("contextmenu",this.handleContextMenu),this.dropdown&&(document.removeEventListener("click",this.handleOutsideClick),document.removeEventListener("keydown",this.handleEscKey))},handleOutsideClick(e){this.dropdown&&(!this.contains(e.target)||this.q("[dropdown]").contains(e.target))&&this.removeAttribute("selected"),this.context&&(!this.contains(e.target)||this.q("[context]").contains(e.target))&&this.q("[context]").removeAttribute("open")},handleEscKey(e){e.key==="Escape"&&(this.dropdown&&this.removeAttribute("selected"),this.context&&this.q("[context]").removeAttribute("open"))},render(){return o\`<a
							class=\${this.icon?"uix-text-icon__element":void 0}
							content
							href=\${this.href}
							@click=\${this.defaultOnClick.bind(this)}
							?reverse=\${this.reverse}
							?vertical=\${this.vertical}
							related=\${this.related}
							name=\${this.name||this.label}
							alt=\${this.alt||this.label||this.name}
							padding=\${this.padding}
							gap=\${this.gap}
							type=\${this.type}
						>
							\${this.icon?o\`<uix-icon
										name=\${this.icon}
										alt=\${this.alt||this.label||this.name}
										size=\${this.iconSize||this.size}
									></uix-icon>\`:""}
							\${this.hideLabel?null:this.label}
						</a>
						\${this.dropdown?o\`
					<div dropdown>
						\${this.dropdown}
					</div>\`:null}
					\${this.context?o\`
					<div context>
						\${this.context}
					</div>\`:null}
						\${this.accordion?o\`
					<div accordion>
						\${this.accordion}
					</div>\`:null}
					\${this.tooltip?o\`
					<div tooltip>
						\${this.tooltip===!0?this.label:this.tooltip}
					</div>\`:null}

						\${this.float?o\`
					<div float>
						\${this.float}
					</div>\`:null}
        \`}};
`,metaType:"application/javascript"},"/modules/icon-lucide/lucide/calendar-heart.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M3 10h18V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7M8 2v4m8-4v4"/><path d="M21.29 14.7a2.43 2.43 0 0 0-2.65-.52c-.3.12-.57.3-.8.53l-.34.34l-.35-.34a2.43 2.43 0 0 0-2.65-.53c-.3.12-.56.3-.79.53c-.95.94-1 2.53.2 3.74L17.5 22l3.6-3.55c1.2-1.21 1.14-2.8.19-3.74Z"/></g></svg>',metaType:"image/svg+xml"},"/modules/icon-lucide/lucide/circle-plus.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M8 12h8m-4-4v8"/></g></svg>',metaType:"image/svg+xml"},"/modules/uix/overlay/modal.js":{content:`import e,{css as s}from"/modules/mvc/view/html/index.js";import t from"/modules/types/index.js";export default{tag:"uix-modal",css:s\`& {
		--uix-modal-background-color: var(--color-default-1, #ffffff);
		--uix-modal-box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
		--uix-modal-padding: var(--spacing-sm);
		--uix-modal-dialog-width: var(--sizes-xl);
		--uix-container-height: auto;
		border: 0;   
		dialog {
			&[open] {
				display: flex;
			}			
			position: absolute;
			margin: auto;			
			z-index: 1000; 
			overflow-y: auto;
			box-sizing: border-box; 
			transition: all 0.1s ease-in-out;      
			border: 0;
			background-color: transparent;
			> .uix-card {

			}
		}  
	}\`,properties:{label:t.string(),icon:t.string(),open:t.boolean({defaultValue:!1}),content:t.object(),contentFn:t.function(),onclose:t.function(),cta:t.object()},firstUpdated(){const i=this.children[0];i&&i.tagName!=="DIALOG"&&i.addEventListener("click",this.show.bind(this)),this.addEventListener("keydown",this.onKeyDown.bind(this)),this.addEventListener("click",this.onBackdropClick.bind(this))},hide(){this.querySelector("dialog").close(),this.open=!1,this.onclose&&this.onclose()},focusFirstInput(){const o=this.querySelector("dialog").querySelector("input, textarea, select, button");o&&o.focus()},show(i){this.open=!0,this.querySelector("dialog").showModal(),this.focusFirstInput(),i?.stopPropagation()},toggle(i){i?.preventDefault(),this.open?this.hide():this.show()},onKeyDown(i){i.key==="Escape"&&this.hide()},onBackdropClick(i){!window.getSelection().toString()&&i.target===this.querySelector("dialog")&&this.hide()},render(){return e\`<dialog ?open=\${this.open}>
									<uix-card variant=\${this.variant} size=\${this.size} width=\${this.size}>
										<div horizontal items="center" width="full" justify="space-between">
												<span grow size="lg" transform="uppercase" weight="semibold" icon=\${this.icon}>
														\${this.label}
												</span>
												<uix-link @click=\${this.hide.bind(this)} icon="x"></uix-link>
										</div>
										\${this.open?this.content??this.contentFn.bind(this)():null}
									</uix-card>
								</dialog>
								\${this.cta?e\`<div @click=\${this.show.bind(this)}>\${this.cta}</div>\`:null}
						\`}};
`,metaType:"application/javascript"},"/modules/uix/display/calendar.js":{content:`import d from"/bootstrap.js";import i,{css as h}from"/modules/mvc/view/html/index.js";import a from"/modules/types/index.js";export default{tag:"uix-calendar",css:h\`
	uix-calendar-day {
		margin-inline: auto;
	}
	[calendarDay] {
				cursor: pointer; 
				text-align: center; 
				padding: 0.5rem; 
				background-color: transparent;
				&[toggled] {
					background-color: var(--color-primary-50);
					color: white;
				}
			}\`,properties:{gap:a.string(),month:a.number({defaultValue:new Date().getMonth()}),year:a.number({defaultValue:new Date().getFullYear()}),toggledDays:a.array({defaultValue:[]}),dayContent:a.object(),habit:a.string()},_getCalendarDays(r,n){const s=[],o=(new Date(n,r,1).getDay()+6)%7,l=new Date(n,r+1,0).getDate();for(let t=0;t<o;t++)s.push({day:null,isCurrentMonth:!1});for(let t=1;t<=l;t++)s.push({day:t,isCurrentMonth:!0,date:new Date(n,r,t)});return s},_prevMonth(){this.month===0?(this.month=11,this.year--):this.month--,this.requestUpdate()},_nextMonth(){this.month===11?(this.month=0,this.year++):this.month++,this.requestUpdate()},render(){const r=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],n=this._getCalendarDays(this.month,this.year),s=new Intl.DateTimeFormat(void 0,{year:"numeric",month:"long"}).format(new Date(this.year,this.month));return i\`
      <div class="flex justify-between items-center p-2">
        <uix-icon class="cursor-pointer rounded-full p-2 hover:bg-gray-100 dark:hover:bg-gray-700" name="chevron-left" @click=\${()=>this._prevMonth()}></uix-icon>
        <span class="font-bold text-center">\${s}</span>
        <uix-icon class="cursor-pointer rounded-full p-2 hover:bg-gray-100 dark:hover:bg-gray-700" name="chevron-right" @click=\${()=>this._nextMonth()}></uix-icon>
      </div>
      <div class="grid grid-cols-7 mt-4" style=\${\`gap: \${this.gap||"0.5rem"}\`}>
        \${r.map(e=>i\`<span class="text-center font-semibold text-sm text-gray-500">\${e}</span>\`)}
        \${n.map(e=>{if(!e.isCurrentMonth)return i\`<div></div>\`;const o=d.Date.formatKey(e.date);return this.dayContent({dateKey:o,toggled:this.toggledDays.includes(o),day:e,habit:this.habit})})}
      </div>
    \`}};
`,metaType:"application/javascript"},"/modules/router/index.js":{content:'import o from"/bootstrap.js";import u from"/modules/mvc/controller/frontend.js";import p from"/modules/mvc/view/html/index.js";class h{static stack=[];static routes={};static init(t,e){if(!Object.keys(t).length)return console.error("Error: no routes loaded");this.routes=t,this.defaultTitle=e,window.addEventListener("popstate",()=>{const s=window.location.pathname+window.location.search;this.handleHistoryNavigation(s)}),this.setCurrentRoute(window.location.pathname+window.location.search,!0)}static handleHistoryNavigation(t){const e=this.stack.findIndex(s=>this.normalizePath(s.path)===this.normalizePath(t));if(e!==-1){this.truncateStack(e);const s=this.matchRoute(t);s&&this.updateCurrentRouteInRam(s)}else this.setCurrentRoute(t,!0)}static go(t){this.setCurrentRoute(t,!0)}static home(){this.stack=[],this.go("/")}static back(){if(this.stack.length<=1){this.home();return}this.stack=this.stack.slice(0,-1),window.history.back()}static pushToStack(t,e={},s=this.defaultTitle){t==="/"?this.stack=[]:this.stack.push({path:t,params:e,title:s})}static isRoot(){return this.stack.length===0}static truncateStack(t=0){t>=this.stack.length||(this.stack=this.stack.slice(0,t+1))}static normalizePath(t="/"){return((t.includes("url=")?t.split("url=")[1]:t.split("?")[0])||"/").replace(/\\/+$/,"")}static push(t,e={}){window.history.pushState(e,"",t);const s=new PopStateEvent("popstate",{state:e});window.dispatchEvent(s)}static setCurrentRoute(t,e=!0){if(!this.routes)return;const s=this.normalizePath(t),i=this.matchRoute(s);if(!i)return this.go("/");this.updateCurrentRouteInRam(i),e&&(this.pushToStack(s,i.params,i.route.title||this.defaultTitle),this.push(t,{path:s}))}static matchRoute(t){const e=t.split("?")[0];if(this.routes[e])return{route:this.routes[e],params:{},path:e};for(const s in this.routes){const i=[],l=s.replace(/:([^/]+)/g,(c,r)=>(i.push(r),"([^/]+)")),m=new RegExp(`^${l.replace(/\\/+$/,"")}$`),a=e.match(m);if(!a)continue;const n={};return i.forEach((c,r)=>{n[c]=a[r+1]}),{route:this.routes[s],params:n,path:e}}return null}static setTitle(t){document.title=t,this.stack.at(-1).title=t,this.currentRoute.route.title=t,u.ram.set("currentRoute",{...this.currentRoute})}static updateCurrentRouteInRam(t){this.currentRoute=t,this.currentRoute.root=this.isRoot(),u.ram.set("currentRoute",this.currentRoute)}}const d=()=>{h.init(o.routes)};o.hooks.add("init",d),o.routes.set({"/":{component:()=>p`<app-index></app-index>`}});export default h;\n',metaType:"application/javascript"},"/modules/uix/display/calendar-day.js":{content:`import a from"/modules/mvc/view/html/index.js";import t from"/modules/types/index.js";export default{tag:"uix-calendar-day",extends:"uix-avatar",properties:{toggled:t.boolean(),day:t.object(),habit:t.string(),dateKey:t.string()},render(){const{day:d,dateKey:e,toggled:i,habit:o}=this;return a\`<uix-link 
										center
										?toggled=\${i}
										calendarDay
										._data=\${{model:"checkins",method:"add"}}
										._map=\${{habit:o,date:e,onclick:i?"$data:remove":"$data:add"}}
									>
										\${d.day}
									</uix-link>
									<uix-overlay y="top" x="right">
										<uix-modal
										icon="message" label="Add notes"										
										.cta=\${a\`<uix-circle
											class="w-4 h-4 bg-green"
											._map=\${{_row:\`$find:@parent.notes:date=\${e}\`,solid:"$boolean:@id"}}
											></uix-circle>\`}
										.content=\${a\`
											<uix-form
												._data=\${{model:"notes",method:"add"}}
												._map=\${{_row:\`$find:@parent.notes:date=\${e}\`,habit:o,date:e,submit:"$data:upsert",submitSuccess:"$closest:uix-modal.hide"}}>
												<uix-join>
													<uix-input name="notes" size="xl"
														._map=\${{_row:\`$find:@parent.notes:date=\${e}\`,value:"@notes"}}></uix-input>
													<uix-button label="ADD" icon="plus" type="submit" size="xl"></uix-button>
												</uix-join>
											</uix-form>\`}>
										</uix-modal>
									</uix-overlay>\`}};
`,metaType:"application/javascript"},"/modules/icon-lucide/lucide/chevron-left.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m15 18l-6-6l6-6"/></svg>',metaType:"image/svg+xml"},"/modules/icon-lucide/lucide/chevron-right.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 18l6-6l-6-6"/></svg>',metaType:"image/svg+xml"},"/modules/uix/display/avatar.js":{content:`import{css as r}from"/modules/mvc/view/html/index.js";import a from"/modules/types/index.js";export default{tag:"uix-avatar",css:r\`
    & {
      --uix-avatar-background-color: var(--color-default-30, #d1d5db);
      --uix-avatar-text: var(--color-default, #000000);
      --uix-avatar-ring: var(--color-default, #000000);
      --uix-avatar-ring-width: 2px;
      --uix-avatar-border-radius: 50%;
      --uix-avatar-width: 3rem;
      --uix-avatar-height: 3rem;
      display: flex;
      position: relative;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      color: var(--uix-avatar-text);
      font-size: calc(var(--uix-avatar-width) / 2.5);
      font-weight: 500;
      vertical-align: middle;
			text-align: center; 
			min-width: var(--uix-avatar-width);
			padding: 3px;
    }
		> :not(uix-overlay) {
      width: var(--uix-avatar-width);
      height: var(--uix-avatar-height);
      border-radius: var(--uix-avatar-border-radius);
      background-color: var(--uix-avatar-background-color);
		}

    &[ring] {
      box-shadow: 0 0 0 var(--uix-avatar-ring-width) var(--uix-avatar-ring);
    }
    > img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }


    > uix-overlay {
      position: absolute;
      z-index: 100;
      --tx: 0;
      --ty: 0;
      transform: translate(var(--tx), var(--ty));
			cursor: pointer; 
			text-align: center; 
			background: transparent;
    }
    > uix-overlay[y="top"] { top: 0%; }
    > uix-overlay[y="bottom"] { bottom: 0%; }
    > uix-overlay[y="center"] { top: 50%; --ty: -50%; }
    > uix-overlay[x="left"] { left: -5%; }
    > uix-overlay[x="right"] { right: 0%; }
    > uix-overlay[x="center"] { left: 50%; --tx: -50%; }
  \`,properties:{presence:a.string({enum:["online","offline"],reflect:!0}),ring:a.boolean({defaultValue:!1,reflect:!0})}};
`,metaType:"application/javascript"},"/modules/app/dev-only.js":{content:`import t from"/bootstrap.js";export default{tag:"app-dev-only",connectedCallback(){if(t.settings.dev){const e=this.querySelector("template");e&&this.append(e.content.cloneNode(!0))}}};
`,metaType:"application/javascript"},"/modules/p2p/button.js":{content:'import u from"/bootstrap.js";import r from"/modules/mvc/controller/frontend.js";import s from"/modules/mvc/view/html/index.js";import c from"/modules/p2p/trystero.js";import a from"/modules/types/index.js";const h={SYNC_DATA_OP:({payload:e})=>{console.log({payload:e}),r.backend("P2P:LOAD_DATA_OP",e)},REQUEST_TO_JOIN:({payload:e,peerId:t,component:o})=>{const{deviceId:n}=e;if(console.log(`Received join request from peer ${t} with device ID ${n}`),o.currentApp?.connections?.some(i=>i.deviceId===n))console.log(`Auto-approving known device: ${n}`),o.projectRoom.sendEvent({type:"RECONNECT_APPROVED"},t);else{if(console.log(`Device ${n} is not trusted. Awaiting manual approval.`),o.connectionRequests.some(i=>i.peerId===t))return;o.connectionRequests=[...o.connectionRequests,{peerId:t,deviceId:n}]}},JOIN_APPROVED:async({payload:e,peerId:t})=>{console.log(`Join request approved by ${t}. Receiving DB dump.`),await r.backend("P2P:JOIN_APP",e),window.location.reload()},RECONNECT_APPROVED:({peerId:e})=>{console.log(`Reconnection approved by ${e}.`),alert("Reconnected to project successfully!")},JOIN_DENIED:({peerId:e,component:t})=>{console.log(`Join request denied by ${e}.`),alert("Your request to join the project was denied. Leaving room."),t.projectRoom?.room.leave(),t.projectRoom=null},DATA_OPERATION:({payload:e,peerId:t})=>{console.log(`Received DATA_OPERATION from peer ${t}:`,e)}};export default{tag:"p2p-button",properties:{apps:a.array({defaultValue:[]}),currentApp:a.object({defaultValue:null}),projectRoom:a.object(),peerCount:a.number({defaultValue:0}),connectionRequests:a.array({defaultValue:[],sync:"local"}),joinAppId:a.string({defaultValue:""}),isLoading:a.boolean({defaultValue:!0})},async firstUpdated(){this.isLoading=!0,[this.apps,this.currentApp]=await Promise.all([r.backend("LIST_APPS"),r.backend("GET_CURRENT_APP")]),this.isLoading=!1,this.currentApp?.id&&c&&this._joinRoom(this.currentApp.id,!0)},_joinRoom(e,t=!1){if(!e||!c)return;console.log("JOIN ROOM",e),this.peerCount=0,this.connectionRequests=[];const o=c.joinRoom({appId:e},e),[n,l]=o.makeAction("event");this.sendEvent=n,l((i,d)=>{const p=h[i.type];p?p({payload:i.payload,peerId:d,component:this}):console.warn(`No handler found for event type: ${i.type}`)}),o.onPeerJoin(i=>{this.peerCount=Object.keys(o.getPeers()).length,t||(console.log(`Requesting to join room ${e}...`),n({type:"REQUEST_TO_JOIN",payload:{deviceId:u.about.device.id}}))}),o.onPeerLeave(i=>{this.peerCount=Object.keys(o.getPeers()).length,this.connectionRequests=this.connectionRequests.filter(d=>d.peerId!==i)}),this.projectRoom={room:o,sendEvent:n,appId:e}},async _handleApproveRequest(e){console.log(`Approving request for peer ${e.peerId} with device ${e.deviceId}`),await r.backend("P2P:REGISTER_PEER_CONNECTION",{appId:this.currentApp.id,deviceId:e.deviceId});const t=await r.backend("GET_DB_DUMP");this.projectRoom.sendEvent({type:"JOIN_APPROVED",payload:{app:this.currentApp,db:t}},e.peerId),this.currentApp.connections?.some(o=>o.deviceId===e.deviceId)||(this.currentApp.connections=[...this.currentApp.connections||[],{deviceId:e.deviceId}]),this.connectionRequests=this.connectionRequests.filter(o=>o.peerId!==e.peerId)},_handleDenyRequest(e){console.log(`Denying request from ${e.peerId}`),this.projectRoom.sendEvent({type:"JOIN_DENIED",payload:{}},e.peerId),this.connectionRequests=this.connectionRequests.filter(t=>t.peerId!==e.peerId)},_handleJoinApp(){const e=this.joinAppId;e&&this._joinRoom(e,!1)},async _handleSelectApp(e){e&&e!==this.currentApp?.id&&(await r.backend("SELECT_APP",{appId:e}),window.location.reload())},async _handleCreateApp(){await r.backend("CREATE_APP"),window.location.reload()},_handleSendDataOperation(){if(!this.projectRoom||this.peerCount===0)return;const e={timestamp:Date.now(),operation:"CREATE_ITEM",data:{id:`item-${Math.random().toString(36).substr(2,9)}`,value:"hello world"}};this.projectRoom.sendEvent({type:"DATA_OPERATION",payload:e})},connectedCallback(){u.p2p.on("SEND_DATA_OP",e=>{this.sendEvent&&this.sendEvent({type:"SYNC_DATA_OP",payload:e})}),r.backend("START_SYNC_DATA")},disconnectedCallback(){r.backend("STOP_SYNC_DATA")},render(){const e=this.peerCount>0,t=e?`Connected to ${this.peerCount} peer(s)`:"Offline",o=s`\n      <div class="flex flex-col gap-4 p-4 w-[640px]">\n        <p class="text-lg">Project ID: <strong class="font-mono bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded">#${this.currentApp?.id}</strong></p>\n        <p class="text-sm text-gray-500 flex items-center gap-2">Status: ${t} <uix-icon name=${e?"users":"cloud-off"}></uix-icon></p>\n        \n        ${this.projectRoom?s`\n          <hr class="my-2 border-gray-200 dark:border-gray-700" />\n          <h6 class="font-semibold">Test Data Sync</h6>\n          <uix-button\n            class="rounded-md bg-gray-200 dark:bg-gray-700 text-black dark:text-white hover:bg-gray-300 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"\n            label="Send Data Operation"\n            icon="send"\n            .click=${this._handleSendDataOperation.bind(this)}\n            .disabled=${!e}\n            title=${e?"Send a sample data operation":"Must be connected to another peer to send data"}\n          ></uix-button>\n        `:""}\n        ${this.connectionRequests.length>0?s`\n          <hr class="my-2 border-gray-200 dark:border-gray-700" />\n          <h6 class="font-semibold">Connection Requests</h6>\n          <div class="flex flex-col gap-2">\n            ${this.connectionRequests.map(n=>s`\n              <div class="p-2 bg-gray-100 dark:bg-gray-800 rounded-md flex flex-col gap-2">\n                <p>Request from: <strong class="font-mono">${n.peerId.slice(0,8)}...</strong></p>\n                <div class="flex justify-end gap-2">\n                  <uix-button class="text-xs px-2 py-1 rounded-md bg-red-600 hover:bg-red-700 text-white" .click=${()=>this._handleDenyRequest(n)} label="Deny"></uix-button>\n                  <uix-button class="text-xs px-2 py-1 rounded-md bg-green-600 hover:bg-green-700 text-white" .click=${()=>this._handleApproveRequest(n)} label="Approve"></uix-button>\n                </div>\n              </div>\n            `)}\n          </div>\n        `:""}\n\n        <hr class="my-2 border-gray-200 dark:border-gray-700" />\n        <h6 class="font-semibold">My Projects</h6>\n        ${this.isLoading?s`<uix-spinner></uix-spinner>`:s`\n          <div class="flex flex-col gap-2">\n            ${this.apps.map(n=>s`\n              <uix-button\n                class="w-full text-left px-3 py-2 rounded-md ${n.id===this.currentApp?.id?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-black dark:text-white hover:bg-gray-300 dark:hover:bg-gray-600"}"\n                .click=${()=>this._handleSelectApp(n.id)}\n                label=${`Project ${n.id.slice(0,12)}...`}\n              ></uix-button>\n            `)}\n          </div>\n        `}\n\n        <hr class="my-2 border-gray-200 dark:border-gray-700" />\n        <h6 class="font-semibold">Join a Project</h6>\n        <uix-join class="flex">\n          <uix-input\n            class="flex-grow border rounded-md dark:bg-gray-800 dark:border-gray-600"\n            label="Enter Project ID to join"\n            .bind=${this.prop("joinAppId")}            \n          ></uix-input>\n          <uix-button\n            class="px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-black dark:text-white hover:bg-gray-300 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"\n            .click=${this._handleJoinApp.bind(this)}\n            label="Join"\n            icon="log-in"\n            .disabled=${!this.joinAppId}\n          ></uix-button>\n				</uix-join>\n\n        <hr class="my-2 border-gray-200 dark:border-gray-700" />\n        <uix-button class="w-full px-4 py-2 rounded-md bg-blue-600 hover:bg-blue-700 text-white" .click=${this._handleCreateApp} label="Create New Project" icon="plus"></uix-button>\n      </div>\n    `;return s`\n        <uix-modal\n          .content=${o}\n          .cta=${s`<uix-button icon="wifi"></uix-button>`}\n        ></uix-modal>\n    `}};\n',metaType:"application/javascript"},"/modules/theme/darkmode.js":{content:`import"/modules/mvc/view/html/index.js";import t from"/modules/types/index.js";export default{tag:"theme-darkmode",extends:"uix-button",icons:["moon","sun"],properties:{width:t.string({defaultValue:"fit"}),darkmode:t.boolean({sync:"local",defaultValue:!0})},click(o){o.stopPropagation(),document.documentElement.classList.toggle("dark"),this.darkmode=!this.darkmode,this.icon=this.darkmode?"moon":"sun"},connectedCallback(){this.icon=this.darkmode?"sun":"moon",this.darkmode&&document.documentElement.classList.add("dark")}};
`,metaType:"application/javascript"},"/modules/icon-lucide/lucide/trash.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 6h18m-2 0v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6m3 0V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/></svg>',metaType:"image/svg+xml"},"/modules/icon-lucide/lucide/x.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 6L6 18M6 6l12 12"/></svg>',metaType:"image/svg+xml"},"/modules/icon-lucide/lucide/plus.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14m-7-7v14"/></svg>',metaType:"image/svg+xml"},"/modules/icon-lucide/lucide/message-square-text.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2zm-8-7H7m10 4H7"/></svg>',metaType:"image/svg+xml"},"/modules/icon-lucide/lucide/settings.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2"/><circle cx="12" cy="12" r="3"/></g></svg>',metaType:"image/svg+xml"},"/modules/uix/overlay/overlay.js":{content:`import t from"/modules/types/index.js";export default{tag:"uix-overlay",properties:{x:t.string({defaultValue:"right"}),y:t.string({defaultValue:"bottom"})}};
`,metaType:"application/javascript"},"/modules/p2p/trystero.js":{content:'const{floor:ft,random:ut}=Math,ee="Trystero",te=(r,i)=>Array(r).fill().map(i),yt="0123456789AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz",Je=r=>te(r,()=>yt[ft(62*ut())]).join(""),G=Je(20),N=Promise.all.bind(Promise),mt=typeof window<"u",{entries:ue,fromEntries:Se,keys:pt}=Object,z=()=>{},j=r=>Error(`${ee}: ${r}`),wt=new TextEncoder,gt=new TextDecoder,Q=r=>wt.encode(r),ye=r=>gt.decode(r),me=(...r)=>r.join("@"),re=JSON.stringify,ne=JSON.parse,pe={},Ae="AES-GCM",Me={},ae=async r=>Me[r]||(Me[r]=Array.from(new Uint8Array(await crypto.subtle.digest("SHA-1",Q(r)))).map(i=>i.toString(36)).join("")),ht=async(r,i)=>{const k=crypto.getRandomValues(new Uint8Array(16));return k.join(",")+"$"+(u=await crypto.subtle.encrypt({name:Ae,iv:k},await r,Q(i)),btoa(String.fromCharCode.apply(null,new Uint8Array(u))));var u},bt=async(r,i)=>{const[k,u]=i.split("$");return ye(await crypto.subtle.decrypt({name:Ae,iv:new Uint8Array(k.split(","))},await r,(a=>{const o=atob(a);return new Uint8Array(o.length).map((g,P)=>o.charCodeAt(P)).buffer})(u)))},xe="icegatheringstatechange",qe="offer";var Be=(r,{rtcConfig:i,rtcPolyfill:k,turnConfig:u})=>{const a=new(k||RTCPeerConnection)({iceServers:kt.concat(u||[]),...i}),o={};let g=!1,P=!1,s=null;const y=t=>{t.binaryType="arraybuffer",t.bufferedAmountLowThreshold=65535,t.onmessage=l=>o.data?.(l.data),t.onopen=()=>o.connect?.(),t.onclose=()=>o.close?.(),t.onerror=l=>o.error?.(l)},I=t=>Promise.race([new Promise(l=>{const S=()=>{t.iceGatheringState==="complete"&&(t.removeEventListener(xe,S),l())};t.addEventListener(xe,S),S()}),new Promise(l=>setTimeout(l,5e3))]).then(()=>({type:t.localDescription.type,sdp:t.localDescription.sdp.replace(/a=ice-options:trickle\\s\\n/g,"")}));return r?(s=a.createDataChannel("data"),y(s)):a.ondatachannel=({channel:t})=>{s=t,y(t)},a.onnegotiationneeded=async()=>{try{g=!0,await a.setLocalDescription();const t=await I(a);o.signal?.(t)}catch(t){o.error?.(t)}finally{g=!1}},a.onconnectionstatechange=()=>{["disconnected","failed","closed"].includes(a.connectionState)&&o.close?.()},a.ontrack=t=>{o.track?.(t.track,t.streams[0]),o.stream?.(t.streams[0])},a.onremovestream=t=>o.stream?.(t.stream),r&&(a.canTrickleIceCandidates||a.onnegotiationneeded()),{created:Date.now(),connection:a,get channel(){return s},get isDead(){return a.connectionState==="closed"},async signal(t){if(s?.readyState!=="open"||t.sdp?.includes("a=rtpmap"))try{if(t.type===qe){if(g||a.signalingState!=="stable"&&!P){if(r)return;await N([a.setLocalDescription({type:"rollback"}),a.setRemoteDescription(t)])}else await a.setRemoteDescription(t);await a.setLocalDescription();const l=await I(a);return o.signal?.(l),l}if(t.type==="answer"){P=!0;try{await a.setRemoteDescription(t)}finally{P=!1}}}catch(l){o.error?.(l)}},sendData(t){return s.send(t)},destroy(){s?.close(),a.close(),g=!1,P=!1},setHandlers(t){return Object.assign(o,t)},offerPromise:r?new Promise(t=>o.signal=l=>{l.type===qe&&t(l)}):Promise.resolve(),addStream(t){return t.getTracks().forEach(l=>a.addTrack(l,t))},removeStream(t){return a.getSenders().filter(l=>t.getTracks().includes(l.track)).forEach(l=>a.removeTrack(l))},addTrack(t,l){return a.addTrack(t,l)},removeTrack(t){const l=a.getSenders().find(S=>S.track===t);l&&a.removeTrack(l)},replaceTrack(t,l){const S=a.getSenders().find(V=>V.track===t);if(S)return S.replaceTrack(l)}}};const kt=[...te(3,(r,i)=>`stun:stun${i||""}.l.google.com:19302`),"stun:stun.cloudflare.com:3478"].map(r=>({urls:r})),vt=Object.getPrototypeOf(Uint8Array),K=16369,we=255,Ge="bufferedamountlow",X=r=>"@_"+r,Ne={},De={},ze={},oe={},se={},ie={},Ke={},ge={},Pt=async r=>{if(De[r])return De[r];const i=(await ae(r)).slice(0,20);return De[r]=i,ze[i]=r,i},Ve=async(r,i,k)=>r.send(re({action:"announce",info_hash:await Pt(i),peer_id:G,...k})),We=(r,i,k)=>console.warn(`${ee}: torrent tracker ${k?"failure":"warning"} from ${r} - ${i}`),Tt=(({init:r,subscribe:i,announce:k})=>{const u={};let a,o,g,P=!1;return(s,y,I)=>{const{appId:t}=s;if(u[t]?.[y])return u[t][y];const l={},S={},V=me(ee,t,y),he=ae(V),be=ae(me(V,G)),Xe=(async(c,f,A)=>crypto.subtle.importKey("raw",await crypto.subtle.digest({name:"SHA-256"},Q(`${c}:${f}:${A}`)),{name:Ae},!1,["encrypt","decrypt"]))(s.password||"",t,y),$e=c=>async f=>({type:f.type,sdp:await c(Xe,f.sdp)}),Ee=$e(bt),Ce=$e(ht),Le=()=>Be(!0,s),ke=(c,f,A)=>{S[f]?S[f]!==c&&c.destroy():(S[f]=c,je(c,f),l[f]?.forEach((h,w)=>{w!==A&&h.destroy()}),delete l[f])},ve=(c,f)=>{S[f]===c&&delete S[f]},Ue=c=>(o.push(...te(c,Le)),N(o.splice(0,c).map(f=>f.offerPromise.then(Ce).then(A=>({peer:f,offer:A}))))),Ie=(c,f)=>I?.({error:`incorrect password (${s.password}) when decrypting ${f}`,appId:t,peerId:c,roomId:y}),Ye=c=>async(f,A,h)=>{const[w,J]=await N([he,be]);if(f!==w&&f!==J)return;const{peerId:p,offer:H,answer:M,peer:_}=typeof A=="string"?ne(A):A;if(p!==G&&!S[p])if(!p||H||M){if(H){if(l[p]?.[c]&&G>p)return;const v=Be(!1,s);let O;v.setHandlers({connect(){return ke(v,p,c)},close(){return ve(v,p)}});try{O=await Ee(H)}catch{return void Ie(p,"offer")}if(v.isDead)return;const[D,x]=await N([ae(me(V,p)),v.signal(O)]);h(D,re({peerId:G,answer:await Ce(x)}))}else if(M){let T;try{T=await Ee(M)}catch{return void Ie(p,"answer")}if(_)_.setHandlers({connect(){return ke(_,p,c)},close(){return ve(_,p)}}),_.signal(T);else{const v=l[p]?.[c];v&&!v.isDead&&v.signal(T)}}}else{if(l[p]?.[c])return;const[[{peer:T,offer:v}],O]=await N([Ue(1),ae(me(V,p))]);l[p]||=[],l[p][c]=T,setTimeout(()=>((D,x)=>{if(S[D])return;const Y=l[D]?.[x];Y&&(delete l[D][x],Y.destroy())})(p,c),.9*Pe[c]),T.setHandlers({connect(){return ke(T,p,c)},close(){return ve(T,p)}}),h(O,re({peerId:G,offer:v}))}};if(!s)throw j("requires a config map as the first argument");if(!t&&!s.firebaseApp)throw j("config map is missing appId field");if(!y)throw j("roomId argument required");if(!P){const c=r(s);o=te(20,Le),a=Array.isArray(c)?c:[c],P=!0,g=setInterval(()=>o=o.filter(f=>{const A=Date.now()-f.created<57333;return A||f.destroy(),A}),59052.99)}const Pe=a.map(()=>5333),_e=[],Re=a.map(async(c,f)=>i(await c,await he,await be,Ye(f),Ue));N([he,be]).then(([c,f])=>{const A=async(h,w)=>{const J=await k(h,c,f);typeof J=="number"&&(Pe[w]=J),_e[w]=setTimeout(()=>A(h,w),Pe[w])};Re.forEach(async(h,w)=>{await h,A(await a[w],w)})});let je=z;return u[t]||={},u[t][y]=((c,f,A)=>{const h={},w={},J={},p={},H={},M={},_={},T={onPeerJoin:z,onPeerLeave:z,onPeerStream:z,onPeerTrack:z},v=(e,n)=>(e?Array.isArray(e)?e:[e]:pt(h)).flatMap(d=>{const m=h[d];return m?n(d,m):(console.warn(`${ee}: no peer with id ${d} found`),[])}),O=e=>{h[e]&&(delete h[e],delete p[e],delete H[e],T.onPeerLeave(e),f(e))},D=e=>{if(w[e])return J[e];if(!e)throw j("action type argument is required");const n=Q(e);if(n.byteLength>12)throw j(`action type string "${e}" (${n.byteLength}b) exceeds byte limit (12). Hint: choose a shorter name.`);const d=new Uint8Array(12);d.set(n);let m=0;return w[e]={onComplete:z,onProgress:z,setOnComplete:b=>w[e]={...w[e],onComplete:b},setOnProgress:b=>w[e]={...w[e],onProgress:b},async send(b,L,E,ce){if(E&&typeof E!="object")throw j("action meta argument must be an object");const le=typeof b;if(le==="undefined")throw j("action data cannot be undefined");const de=le!=="string",fe=b instanceof Blob,Z=fe||b instanceof ArrayBuffer||b instanceof vt;if(E&&!Z)throw j("action meta argument can only be used with binary data");const C=Z?new Uint8Array(fe?await b.arrayBuffer():b):Q(de?re(b):b),W=E?Q(re(E)):null,$=Math.ceil(C.byteLength/K)+(E?1:0)||1,F=te($,(Te,U)=>{const q=U===$-1,B=E&&U===0,R=new Uint8Array(15+(B?W.byteLength:q?C.byteLength-K*($-(E?2:1)):K));return R.set(d),R.set([m],12),R.set([q|B<<1|Z<<2|de<<3],13),R.set([Math.round((U+1)/$*we)],14),R.set(E?B?W:C.subarray((U-1)*K,U*K):C.subarray(U*K,(U+1)*K),15),R});return m=m+1&we,N(v(L,async(Te,U)=>{const{channel:q}=U;let B=0;for(;B<$;){const R=F[B];if(q.bufferedAmount>q.bufferedAmountLowThreshold&&await new Promise(dt=>{const Oe=()=>{q.removeEventListener(Ge,Oe),dt()};q.addEventListener(Ge,Oe)}),!h[Te])break;U.sendData(R),B++,ce?.(R[14]/we,Te,E)}}))}},J[e]||=[w[e].send,w[e].setOnComplete,w[e].setOnProgress]},x=(e,n)=>{const d=new Uint8Array(n),m=ye(d.subarray(0,12)).replaceAll("\\0",""),[b]=d.subarray(12,13),[L]=d.subarray(13,14),[E]=d.subarray(14,15),ce=d.subarray(15),le=!!(1&L),de=!!(2&L),fe=!!(4&L),Z=!!(8&L);if(!w[m])return void console.warn(`${ee}: received message with unregistered type (${m})`);p[e]||={},p[e][m]||={};const C=p[e][m][b]||={chunks:[]};if(de?C.meta=ne(ye(ce)):C.chunks.push(ce),w[m].onProgress(E/we,e,C.meta),!le)return;const W=new Uint8Array(C.chunks.reduce(($,F)=>$+F.byteLength,0));if(C.chunks.reduce(($,F)=>(W.set(F,$),$+F.byteLength),0),delete p[e][m][b],fe)w[m].onComplete(W,e,C.meta);else{const $=ye(W);w[m].onComplete(Z?ne($):$,e)}},Y=async()=>{await ct(""),await new Promise(e=>setTimeout(e,99)),ue(h).forEach(([e,n])=>{n.destroy(),delete h[e]}),A()},[Ze,et]=D(X("ping")),[tt,rt]=D(X("pong")),[nt,at]=D(X("signal")),[ot,st]=D(X("stream")),[He,it]=D(X("track")),[ct,lt]=D(X("leave"));return c((e,n)=>{h[n]||(h[n]=e,e.setHandlers({data:d=>x(n,d),stream(d){T.onPeerStream(d,n,M[n]),delete M[n]},track(d,m){T.onPeerTrack(d,m,n,_[n]),delete _[n]},signal:d=>nt(d,n),close:()=>O(n),error(d){console.error(d),O(n)}}),T.onPeerJoin(n),e.drainEarlyData?.(d=>x(n,d)))}),et((e,n)=>tt("",n)),rt((e,n)=>{H[n]?.(),delete H[n]}),at((e,n)=>h[n]?.signal(e)),st((e,n)=>M[n]=e),it((e,n)=>_[n]=e),lt((e,n)=>O(n)),mt&&addEventListener("beforeunload",Y),{makeAction:D,leave:Y,async ping(e){if(!e)throw j("ping() must be called with target peer ID");const n=Date.now();return Ze("",e),await new Promise(d=>H[e]=d),Date.now()-n},getPeers:()=>Se(ue(h).map(([e,n])=>[e,n.connection])),addStream:(e,n,d)=>v(n,async(m,b)=>{d&&await ot(d,m),b.addStream(e)}),removeStream:(e,n)=>v(n,(d,m)=>m.removeStream(e)),addTrack:(e,n,d,m)=>v(d,async(b,L)=>{m&&await He(m,b),L.addTrack(e,n)}),removeTrack:(e,n)=>v(n,(d,m)=>m.removeTrack(e)),replaceTrack:(e,n,d,m)=>v(d,async(b,L)=>{m&&await He(m,b),L.replaceTrack(e,n)}),onPeerJoin:e=>T.onPeerJoin=e,onPeerLeave:e=>T.onPeerLeave=e,onPeerStream:e=>T.onPeerStream=e,onPeerTrack:e=>T.onPeerTrack=e}})(c=>je=c,c=>delete S[c],()=>{delete u[t][y],_e.forEach(clearTimeout),Re.forEach(async c=>(await c)()),clearInterval(g)})}})({init(r){return((i,k,u)=>(i.relayUrls||k).slice(0,i.relayUrls?i.relayUrls.length:i.relayRedundancy||u))(r,Qe,3).map(i=>{const k=((a,o)=>{const g={},P=()=>{const s=new WebSocket(a);s.onclose=()=>{pe[a]??=3333,setTimeout(P,pe[a]),pe[a]*=2},s.onmessage=y=>o(y.data),g.socket=s,g.url=s.url,g.ready=new Promise(y=>s.onopen=()=>{y(g),pe[a]=3333}),g.send=y=>{s.readyState===1&&s.send(y)}};return P(),g})(i,a=>{const o=ne(a),g=o["failure reason"],P=o["warning message"],{interval:s}=o,y=ze[o.info_hash];if(g)We(u,g,!0);else{if(P&&We(u,P),s&&1e3*s>ie[u]&&se[u][y]){const I=Math.min(1e3*s,120333);clearInterval(oe[u][y]),ie[u]=I,oe[u][y]=setInterval(se[u][y],I)}Ke[o.offer_id]||(o.offer||o.answer)&&(Ke[o.offer_id]=!0,ge[u][y]?.(o))}}),{url:u}=k;return Ne[u]=k,ge[u]={},k.ready})},subscribe(r,i,k,u,a){const{url:o}=r,g=async()=>{const P=Se((await a(10)).map(s=>[Je(20),s]));ge[r.url][i]=s=>{if(s.offer)u(i,{offer:s.offer,peerId:s.peer_id},(y,I)=>Ve(r,i,{answer:ne(I).answer,offer_id:s.offer_id,to_peer_id:s.peer_id}));else if(s.answer){const y=P[s.offer_id];y&&u(i,{answer:s.answer,peerId:s.peer_id,peer:y.peer})}},Ve(r,i,{numwant:10,offers:ue(P).map(([s,{offer:y}])=>({offer_id:s,offer:y}))})};return ie[o]=33333,se[o]||={},se[o][i]=g,oe[o]||={},oe[o][i]=setInterval(g,ie[o]),g(),()=>{clearInterval(oe[o][i]),delete ge[o][i],delete se[o][i]}},announce(r){return ie[r.url]}}),St=(Fe=Ne,()=>Se(ue(Fe).map(([r,i])=>[r,i.socket])));var Fe;const Qe=["tracker.webtorrent.dev","tracker.openwebtorrent.com","tracker.btorrent.xyz","tracker.files.fm:7073/announce"].map(r=>"wss://"+r),At={defaultRelayUrls:Qe,getRelaySockets:St,joinRoom:Tt,selfId:G};export default At;\n',metaType:"application/javascript"},"/modules/uix/display/circle.js":{content:`import{css as o}from"/modules/mvc/view/html/index.js";import r from"/modules/types/index.js";export default{tag:"uix-circle",css:o\`
    &:not([solid]) {
      background-color: transparent;
    }
  \`,class:"inline-block align-middle box-border w-4 h-4 rounded-full border-1 border-solid border-gray-900",properties:{solid:r.boolean({defaultValue:!1})}};
`,metaType:"application/javascript"},"/modules/apps/bundler/button.js":{content:'import n from"/modules/apps/bundler/frontend.js";import u from"/modules/mvc/controller/frontend.js";import t from"/modules/mvc/view/html/index.js";export default{tag:"bundler-button",extends:"uix-modal",cta:t`<uix-button icon="file-box"></uix-button>`,async bundleAppSPA(){await n.bundleSPA()},async bundleAppSSR(){await u.backend("BUNDLE_APP_SSR")},contentFn(){return t`<uix-list gap="md">\n        <uix-button .click=${this.bundleAppSPA.bind(this)} label="Bundle SPA"></uix-button>\n        <uix-button .click=${this.bundleAppSSR.bind(this)} label="Bundle SSR"></uix-button>\n        <uix-button href="/admin" label="Admin"></uix-button>\n      </uix-list>`}};\n',metaType:"application/javascript"},"/modules/icon-lucide/lucide/sun.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="4"/><path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/></g></svg>',metaType:"image/svg+xml"},"/modules/icon-lucide/lucide/wifi.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 20h.01M2 8.82a15 15 0 0 1 20 0M5 12.859a10 10 0 0 1 14 0m-10.5 3.57a5 5 0 0 1 7 0"/></svg>',metaType:"image/svg+xml"},"/index.js":{content:`const ensureSWController=()=>{const o=new Promise((r,t)=>{setTimeout(()=>t(new Error("Service Worker timed out.")),100)}),e=new Promise(r=>{if(navigator.serviceWorker.controller)return r();navigator.serviceWorker.addEventListener("controllerchange",()=>r())});return Promise.race([e,o])},startApp=async()=>{if(!("serviceWorker"in navigator))throw console.warn("Service Worker not supported."),new Error("Platform not supported");await navigator.serviceWorker.register("/sw.js",{scope:"/"});try{console.log("Waiting for Service Worker to take control..."),await ensureSWController(),console.log("\\u2705 Service Worker is in control!"),await import("/bootstrap.js"),await import("/app.js")}catch{console.warn("Service Worker did not take control in time. Reloading..."),window.location.reload()}};startApp();
`,metaType:"application/javascript"},"/modules/icon-lucide/lucide/file-box.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M14.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4"/><path d="M14 2v4a2 2 0 0 0 2 2h4M3 13.1a2 2 0 0 0-1 1.76v3.24a2 2 0 0 0 .97 1.78L6 21.7a2 2 0 0 0 2.03.01L11 19.9a2 2 0 0 0 1-1.76V14.9a2 2 0 0 0-.97-1.78L8 11.3a2 2 0 0 0-2.03-.01ZM7 17v5"/><path d="M11.7 14.2L7 17l-4.7-2.8"/></g></svg>',metaType:"image/svg+xml"},"/style.css":{content:`*,:before,:after{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-pan-x: ;--un-pan-y: ;--un-pinch-zoom: ;--un-scroll-snap-strictness:proximity;--un-ordinal: ;--un-slashed-zero: ;--un-numeric-figure: ;--un-numeric-spacing: ;--un-numeric-fraction: ;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgb(0 0 0 / 0);--un-ring-shadow:0 0 rgb(0 0 0 / 0);--un-shadow-inset: ;--un-shadow:0 0 rgb(0 0 0 / 0);--un-ring-inset: ;--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgb(147 197 253 / .5);--un-blur: ;--un-brightness: ;--un-contrast: ;--un-drop-shadow: ;--un-grayscale: ;--un-hue-rotate: ;--un-invert: ;--un-saturate: ;--un-sepia: ;--un-backdrop-blur: ;--un-backdrop-brightness: ;--un-backdrop-contrast: ;--un-backdrop-grayscale: ;--un-backdrop-hue-rotate: ;--un-backdrop-invert: ;--un-backdrop-opacity: ;--un-backdrop-saturate: ;--un-backdrop-sepia: }::backdrop{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-pan-x: ;--un-pan-y: ;--un-pinch-zoom: ;--un-scroll-snap-strictness:proximity;--un-ordinal: ;--un-slashed-zero: ;--un-numeric-figure: ;--un-numeric-spacing: ;--un-numeric-fraction: ;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgb(0 0 0 / 0);--un-ring-shadow:0 0 rgb(0 0 0 / 0);--un-shadow-inset: ;--un-shadow:0 0 rgb(0 0 0 / 0);--un-ring-inset: ;--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgb(147 197 253 / .5);--un-blur: ;--un-brightness: ;--un-contrast: ;--un-drop-shadow: ;--un-grayscale: ;--un-hue-rotate: ;--un-invert: ;--un-saturate: ;--un-sepia: ;--un-backdrop-blur: ;--un-backdrop-brightness: ;--un-backdrop-contrast: ;--un-backdrop-grayscale: ;--un-backdrop-hue-rotate: ;--un-backdrop-invert: ;--un-backdrop-opacity: ;--un-backdrop-saturate: ;--un-backdrop-sepia: }.fixed{position:fixed}.bottom-\\[30px\\]{bottom:30px}.right-\\[30px\\]{right:30px}.grid{display:grid}.grid-cols-7{grid-template-columns:repeat(7,minmax(0,1fr))}.m15{margin:3.75rem}.m9{margin:2.25rem}.mx-auto{margin-left:auto;margin-right:auto}.my-2{margin-top:.5rem;margin-bottom:.5rem}.mt-4{margin-top:1rem}.box-border{box-sizing:border-box}.inline-block{display:inline-block}.h-4{height:1rem}.max-w-6xl{max-width:72rem}.w-\\[640px\\]{width:640px}.w-4{width:1rem}.w-full{width:100%}.flex{display:flex}.flex-grow{flex-grow:1}.flex-col{flex-direction:column}.cursor-pointer{cursor:pointer}.cursor-not-allowed{cursor:not-allowed}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.items-center{align-items:center}.justify-between{justify-content:space-between}.justify-evenly{justify-content:space-evenly}.gap-\\[10px\\]{gap:10px}.gap-16{gap:4rem}.gap-2{gap:.5rem}.gap-4{gap:1rem}.gap-8{gap:2rem}.border,.border-1{border-width:1px}.border-gray-200{--un-border-opacity:1;border-color:rgb(229 231 235 / var(--un-border-opacity))}.border-gray-900{--un-border-opacity:1;border-color:rgb(17 24 39 / var(--un-border-opacity))}.dark .dark\\:border-gray-600{--un-border-opacity:1;border-color:rgb(75 85 99 / var(--un-border-opacity))}.dark .dark\\:border-gray-700{--un-border-opacity:1;border-color:rgb(55 65 81 / var(--un-border-opacity))}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.border-solid{border-style:solid}.bg-blue-100{--un-bg-opacity:1;background-color:rgb(219 234 254 / var(--un-bg-opacity))}.bg-blue-600{--un-bg-opacity:1;background-color:rgb(37 99 235 / var(--un-bg-opacity))}.bg-gray-100{--un-bg-opacity:1;background-color:rgb(243 244 246 / var(--un-bg-opacity))}.bg-gray-200{--un-bg-opacity:1;background-color:rgb(229 231 235 / var(--un-bg-opacity))}.bg-green{--un-bg-opacity:1;background-color:rgb(74 222 128 / var(--un-bg-opacity))}.bg-green-600{--un-bg-opacity:1;background-color:rgb(22 163 74 / var(--un-bg-opacity))}.bg-white{--un-bg-opacity:1;background-color:rgb(255 255 255 / var(--un-bg-opacity))}.dark .dark\\:bg-gray-700{--un-bg-opacity:1;background-color:rgb(55 65 81 / var(--un-bg-opacity))}.dark .dark\\:bg-gray-800{--un-bg-opacity:1;background-color:rgb(31 41 55 / var(--un-bg-opacity))}.dark .dark\\:hover\\:bg-gray-600:hover{--un-bg-opacity:1;background-color:rgb(75 85 99 / var(--un-bg-opacity))}.dark .dark\\:hover\\:bg-gray-700:hover{--un-bg-opacity:1;background-color:rgb(55 65 81 / var(--un-bg-opacity))}.hover\\:bg-blue-700:hover{--un-bg-opacity:1;background-color:rgb(29 78 216 / var(--un-bg-opacity))}.hover\\:bg-gray-100:hover{--un-bg-opacity:1;background-color:rgb(243 244 246 / var(--un-bg-opacity))}.hover\\:bg-gray-300:hover{--un-bg-opacity:1;background-color:rgb(209 213 219 / var(--un-bg-opacity))}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-4{padding-left:1rem;padding-right:1rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.text-center{text-align:center}.align-middle{vertical-align:middle}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-6xl{font-size:3.75rem;line-height:1}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.dark .dark\\:text-white,.text-white{--un-text-opacity:1;color:rgb(255 255 255 / var(--un-text-opacity))}.text-black{--un-text-opacity:1;color:rgb(0 0 0 / var(--un-text-opacity))}.text-blue-600{--un-text-opacity:1;color:rgb(37 99 235 / var(--un-text-opacity))}.text-gray-500{--un-text-opacity:1;color:rgb(107 114 128 / var(--un-text-opacity))}.text-green-600{--un-text-opacity:1;color:rgb(22 163 74 / var(--un-text-opacity))}.text-red-500{--un-text-opacity:1;color:rgb(239 68 68 / var(--un-text-opacity))}.hover\\:text-red-700:hover{--un-text-opacity:1;color:rgb(185 28 28 / var(--un-text-opacity))}.font-bold{font-weight:700}.font-semibold{font-weight:600}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.uppercase{text-transform:uppercase}.disabled\\:opacity-50:disabled{opacity:.5}.shadow-md{--un-shadow:var(--un-shadow-inset) 0 4px 6px -1px var(--un-shadow-color, rgb(0 0 0 / .1)),var(--un-shadow-inset) 0 2px 4px -2px var(--un-shadow-color, rgb(0 0 0 / .1));box-shadow:var(--un-ring-offset-shadow),var(--un-ring-shadow),var(--un-shadow)}.uix-icon{&[solid]{stroke:currentColor;fill:currentColor}display:inline-block;vertical-align:middle}.uix-card{--uix-card-width: auto;--uix-card-padding: var(--uix-container-padding, 0);--uix-card-border-size: var(--uix-container-border-size, 0px);--uix-card-border-radius: var(--radius-md);--uix-card-background-color: var(--color-default-1, #f0f0f0);--uix-card-border-color: var(--uix-container-border-color, var(--color-default, #cccccc));--uix-card-shadow: 0 4px 6px rgba(0, 0, 0, .1);--uix-card-min-height: var(--uix-container-min-height, 50px);--uix-card-gap: var(--uix-container-gap, 0);--uix-card-height: auto;--uix-card-justify: var(--uix-container-justify, flex-start);--uix-card-align-items: var(--uix-container-align-items, stretch);--uix-card-overflow: var(--uix-container-overflow, visible);--uix-card-position: var(--uix-container-position, static);--uix-card-list-style-type: var(--uix-container-list-style-type, none);--uix-card-text-color: var(--uix-container-text-color, var(--uix-text-color));border-width:var(--uix-card-border-size);border-radius:var(--uix-card-border-radius);background-color:var(--uix-card-background-color);border-color:var(--uix-card-border-color);box-shadow:var(--uix-card-shadow);list-style-type:var(--uix-card-list-style-type);color:var(--uix-card-text-color);&[clickable],&[clickable] *{cursor:pointer}>:last-child.uix-join{margin-left:calc(-1 * var(--uix-card-padding));margin-right:calc(-1 * var(--uix-card-padding));margin-bottom:calc(-1 * var(--uix-card-padding));padding-bottom:0;border-radius:var(--uix-card-border-radius)!important;.uix-button{border-radius:0!important;&:last-child{border-bottom-right-radius:var(--uix-card-border-radius)!important}&:first-child{border-right-width:0;border-bottom-left-radius:var(--uix-card-border-radius)!important}}}&[horizontal]>:last-child.uix-join{margin-top:calc(-1 * var(--uix-card-padding));margin-bottom:calc(-1 * var(--uix-card-padding));margin-right:0;padding-right:0}}.uix-form{display:flex;flex-direction:column;gap:1rem;padding-top:1rem}.uix-join{--uix-list-button-radius: var(--uix-item-border-radius, 5px);--uix-list-button-border-width: 1px;--uix-list-button-margin: 0;list-style-type:var(--uix-list-container-list-style-type);width:auto;&.uix-join{flex-direction:row;&[vertical]{flex-direction:column}&[reverse][vertical]{flex-direction:column-reverse}&[reverse]:not([vertical]){flex-direction:row-reverse}}display:flex;flex-direction:row;>*{width:100%;margin:var(--uix-list-button-margin);&:first-child{border-top-left-radius:var(--uix-list-button-radius);border-bottom-left-radius:var(--uix-list-button-radius);border-bottom-right-radius:0;border-top-right-radius:0}&:last-child{border-top-right-radius:var(--uix-list-button-radius);border-bottom-right-radius:var(--uix-list-button-radius);border-top-left-radius:0;border-bottom-left-radius:0;border-left-width:0}}>[bordered],>[outline]{&:last-child{border-width:var(--uix-list-button-border-width)}&:hover:active{border-width:var(--uix-list-button-border-width)}&:has(+*:active){border-width:var(--uix-list-button-border-width)}}&[vertical]{>*{border-radius:0;margin:var(--uix-list-button-margin);&:first-child{border-top-left-radius:var(--uix-list-button-radius);border-top-right-radius:var(--uix-list-button-radius)}&:last-child{border-bottom-left-radius:var(--uix-list-button-radius);border-bottom-right-radius:var(--uix-list-button-radius)}}>.uix-button[bordered],>.uix-button[outline]{border-width:var(--uix-list-button-border-width);&:last-child{border-width:var(--uix-list-button-border-width)}&:hover:active{border-width:var(--uix-list-button-border-width)}&:has(+.uix-button:active){border-width:var(--uix-list-button-border-width)}}}}.uix-input{--uix-input-background-color: var(--color-default-10);--uix-input-border-color: var(--color-default-70);--uix-input-text-color: var(--color-default-95);--uix-input-border-radius: .375rem;--uix-input-padding-x: 5px;--uix-input-padding-y: 5px;--uix-input-font-size: 1rem;--uix-input-focus-ring-width: 2px;--uix-input-focus-ring-offset-width: 2px;--uix-input-height: 2.5rem;position:relative;display:flex;width:100%;height:var(--uix-input-height);border-radius:var(--uix-input-border-radius);border:2px solid var(--uix-input-border-color);font-size:var(--uix-input-font-size);background-color:var(--uix-input-background-color);color:var(--uix-input-text-color);&:focus{outline:none;outline-style:none;box-shadow:none;border-color:transparent}input[type=text],input[type=password],input[type=email],input[type=number],input[type=decimal],input[type=search],input[type=tel],input[type=url]{width:100%;outline:none;color:var(--uix-input-text-color);background-color:transparent;padding:var(--uix-input-padding-x) var(--uix-input-padding-y);border:0;&:focus+label,&:not(:placeholder-shown)+label{transition:margin-top .3s ease,font-size .3s ease;margin-top:-.4rem;font-size:.6rem;cursor:default;.uix-text{--uix-text-size: .8rem}}&::placeholder{color:transparent}&:focus{outline:none;outline-style:none;box-shadow:none;border-color:transparent;&::placeholder{color:var(--uix-input-text-color)}}}label{.uix-text{--uix-text-font-weight: 600}cursor:text;position:absolute;margin-top:.5rem;font-family:monospace;letter-spacing:.05em;text-transform:uppercase;font-weight:600;margin-left:.75rem;padding-right:.5rem;padding-left:.25rem;background-color:var(--uix-input-background-color);color:var(--uix-input-text-color);transition:margin-top .3s ease,font-size .3s ease}label[required]:after{content:"*";color:var(--color-error-50)}&:not([type=checkbox]):not([radio]) input:focus-visible{outline:none;box-shadow:0 0 0 var(--uix-input-focus-ring-width) var(--uix-input-border-color)}&:not([type=checkbox]):not([radio]) input:disabled{cursor:not-allowed;opacity:.6}&[type=checkbox],&[radio]{border:0;align-items:center;height:auto;width:auto;position:relative;cursor:pointer}&[type=checkbox] label,&[radio] label{position:static;margin-top:0;background-color:transparent;padding:0;cursor:pointer;margin-left:.5rem;text-transform:none;font-family:inherit;letter-spacing:normal;font-weight:400;.uix-text{--uix-text-font-weight: 400}}&[type=checkbox] input,&[radio] input[type=radio]{width:var(--uix-input-size);height:var(--uix-input-size);margin:0;border:none;background:none;box-shadow:none;padding:0}&[type=checkbox] input:disabled,&[radio] input[type=radio]:disabled{cursor:not-allowed;opacity:.6}&[type=checkbox],&[radio]{gap:.75rem;padding:.5rem 0;--uix-checkbox-size: 1.5rem;--uix-checkbox-border-radius: .375rem;--uix-checkbox-checked-bg: var(--uix-input-border-color);--uix-checkbox-check-color: var(--uix-input-background-color);input,input[type=radio]{appearance:none;-webkit-appearance:none;width:var(--uix-checkbox-size);height:var(--uix-checkbox-size);margin:0;border:2px solid var(--uix-input-border-color);border-radius:var(--uix-checkbox-border-radius);background-color:var(--uix-input-background-color);cursor:pointer;position:relative;transition:background-color .2s ease,border-color .2s ease;&:after{content:"";position:absolute;display:none;left:50%;top:50%;width:.375rem;height:.75rem;border:solid var(--uix-checkbox-check-color);border-width:0 2px 2px 0;transform:translate(-50%,-60%) rotate(45deg)}&:checked{background-color:var(--uix-checkbox-checked-bg);border-color:var(--uix-checkbox-checked-bg);&:after{display:block}}&:focus-visible{box-shadow:0 0 0 var(--uix-input-focus-ring-width) var(--uix-input-border-color)}&:disabled{opacity:.6;cursor:not-allowed;+label{cursor:not-allowed;opacity:.6}}}&:hover:not(:has(input[type=checkbox]:disabled)){input[type=checkbox]{border-color:var(--uix-input-border-color)}}label{margin-left:0;order:2}}}.uix-modal{--uix-modal-background-color: var(--color-default-1, #ffffff);--uix-modal-box-shadow: 0 25px 50px -12px rgba(0, 0, 0, .25);--uix-modal-padding: var(--spacing-sm);--uix-modal-dialog-width: var(--sizes-xl);--uix-container-height: auto;border:0;dialog{&[open]{display:flex}position:absolute;margin:auto;z-index:1000;overflow-y:auto;box-sizing:border-box;transition:all .1s ease-in-out;border:0;background-color:transparent}}.uix-calendar{uix-calendar-day{margin-inline:auto}[calendarDay]{cursor:pointer;text-align:center;padding:.5rem;background-color:transparent;&[toggled]{background-color:var(--color-primary-50);color:#fff}}}.uix-link{&[indent]{>a,>button{padding-left:var(--uix-link-indent)}}&[active]:hover{color:var(--uix-link-hover-text-color, var(--color-primary-40))}&[selectable][selected]{background-color:var(--color-primary-40)}&:hover{[tooltip]{display:flex}}&[tooltip]{display:inline-block;&:hover{[tooltip]{visibility:visible}}[tooltip]{visibility:hidden;width:120px;background-color:#000;color:#fff;text-align:center;border-radius:6px;padding:5px 0;position:absolute;z-index:1000000000;top:50%;left:100%;transform:translateY(-50%)}}&[position~=top] [tooltip]{bottom:100%;left:50%;transform:translate(-50%)}&[position~=bottom] [tooltip]{top:100%;left:50%;transform:translate(-50%)}&[position~=left] [tooltip]{top:50%;right:100%;transform:translateY(-50%)}&[tooltip],&[dropdown],&[context],&[float]{position:relative}&[dropdown],&[accordion]{flex-direction:column}[float],[dropdown],[accordion],[context]{display:none}&[floatopen] [float]{display:block;position:absolute;bottom:50px;right:30px;width:30px}&[context]{z-index:auto}[dropdown],[context][open]{position:absolute;left:0;top:100%;width:100%;min-width:200px;z-index:1000;background-color:var(--color-primary-10);box-shadow:0 8px 16px #0003;.uix-link:hover,input{background-color:var(--color-primary-20)}>.uix-link,input{width:100%}}[context][open]{display:flex}&[selected]{[dropdown],[accordion]{display:flex}}&[vertical]{margin:0 auto}--uix-link-indent: 0;cursor:pointer;a,button{cursor:pointer;padding:var(--uix-link-padding);&:hover{color:var(--uix-link-hover-color, var(--color-primary-70))}}color:var(--uix-link-text-color, var(--color-primary-70));font-weight:var(--uix-link-font-weight, 600);width:var(--uix-link-width, auto);.uix-text-icon__element{display:flex;align-items:center;gap:var(--uix-link-icon-gap, .5rem);width:auto;&[reverse][vertical]{flex-direction:column-reverse}&:not([reverse])[vertical]{flex-direction:column}&[reverse]:not([vertical]){flex-direction:row-reverse}&:not([reverse]):not([vertical]){flex-direction:row}}transition:all .3s ease-in-out}.uix-button{--uix-button-font-weight: 700;--uix-button-text-color: var(--color-default-80);--uix-button-background-color: var(--color-default-100);--uix-button-hover-background-color: var(--color-default-20);--uix-button-border-radius: var(--radius-sm);--uix-button-border-size: 0;--uix-button-border-color: var(--color-default-40);--uix-button-hover-opacity: .9;--uix-button-active-scale: .9;--uix-button-width: fit-content;--uix-button-height: fit-content;display:flex;flex-direction:row;align-items:center;gap:.5rem;cursor:pointer;transition:all .3s ease-in-out;font-weight:var(--uix-button-font-weight);color:var(--uix-button-text-color);background-color:var(--uix-button-background-color);width:var(--uix-button-width);height:var(--uix-button-height);border:var(--uix-button-border-size) solid var(--uix-button-border-color);border-radius:var(--uix-button-border-radius);>button,>a,>input{padding:var(--uix-button-padding, var(--uix-link-padding));word-break:keep-all;height:100%;line-height:var(--uix-button-height);border-radius:var(--uix-button-border-radius);flex-basis:100%;justify-content:var(--uix-text-align);&:hover{opacity:var(--uix-button-hover-opacity);background-color:var(--uix-button-hover-background-color)}&:hover:active{opacity:var(--uix-button-hover-opacity)}}.uix-icon,button,input,a{cursor:pointer}}.uix-avatar{>:not(uix-overlay){width:var(--uix-avatar-width);height:var(--uix-avatar-height);border-radius:var(--uix-avatar-border-radius);background-color:var(--uix-avatar-background-color)}&[ring]{box-shadow:0 0 0 var(--uix-avatar-ring-width) var(--uix-avatar-ring)}>img{width:100%;height:100%;object-fit:cover}>uix-overlay{position:absolute;z-index:100;--tx: 0;--ty: 0;transform:translate(var(--tx),var(--ty));cursor:pointer;text-align:center;background:transparent}>uix-overlay[y=top]{top:0%}>uix-overlay[y=bottom]{bottom:0%}>uix-overlay[y=center]{top:50%;--ty: -50%}>uix-overlay[x=left]{left:-5%}>uix-overlay[x=right]{right:0%}>uix-overlay[x=center]{left:50%;--tx: -50%}--uix-avatar-background-color: var(--color-default-30, #d1d5db);--uix-avatar-text: var(--color-default, #000000);--uix-avatar-ring: var(--color-default, #000000);--uix-avatar-ring-width: 2px;--uix-avatar-border-radius: 50%;--uix-avatar-width: 3rem;--uix-avatar-height: 3rem;display:flex;position:relative;justify-content:center;align-items:center;overflow:hidden;color:var(--uix-avatar-text);font-size:calc(var(--uix-avatar-width) / 2.5);font-weight:500;vertical-align:middle;text-align:center;min-width:var(--uix-avatar-width);padding:3px}.uix-circle{&:not([solid]){background-color:transparent}}@font-face{font-family:Manrope;font-weight:200;src:url(/modules/font/manrope/extralight.woff2) format("woff2")}@font-face{font-family:Manrope;font-weight:300;src:url(/modules/font/manrope/light.woff2) format("woff2")}@font-face{font-family:Manrope;font-weight:500;src:url(/modules/font/manrope/medium.woff2) format("woff2")}@font-face{font-family:Manrope;font-weight:400;src:url(/modules/font/manrope/regular.woff2) format("woff2")}@font-face{font-family:Manrope;font-weight:600;src:url(/modules/font/manrope/semibold.woff2) format("woff2")}@font-face{font-family:Manrope;font-weight:700;src:url(/modules/font/manrope/bold.woff2) format("woff2")}@font-face{font-family:Manrope;font-weight:800;src:url(/modules/font/manrope/extrabold.woff2) format("woff2")}body{font-family:var(--font-family)}html,body{font-family:var(--font-family);background-color:var(--background-color)!important;color:var(--text-color)!important;width:100%;min-height:100%;height:100%;padding:0;margin:0}body:not(.production) *:not(:defined){border:1px solid red}.dark{filter:invert(1) hue-rotate(180deg)}.dark img,.dark dialog,.dark video,.dark iframe{filter:invert(1) hue-rotate(180deg)}html{font-size:14px}@media (max-width: 768px){html{font-size:18px}}@media (max-width: 480px){html{font-size:20px}}textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}:root{box-sizing:border-box;-moz-text-size-adjust:none;-webkit-text-size-adjust:none;text-size-adjust:none;line-height:1.2;-webkit-font-smoothing:antialiased}*,*:before,*:after{box-sizing:border-box}*{margin:0}body{-webkit-font-smoothing:antialiased}a{color:currentColor;text-decoration:none;font-family:var(--font-family)}button,textarea,select{background-color:inherit;border-width:0;color:inherit}img,picture,video,canvas,svg{display:block;max-width:100%}input,button,textarea,select{font:inherit}p,h1,h2,h3,h4,h5,h6{font-family:var(--font-family);overflow-wrap:break-word}dialog::backdrop{background-color:#000c}*::-webkit-scrollbar{width:8px;margin-right:10px}*::-webkit-scrollbar-track{background:transparent}*::-webkit-scrollbar-thumb{&:hover{scrollbar-color:rgba(154,153,150,.8) transparent}border-radius:10px;border:none}*::-webkit-scrollbar-button{background:transparent;color:transparent}*{scrollbar-width:thin;scrollbar-color:transparent transparent;&:hover{scrollbar-color:rgba(154,153,150,.8) transparent}}[full]{width:100%;height:100vh}[w-full]{width:100%}[grow]{flex-grow:1}[hide],.hide{display:none!important}[noscroll]{overflow:hidden}div [container]{display:flex}div [container][horizontal]{display:flex;flex-direction:col}
`,metaType:"text/css"}};self.addEventListener("install",t=>t.waitUntil(self.skipWaiting())),self.addEventListener("activate",t=>t.waitUntil(self.clients.claim())),self.addEventListener("fetch",t=>{const n=new URL(t.request.url),e=FILE_BUNDLE[n.pathname];e&&t.respondWith(new Response(e.content,{headers:{"Content-Type":e.metaType||"application/javascript"}}))});
