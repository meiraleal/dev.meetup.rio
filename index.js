const ensureSWController=()=>{const o=new Promise((r,t)=>{setTimeout(()=>t(new Error("Service Worker timed out.")),100)}),e=new Promise(r=>{if(navigator.serviceWorker.controller)return r();navigator.serviceWorker.addEventListener("controllerchange",()=>r())});return Promise.race([e,o])},startApp=async()=>{if(!("serviceWorker"in navigator))throw console.warn("Service Worker not supported."),new Error("Platform not supported");await navigator.serviceWorker.register("/sw.js",{scope:"/"});try{console.log("Waiting for Service Worker to take control..."),await ensureSWController(),console.log("\u2705 Service Worker is in control!"),await import("/bootstrap.js"),await import("/app.js")}catch{console.warn("Service Worker did not take control in time. Reloading..."),window.location.reload()}};startApp();
